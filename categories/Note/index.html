<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta name="theme-color" content="#123456"><title>Category: Note - Chen Yulin&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#6495ed"><meta name="application-name" content="Icarus - Hexo Theme"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="msapplication-TileColor" content="#6495ed"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Icarus - Hexo Theme"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Chen Yulin&#039;s Blog"><meta property="og:url" content="http://chen-yulin.github.io/"><meta property="og:site_name" content="Chen Yulin&#039;s Blog"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://chen-yulin.github.io/img/og_image.png"><meta property="article:author" content="Chen Yulin"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://chen-yulin.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://chen-yulin.github.io"},"headline":"Chen Yulin's Blog","image":["http://chen-yulin.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Chen Yulin"},"publisher":{"@type":"Organization","name":"Chen Yulin's Blog","logo":{"@type":"ImageObject","url":{"light":"/img/cyllogo.png","dark":"/img/cyllogonight.png"}}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/img/cyllogo.png" alt="Chen Yulin&#039;s Blog" height="28"><img class="logo-img-dark" src="/img/cyllogonight.png" alt="Chen Yulin&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Chen-Yulin"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories/">Categories</a></li><li class="is-active"><a href="#" aria-current="page">Note</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-12-31T05:13:32.000Z" title="12/31/2024, 1:13:32 PM">2024-12-31</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:16.043Z" title="12/31/2024, 3:07:16 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">7 minutes read (About 1016 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/12/31/%5BOBS%5DDeep%20Learning-Imitation%20Learnning-A%20Survey%20of%20Imitation%20Learning-%20Algorithms,%20Recent%20%20Developments,%20and%20Challenges/">A Survey of Imitation Learning- Algorithms, Recent  Developments, and Challenges</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>IL是区别于传统手动编程来赋予机器人自主能力的方法。<br>IL 允许机器通过演示（人类演示专家行为）来学习所需的行为，从而消除了对显式编程或特定于任务的奖励函数的需要。<br>IL主要有两个类别：</p>
<ul>
<li>行为克隆(BC)</li>
<li>反向强化学习(IRL)<div class="post-content"><a href="/2024/12/31/[OBS]Deep Learning-Imitation Learnning-A Survey of Imitation Learning- Algorithms, Recent  Developments, and Challenges/Pasted_image_20241231131825.png" title="" title=" class="gallery-item"><img src="/2024/12/31/[OBS]Deep Learning-Imitation Learnning-A Survey of Imitation Learning- Algorithms, Recent  Developments, and Challenges/Pasted_image_20241231131825.png" alt="" title=""></a></div></li>
</ul>
<h2 id="Behavior-Cloning"><a href="#Behavior-Cloning" class="headerlink" title="Behavior Cloning"></a>Behavior Cloning</h2><p>BC 是一种 IL 技术，它将学习行为的问题视为监督学习任务 。 BC 涉及通过建立环境状态与相应专家操作之间的映射来训练模型来复制专家的行为。专家的行为被记录为一组state-action pair，也称为演示。在训练过程中，模型学习一个函数，利用这些演示作为输入，将当前状态转换为相应的专家操作。经过训练，模型可以利用这个学习函数来生成遇到新状态的动作。</p>
<p>不需要了解环境的潜在动态，计算效率很高，相对简单的方法。</p>
<p>The covariate shift problem: 测试期间观察到的状态分布可能与训练期间观察到的状态分布有所不同，使得代理在遇到未见过的状态时容易出错，而对于如何进行操作缺乏明确的指导。BC监督方法的问题是，当智能体漂移并遇到分布外状态时，它不知道如何返回到演示的状态。</p>
<p>为了解决这个问题：</p>
<div class="post-content"><a href="/2024/12/31/[OBS]Deep Learning-Imitation Learnning-A Survey of Imitation Learning- Algorithms, Recent  Developments, and Challenges/Pasted_image_20241231133031.png" title="" title=" class="gallery-item"><img src="/2024/12/31/[OBS]Deep Learning-Imitation Learnning-A Survey of Imitation Learning- Algorithms, Recent  Developments, and Challenges/Pasted_image_20241231133031.png" alt="" title=""></a></div>


<h2 id="Inverse-Reinforcement-Learning"><a href="#Inverse-Reinforcement-Learning" class="headerlink" title="Inverse Reinforcement Learning"></a>Inverse Reinforcement Learning</h2><p>IRL 涉及一个学徒代理，其任务是推断观察到的演示背后的奖励函数，这些演示被认为源自表现最佳的专家 。然后使用推断的奖励函数通过 RL 训练学习代理的策略。</p>
<p>为了解决“政策-&gt;奖励函数“的模糊性，有以下三种IRL</p>
<ul>
<li>maximum-margin methods（奖励函数比任何其他策略在一定程度上更全面地解释最优策略。这本质上意味着找到一个最大化指定利润的解决方案，确保派生的奖励函数捕捉专家行为的本质。）</li>
<li>maximum entropy（处理专家次优性和随机性的有前景的能力）</li>
<li>guided cost learning（旨在优化策略优化内循环内的非线性奖励函数的方法。这种方法通过直接利用系统的原始状态来构建奖励函数，从而改变了传统的 IRL 范式，从而消除了广泛的特征工程的需要。）</li>
</ul>
<h2 id="Adversarial-Imitation-Learning"><a href="#Adversarial-Imitation-Learning" class="headerlink" title="Adversarial Imitation Learning"></a>Adversarial Imitation Learning</h2><p>The agent strives to deceive the discriminator by generating trajectories closely resembling those of the expert.</p>
<h2 id="Imitation-From-Observation"><a href="#Imitation-From-Observation" class="headerlink" title="Imitation From Observation"></a>Imitation From Observation</h2><p>仅通过图像序列来学习，不需要具体的关节动作操作数据。</p>
<blockquote>
<p>Unlike the traditional methods, IfO presents a more organic approach to learning from experts, mirroring how humans and animals approach imitation. Humans often learn new behaviors by observing others without detailed knowledge of their actions (e.g., the muscle commands). People learn a diverse range of tasks, from weaving to swimming to playing games, by watching online videos. Despite differences in body shapes, sensory inputs, and timing, humans exhibit an impressive ability to apply knowledge gained from the online demonstrations</p>
</blockquote>
<p>将可学习的资源扩大到了线上的视频资源。</p>
<h3 id="Latent-Action-Policies-LAPOs"><a href="#Latent-Action-Policies-LAPOs" class="headerlink" title="Latent Action Policies (LAPOs)"></a>Latent Action Policies (LAPOs)</h3><p>过分析观察到的动态，LAPO 推断出行动空间的底层结构，促进潜在行动策略的训练。然后，这些策略可以进行高效的微调，以达到专家级的性能，从而提供离线和在线场景的适应性。使用包含标记动作的小数据集进行离线微调是可行的，而在线微调可以使用奖励来完成。与依赖标记数据来训练逆动力学模型不同，LAPO<strong>直接从观察到的环境动态中导出潜在动作信息，而不需要任何标签</strong>。</p>
<h2 id="Challenges-And-Limitations"><a href="#Challenges-And-Limitations" class="headerlink" title="Challenges And Limitations"></a>Challenges And Limitations</h2><p>。。。</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-12-23T11:05:36.000Z" title="12/23/2024, 7:05:36 PM">2024-12-23</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:15.660Z" title="12/31/2024, 3:07:15 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">13 minutes read (About 2017 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/12/23/%5BOBS%5D477%20Challenge/">477 Challenge</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><a target="_blank" rel="noopener" href="https://validator.w3.org/">https://validator.w3.org/</a> : 是一个由万维网联盟（W3C）提供的在线工具，用于检查网页的 HTML、XHTML 或其他标记语言是否符合相关标准和规范。它可以帮助开发者提高网页的质量和兼容性，确保网页在不同浏览器和设备上正确显示。</p>
<p>作为实习生你需要完成网站开发，要求如下(不重要)</p>
<blockquote>
<p>During the next few hours you are explained in details all the requirements you have to match. Among<br>the most emphasized points you learn that you must (i) use the last version of Microsoft Front Page<br>Express to write the websites; (ii) include as many buttons as possible (even if one is enough); (iii) when a<br>hidden box is expanded, do so as high as possible above the button which opened it and do not notify the<br>user; (iv) as much as possible do not disable or hide irrelevant information, simply include it the middle<br>of the useful content; (v) use and abuse pop ups; (vi) feel free to include Chinese text in the middle of<br>an English text; (vii) if a page includes videos, ensure they are all fully downloaded before the user can<br>do anything; You also learn that they pay much attention to the quality of their product, and as such<br>you should never forget to test your website, IE 6 being recommended.<br>在接下来的几个小时里，我们会详细解释您需要满足的所有要求。其中最受关注的要点是：您必须 (i) 使用最新版本的 Microsoft Front Page Express 来编写网站；(ii) 包含尽可能多的按钮（即使一个按钮就足够了）；(iii) 展开隐藏框时，尽可能将其展开到打开它的按钮上方，并且不要通知用户；(iv) 尽可能不要禁用或隐藏不相关的信息，只需将其包含在有用内容的中间；(v) 使用和滥用弹出窗口；(vi) 可以在英文文本中间随意添加中文文本；(vii) 如果页面包含视频，请确保在用户执行任何操作之前，它们都已完全下载；您还了解到他们非常重视产品质量，因此您永远不要忘记测试您的网站，建议使用 IE 6.</p>
</blockquote>
<p>大概是马牛特有的讽刺。。。总之就是总结了一堆网站开发的禁止事项。<br>因为这些要求的存在（特别是网页开发环境只能在windows下使用），我们作为一位只有一台双系统电脑的实习生遇到了障碍：</p>
<blockquote>
<p>每次开发网页我们都需要切换到windows系统并暂停linux系统下的任务。然而在linux下我们需要跑一些任务，需要尽可能早去完成。</p>
</blockquote>
<p>针对这些linux任务，马牛貌似将其分成了T个独立的任务，根据output推测，每个任务也可以被暂停，然后切换到windows进行开发。</p>
<p>可以通过把任务转交给朋友的方式来从schedule中移除部分网页开发的任务，至多两个网页。每个网页有对应的用于交易的作业量，作业量加起来不能超过HC的触发阈值。</p>
<h3 id="标识"><a href="#标识" class="headerlink" title="标识"></a>标识</h3><div class="post-content"><a href="/2024/12/23/[OBS]477 Challenge/Pasted_image_20241224004726.png" title="" title=" class="gallery-item"><img src="/2024/12/23/[OBS]477 Challenge/Pasted_image_20241224004726.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/12/23/[OBS]477 Challenge/Pasted_image_20241224004733.png" title="" title=" class="gallery-item"><img src="/2024/12/23/[OBS]477 Challenge/Pasted_image_20241224004733.png" alt="" title=""></a></div>

<p>需要注意的是，计算任务需要的时间 $t_i$ 和网页完成的deadline $t_i$ 不是一个东西，建议区分标记。</p>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><p>计算任务，网页开发以及外援的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">P H</span><br><span class="line">s_0 t_0 h_0 # info for each page</span><br><span class="line">... # omit P-1 lines</span><br><span class="line">T # number of tasks</span><br><span class="line">t_0</span><br><span class="line">... # omit T-1 lines</span><br></pre></td></tr></table></figure>
<div class="post-content"><a href="/2024/12/23/[OBS]477 Challenge/Pasted_image_20241224005226.png" title="" title=" class="gallery-item"><img src="/2024/12/23/[OBS]477 Challenge/Pasted_image_20241224005226.png" alt="" title=""></a></div>
### 输出
我们并不需要在规划中完成所有的计算任务。针对每个计算任务，计算其**最早能完成的时间点**即可。针对不同时长的计算任务，**使用的分配策略可能不同**。
<div class="post-content"><a href="/2024/12/23/[OBS]477 Challenge/Pasted_image_20241224005322.png" title="" title=" class="gallery-item"><img src="/2024/12/23/[OBS]477 Challenge/Pasted_image_20241224005322.png" alt="" title=""></a></div>

<h3 id="以下纯来自AI的solution"><a href="#以下纯来自AI的solution" class="headerlink" title="以下纯来自AI的solution"></a>以下纯来自AI的solution</h3><p>To solve this problem, you need to combine <strong>optimization</strong>, <strong>scheduling</strong>, and <strong>greedy strategies</strong>. Here’s a step-by-step guide:</p>
<hr>
<h3 id="1-Parse-the-Input"><a href="#1-Parse-the-Input" class="headerlink" title="1. Parse the Input"></a><strong>1. Parse the Input</strong></h3><ul>
<li>Read:<ul>
<li>P,H: Number of webpages and maximum allowable exercises for delegation.</li>
<li>Details for each webpage (s_i, t_i, h_i): Start time, deadline, and exercise cost.</li>
<li>T: Number of computational tasks and their durations (t_i).</li>
</ul>
</li>
</ul>
<hr>
<h3 id="2-Determine-Delegation-Strategy"><a href="#2-Determine-Delegation-Strategy" class="headerlink" title="2. Determine Delegation Strategy"></a><strong>2. Determine Delegation Strategy</strong></h3><h4 id="Key-Idea"><a href="#Key-Idea" class="headerlink" title="Key Idea:"></a><strong>Key Idea:</strong></h4><ul>
<li>Delegate up to <strong>2 webpages</strong> to the friend such that the <strong>total exercise cost (h_i) is minimized and ≤H</strong>.</li>
</ul>
<h4 id="Steps"><a href="#Steps" class="headerlink" title="Steps:"></a><strong>Steps:</strong></h4><ol>
<li><strong>Sort webpages by their exercise cost (h_i)</strong>.</li>
<li><strong>Select up to 2 webpages</strong> to delegate:<ul>
<li>Choose pages with the smallest h_i that satisfy h_1+h_2≤H.</li>
</ul>
</li>
<li>Remove these pages from your schedule, as they are handled by the friend.</li>
</ol>
<hr>
<h3 id="3-Calculate-Free-Time-Intervals"><a href="#3-Calculate-Free-Time-Intervals" class="headerlink" title="3. Calculate Free Time Intervals"></a><strong>3. Calculate Free Time Intervals</strong></h3><h4 id="Key-Idea-1"><a href="#Key-Idea-1" class="headerlink" title="Key Idea:"></a><strong>Key Idea:</strong></h4><ul>
<li>After delegating pages, compute the <strong>blocked time intervals</strong> caused by the remaining webpages.</li>
</ul>
<h4 id="Steps-1"><a href="#Steps-1" class="headerlink" title="Steps:"></a><strong>Steps:</strong></h4><ol>
<li>For all non-delegated webpages, construct intervals [s_i, t_i).</li>
<li>Merge overlapping intervals to avoid double-counting blocked time.</li>
<li>Identify the <strong>free intervals</strong>:<ul>
<li>Initially, it is [0,∞).</li>
<li>Subtract merged blocked intervals to get the free time slots.</li>
</ul>
</li>
</ol>
<hr>
<h3 id="4-Schedule-Computational-Tasks"><a href="#4-Schedule-Computational-Tasks" class="headerlink" title="4. Schedule Computational Tasks"></a><strong>4. Schedule Computational Tasks</strong></h3><h4 id="Key-Idea-2"><a href="#Key-Idea-2" class="headerlink" title="Key Idea:"></a><strong>Key Idea:</strong></h4><ul>
<li>Fit each computational task into the <strong>free intervals</strong> to minimize its completion time.</li>
</ul>
<h4 id="Steps-2"><a href="#Steps-2" class="headerlink" title="Steps:"></a><strong>Steps:</strong></h4><ol>
<li>Sort computational tasks by their required time (t_i).</li>
<li>Iterate over each task:<ul>
<li>Start placing the task in the earliest available free interval.</li>
<li>If the task fits, calculate its completion time and reduce the interval size.</li>
<li>If it doesn’t fit, move to the next free interval.</li>
</ul>
</li>
<li>Store the completion time for each task.</li>
</ol>
<hr>
<h3 id="5-Output-Results"><a href="#5-Output-Results" class="headerlink" title="5. Output Results"></a><strong>5. Output Results</strong></h3><p>For each computational task, output the <strong>minimum completion time</strong> determined in the previous step.</p>
<hr>
<h3 id="Algorithm-Complexity"><a href="#Algorithm-Complexity" class="headerlink" title="Algorithm Complexity"></a><strong>Algorithm Complexity</strong></h3><ol>
<li><strong>Input Parsing:</strong> O(P+T)</li>
<li><strong>Delegation:</strong><ul>
<li>Sorting webpages: O(P \log P)</li>
<li>Selecting 2 webpages: O(1)</li>
</ul>
</li>
<li><strong>Free Interval Calculation:</strong><ul>
<li>Merging intervals: O(P \log P)</li>
</ul>
</li>
<li><strong>Task Scheduling:</strong><ul>
<li>Sorting tasks: O(T \log T)</li>
<li>Scheduling: O(T×free intervals), typically O(T + P).</li>
</ul>
</li>
</ol>
<p>Overall complexity: <strong>O((P + T) \log (P + T))</strong>.<br>this complexity is acceptable regarding the given input range.</p>
<hr>
<h3 id="OCaml-Implementation"><a href="#OCaml-Implementation" class="headerlink" title="OCaml Implementation"></a><strong>OCaml Implementation</strong></h3><p>Here’s a high-level pseudocode that can be adapted into OCaml:</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">(* Input Parsing *)</span></span><br><span class="line"><span class="keyword">let</span> read_input <span class="literal">()</span> =</span><br><span class="line">  <span class="keyword">let</span> p, h = read_line <span class="literal">()</span> <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> webpages = <span class="type">List</span>.init p (<span class="keyword">fun</span> _ -&gt; read_line <span class="literal">()</span>) <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> t = read_int <span class="literal">()</span> <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> tasks = <span class="type">List</span>.init t (<span class="keyword">fun</span> _ -&gt; read_int <span class="literal">()</span>) <span class="keyword">in</span></span><br><span class="line">  (p, h, webpages, tasks)</span><br><span class="line"></span><br><span class="line"><span class="comment">(* Delegate webpages *)</span></span><br><span class="line"><span class="keyword">let</span> delegate_webpages webpages h =</span><br><span class="line">  <span class="keyword">let</span> sorted_pages = <span class="type">List</span>.sort (<span class="keyword">fun</span> (_, _, h1) (_, _, h2) -&gt; compare h1 h2) webpages <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">rec</span> select_delegation remaining_pages acc h_left =</span><br><span class="line">    <span class="keyword">match</span> remaining_pages <span class="keyword">with</span></span><br><span class="line">    | <span class="literal">[]</span> -&gt; acc, remaining_pages</span><br><span class="line">    | (s, t, h)::tl <span class="keyword">when</span> h &lt;= h_left -&gt; select_delegation tl ((s, t, h)::acc) (h_left - h)</span><br><span class="line">    | _ -&gt; acc, remaining_pages</span><br><span class="line">  <span class="keyword">in</span></span><br><span class="line">  select_delegation sorted_pages <span class="literal">[]</span> h</span><br><span class="line"></span><br><span class="line"><span class="comment">(* Compute free intervals *)</span></span><br><span class="line"><span class="keyword">let</span> compute_free_intervals remaining_pages =</span><br><span class="line">  <span class="keyword">let</span> intervals = <span class="type">List</span>.map (<span class="keyword">fun</span> (s, t, _) -&gt; (s, t)) remaining_pages <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> merged_intervals = merge_intervals intervals <span class="keyword">in</span></span><br><span class="line">  calculate_free_time_slots merged_intervals</span><br><span class="line"></span><br><span class="line"><span class="comment">(* Schedule tasks *)</span></span><br><span class="line"><span class="keyword">let</span> schedule_tasks free_intervals tasks =</span><br><span class="line">  <span class="type">List</span>.map (<span class="keyword">fun</span> task -&gt;</span><br><span class="line">    find_earliest_completion free_intervals task</span><br><span class="line">  ) tasks</span><br><span class="line"></span><br><span class="line"><span class="comment">(* Main function *)</span></span><br><span class="line"><span class="keyword">let</span> <span class="literal">()</span> =</span><br><span class="line">  <span class="keyword">let</span> p, h, webpages, tasks = read_input <span class="literal">()</span> <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> delegated_pages, remaining_pages = delegate_webpages webpages h <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> free_intervals = compute_free_intervals remaining_pages <span class="keyword">in</span></span><br><span class="line">  <span class="keyword">let</span> task_completions = schedule_tasks free_intervals tasks <span class="keyword">in</span></span><br><span class="line">  <span class="type">List</span>.iter print_int task_completions</span><br></pre></td></tr></table></figure>


<h3 id="以下纯来自AI的proof"><a href="#以下纯来自AI的proof" class="headerlink" title="以下纯来自AI的proof"></a>以下纯来自AI的proof</h3><h3 id="Proof-of-Correctness-for-the-Algorithm"><a href="#Proof-of-Correctness-for-the-Algorithm" class="headerlink" title="Proof of Correctness for the Algorithm"></a><strong>Proof of Correctness for the Algorithm</strong></h3><p>The algorithm is designed to solve the problem of scheduling computational tasks on a single computer while meeting constraints related to webpage deadlines and delegation. Below is a formal proof of its correctness.</p>
<hr>
<h3 id="1-Problem-Understanding"><a href="#1-Problem-Understanding" class="headerlink" title="1. Problem Understanding"></a><strong>1. Problem Understanding</strong></h3><p>The problem involves:</p>
<ol>
<li>Allocating time for webpage writing (either by handling them yourself or delegating to a friend).</li>
<li>Maximizing free intervals for computational tasks.</li>
<li>Minimizing the completion times of computational tasks.</li>
</ol>
<p>To ensure correctness, we need to prove:</p>
<ul>
<li>Webpage constraints are respected.</li>
<li>Free time intervals are accurately calculated.</li>
<li>Computational tasks are scheduled optimally.</li>
</ul>
<hr>
<h3 id="2-Proof-Components"><a href="#2-Proof-Components" class="headerlink" title="2. Proof Components"></a><strong>2. Proof Components</strong></h3><h4 id="2-1-Webpage-Delegation"><a href="#2-1-Webpage-Delegation" class="headerlink" title="2.1 Webpage Delegation"></a><strong>2.1 Webpage Delegation</strong></h4><ul>
<li><strong>Key Idea:</strong> Delegate up to 2 webpages with the smallest exercise costs such that the total cost does not exceed H.</li>
<li><strong>Proof:</strong><ul>
<li>By sorting webpages by h_i (exercise cost) and selecting the top 2 that satisfy h1+h2≤H, the algorithm guarantees that:<ul>
<li>The delegation respects the maximum exercise limit H.</li>
<li>The webpages with the least impact on constraints are delegated, maximizing the remaining free time.</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h4 id="2-2-Free-Interval-Calculation"><a href="#2-2-Free-Interval-Calculation" class="headerlink" title="2.2 Free Interval Calculation"></a><strong>2.2 Free Interval Calculation</strong></h4><ul>
<li><strong>Key Idea:</strong> Compute free intervals by merging blocked intervals caused by non-delegated webpages.</li>
<li><strong>Proof:</strong><ul>
<li>Non-delegated webpages define intervals [s_i, t_i) that block the computer.</li>
<li>Merging overlapping intervals ensures no double-counting of blocked time, leaving only valid free intervals.</li>
<li>The algorithm iteratively merges intervals by sorting them by s_i and combining overlapping or adjacent intervals, which is a standard and proven approach.</li>
</ul>
</li>
</ul>
<hr>
<h4 id="2-3-Task-Scheduling"><a href="#2-3-Task-Scheduling" class="headerlink" title="2.3 Task Scheduling"></a><strong>2.3 Task Scheduling</strong></h4><ul>
<li><strong>Key Idea:</strong> Fit each computational task into the earliest available free interval to minimize its completion time.</li>
<li><strong>Proof:</strong><ul>
<li>Tasks are processed in increasing order of required time (t_i), ensuring that smaller tasks are scheduled earlier, leaving larger free intervals for longer tasks.</li>
<li>For each task:<ul>
<li>The algorithm scans free intervals and places the task in the earliest slot where it fits.</li>
<li>This greedy approach guarantees the earliest possible completion time for each task because:<ul>
<li>Free intervals are disjoint and sorted.</li>
<li>A task placed in an earlier slot cannot complete earlier in any other configuration without violating disjointness.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h4 id="2-4-Overall-Algorithm"><a href="#2-4-Overall-Algorithm" class="headerlink" title="2.4 Overall Algorithm"></a><strong>2.4 Overall Algorithm</strong></h4><ul>
<li><strong>Correctness Statement:</strong> The algorithm produces the earliest possible completion times for all tasks while satisfying webpage constraints and delegation limits.</li>
<li><strong>Proof:</strong><ul>
<li><strong>Webpages:</strong> Constraints are respected by delegating up to 2 pages within H exercises and blocking the necessary intervals for non-delegated pages.</li>
<li><strong>Free Intervals:</strong> Accurate calculation ensures no overlap or error in available time slots.</li>
<li><strong>Task Scheduling:</strong> Greedy placement in the earliest available interval ensures optimal completion times.</li>
</ul>
</li>
</ul>
<hr>
<h3 id="4-Edge-Cases"><a href="#4-Edge-Cases" class="headerlink" title="4. Edge Cases"></a><strong>4. Edge Cases</strong></h3><ul>
<li>P&#x3D;0,T&#x3D;0: No webpages or tasks, trivial solution.</li>
<li>H&#x3D;0: No delegation possible, all webpages must be handled by the user.</li>
<li>Overlapping webpage intervals: Correctly merged to avoid double-counting.</li>
<li>Tasks larger than any free interval: Scheduled in the earliest free interval where they fit.</li>
</ul>
<hr>
<h3 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5. Conclusion"></a><strong>5. Conclusion</strong></h3><p>The algorithm is correct as it:</p>
<ol>
<li>Adheres to all constraints (webpage deadlines, delegation limits, task requirements).</li>
<li>Ensures optimal scheduling of computational tasks.</li>
<li>Handles edge cases gracefully.</li>
</ol>
<p>Would you like a detailed explanation for a specific part of this proof or assistance implementing it?</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-12-17T14:56:38.000Z" title="12/17/2024, 10:56:38 PM">2024-12-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:15.773Z" title="12/31/2024, 3:07:15 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">17 minutes read (About 2557 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/12/17/%5BOBS%5DML-The%20Bitter%20Lesson/">The Bitter Lesson</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="Rich-Sutton"><a href="#Rich-Sutton" class="headerlink" title="Rich Sutton"></a>Rich Sutton</h2><h3 id="March-13-2019"><a href="#March-13-2019" class="headerlink" title="March 13, 2019"></a>March 13, 2019</h3><p>The biggest lesson that can be read from 70 years of AI research is that general methods that leverage computation are ultimately the most effective, and by a large margin. The ultimate reason for this is Moore’s law, or rather its generalization of continued exponentially falling cost per unit of computation. Most AI research has been conducted as if the computation available to the agent were constant (in which case leveraging human knowledge would be one of the only ways to improve performance) but, over a slightly longer time than a typical research project, massively more computation inevitably becomes available. Seeking an improvement that makes a difference in the shorter term, researchers seek to leverage their human knowledge of the domain, but the only thing that matters in the long run is the leveraging of computation. These two need not run counter to each other, but in practice they tend to. Time spent on one is time not spent on the other. There are psychological commitments to investment in one approach or the other. And the human-knowledge approach tends to complicate methods in ways that make them less suited to taking advantage of general methods leveraging computation.  There were many examples of AI researchers’ belated learning of this bitter lesson, and it is instructive to review some of the most prominent.  </p>
<p>In computer chess, the methods that defeated the world champion, Kasparov, in 1997, were based on massive, deep search. At the time, this was looked upon with dismay by the majority of computer-chess researchers who had pursued methods that leveraged human understanding of the special structure of chess. When a simpler, search-based approach with special hardware and software proved vastly more effective, these human-knowledge-based chess researchers were not good losers. They said that “brute force” search may have won this time, but it was not a general strategy, and anyway it was not how people played chess. These researchers wanted methods based on human input to win and were disappointed when they did not.  </p>
<p>A similar pattern of research progress was seen in computer Go, only delayed by a further 20 years. Enormous initial efforts went into avoiding search by taking advantage of human knowledge, or of the special features of the game, but all those efforts proved irrelevant, or worse, once search was applied effectively at scale. Also important was the use of learning by self play to learn a value function (as it was in many other games and even in chess, although learning did not play a big role in the 1997 program that first beat a world champion). Learning by self play, and learning in general, is like search in that it enables massive computation to be brought to bear. Search and learning are the two most important classes of techniques for utilizing massive amounts of computation in AI research. In computer Go, as in computer chess, researchers’ initial effort was directed towards utilizing human understanding (so that less search was needed) and only much later was much greater success had by embracing search and learning.  </p>
<p>In speech recognition, there was an early competition, sponsored by DARPA, in the 1970s. Entrants included a host of special methods that took advantage of human knowledge—knowledge of words, of phonemes, of the human vocal tract, etc. On the other side were newer methods that were more statistical in nature and did much more computation, based on hidden Markov models (HMMs). Again, the statistical methods won out over the human-knowledge-based methods. This led to a major change in all of natural language processing, gradually over decades, where statistics and computation came to dominate the field. The recent rise of deep learning in speech recognition is the most recent step in this consistent direction. Deep learning methods rely even less on human knowledge, and use even more computation, together with learning on huge training sets, to produce dramatically better speech recognition systems. As in the games, researchers always tried to make systems that worked the way the researchers thought their own minds worked—they tried to put that knowledge in their systems—but it proved ultimately counterproductive, and a colossal waste of researcher’s time, when, through Moore’s law, massive computation became available and a means was found to put it to good use.  </p>
<p>In computer vision, there has been a similar pattern. Early methods conceived of vision as searching for edges, or generalized cylinders, or in terms of SIFT features. But today all this is discarded. Modern deep-learning neural networks use only the notions of convolution and certain kinds of invariances, and perform much better.  </p>
<p>This is a big lesson. As a field, we still have not thoroughly learned it, as we are continuing to make the same kind of mistakes. To see this, and to effectively resist it, we have to understand the appeal of these mistakes. We have to learn the bitter lesson that building in how we think we think does not work in the long run. The bitter lesson is based on the historical observations that 1) AI researchers have often tried to build knowledge into their agents, 2) this always helps in the short term, and is personally satisfying to the researcher, but 3) in the long run it plateaus and even inhibits further progress, and 4) breakthrough progress eventually arrives by an opposing approach based on scaling computation by search and learning. The eventual success is tinged with bitterness, and often incompletely digested, because it is success over a favored, human-centric approach.  </p>
<p>One thing that should be learned from the bitter lesson is the great power of general purpose methods, of methods that continue to scale with increased computation even as the available computation becomes very great. The two methods that seem to scale arbitrarily in this way are search and learning.  </p>
<p>The second general point to be learned from the bitter lesson is that the actual contents of minds are tremendously, irredeemably complex; we should stop trying to find simple ways to think about the contents of minds, such as simple ways to think about space, objects, multiple agents, or symmetries. All these are part of the arbitrary, intrinsically-complex, outside world. They are not what should be built in, as their complexity is endless; instead we should build in only the meta-methods that can find and capture this arbitrary complexity. Essential to these methods is that they can find good approximations, but the search for them should be by our methods, not by us. We want AI agents that can discover like we can, not which contain what we have discovered. Building in our discoveries only makes it harder to see how the discovering process can be done.</p>
<p>从 70 年的人工智能研究中可以得到的最大教训是，利用计算的通用方法最终是最有效的，而且是最大的优势。其根本原因是摩尔定律，或者更确切地说是其对单位计算成本持续呈指数下降的概括。大多数人工智能研究都是在代理可用的计算是恒定的情况下进行的（在这种情况下，利用人类知识将是提高性能的唯一方法之一），但与典型的研究项目相比，在稍长的时间内，不可避免地会出现大量的计算可用。为了寻求在短期内产生影响的改进，研究人员试图利用他们对该领域的人类知识，但从长远来看，唯一重要的是利用计算。这两者不必相互矛盾，但在实践中它们往往是相互矛盾的。花在其中一个上的时间就是没有花在另一个上的时间。人们在心理上承诺投资于一种方法或另一种方法。而人类知识方法往往会使方法复杂化，使其不太适合利用利用计算的通用方法。人工智能研究人员迟迟没有吸取这一惨痛教训的例子有很多，回顾一下其中最突出的一些例子很有启发意义。<br>在计算机象棋中，1997 年击败世界冠军卡斯帕罗夫的方法是基于大规模深度搜索。当时，大多数计算机象棋研究人员对此感到沮丧，他们一直在寻求利用人类对象棋特殊结构的理解的方法。当一种更简单的、基于搜索的方法加上特殊的硬件和软件被证明更为有效时，这些基于人类知识的象棋研究人员就不是善于输的人了。他们说，“蛮力”搜索这次可能赢了，但这不是一种通用策略，而且无论如何它也不是人们下棋的方式。</p>
<p>这些研究人员希望基于人类输入的方法能够获胜，但结果却令他们失望。 计算机围棋也出现了类似的研究进展模式，只是推迟了 20 年。最初，人们付出了巨大的努力，利用人类知识或游戏的特殊功能来避免搜索，但一旦搜索被大规模有效应用，所有这些努力都被证明是无关紧要的，甚至更糟。同样重要的是使用自学来学习价值函数（就像在许多其他游戏甚至国际象棋中一样，尽管学习在 1997 年首次击败世界冠军的程序中并没有发挥重要作用）。自学和一般的学习就像搜索一样，因为它能够发挥大规模计算的作用。搜索和学习是人工智能研究中利用大量计算的两类最重要的技术。在计算机围棋中，就像在计算机国际象棋中一样，研究人员最初的努力是利用人类的理解力（这样就不需要太多的搜索），直到后来，通过采用搜索和学习才取得了更大的成功。 </p>
<p>在语音识别方面，20 世纪 70 年代，DARPA 赞助了一场早期的竞赛。参赛者包括大量利用人类知识（单词、音素、人类声道等知识）的特殊方法。另一方面，一些较新的方法更具统计性质，并且基于隐马尔可夫模型 (HMM) 进行更多的计算。统计方法再次战胜了基于人类知识的方法。这导致了整个自然语言处理领域发生了重大变化，几十年来，统计和计算逐渐占据了主导地位。语音识别中深度学习的兴起是朝着这一一致方向迈出的最新一步。深度学习方法更少地依赖人类知识，使用更多的计算，再加上对大量训练集的学习，从而产生了更好的语音识别系统。就像在游戏中一样，研究人员总是试图制造出按照他们认为自己的想法运作的系统——他们试图将这些知识放入他们的系统中——但最终却适得其反，浪费了研究人员大量的时间，而摩尔定律让大规模计算成为可能，并找到了一种充分利用它的方法。 </p>
<p>在计算机视觉中，也有类似的模式。早期的方法将视觉设想为搜索边缘、广义圆柱体或 SIFT 特征。但今天所有这些都被抛弃了。现代深度学习神经网络只使用卷积和某些类型的不变性的概念，而且表现要好得多。 </p>
<p>这是一个很大的教训。作为一个领域，我们还没有彻底学会它，因为我们还在继续犯同样的错误。要看到这一点，并有效地抵制它，我们必须了解这些错误的吸引力。我们必须学会不那么痛苦.</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2024/12/14/%5BOBS%5Dlinux-Nvidia-Cuda+Torch/"><img class="fill" src="/gallery/python.png" alt="Cuda+Torch" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-12-13T21:09:12.000Z" title="12/14/2024, 5:09:12 AM">2024-12-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:15.753Z" title="12/31/2024, 3:07:15 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">a few seconds read (About 81 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/12/14/%5BOBS%5Dlinux-Nvidia-Cuda+Torch/">Cuda+Torch</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p><code>nvidia-smi</code>返回的是driver所能支持的最新的cuda版本<br>系统安装的cuda版本可以随意，torch会优先使用虚拟环境中安装的cuda版本</p>
<h2 id="Conda管理Cuda"><a href="#Conda管理Cuda" class="headerlink" title="Conda管理Cuda"></a>Conda管理Cuda</h2><p>安装指定版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install nvidia/label/cuda-12.4.0::cuda-toolkit -c nvidia/label/cuda-12.4.0  </span><br></pre></td></tr></table></figure>
<p>安装最新版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install cuda-toolkit</span><br></pre></td></tr></table></figure>

</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2024/12/10/%5BOBS%5Dlinux-Use%20SSH%20to%20Connect%20Jupyter-lab/"><img class="fill" src="/gallery/python.png" alt="Use SSH to Connect Jupyter-lab" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-12-10T14:52:59.000Z" title="12/10/2024, 10:52:59 PM">2024-12-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:15.753Z" title="12/31/2024, 3:07:15 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">a minute read (About 174 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/12/10/%5BOBS%5Dlinux-Use%20SSH%20to%20Connect%20Jupyter-lab/">Use SSH to Connect Jupyter-lab</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>使用ssh作为命令行远程工具，启动远程的jupyter lab并且在本地的浏览器中打开。</p>
<p>远程运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter lab --no-browser --port=8080</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>--no-broswer</code> is very important</p>
</blockquote>
<p>output:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">[I 2024-12-10 14:30:24.585 ServerApp]     http://127.0.0.1:8080/lab?token=0061d1eb31396b1bc3cd77a7161b2084da1dedcdeca0600c</span><br><span class="line">[I 2024-12-10 14:30:24.586 ServerApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 2024-12-10 14:30:24.603 ServerApp]</span><br><span class="line"></span><br><span class="line">    To access the server, open this file in a browser:</span><br><span class="line">        file:///home/bohanfeng/.local/share/jupyter/runtime/jpserver-11659-open.html</span><br><span class="line">    Or copy and paste one of these URLs:</span><br><span class="line">        http://localhost:8080/lab?token=0061d1eb31396b1bc3cd77a7161b2084da1dedcdeca0600c</span><br><span class="line">        http://127.0.0.1:8080/lab?token=0061d1eb31396b1bc3cd77a7161b2084da1dedcdeca0600c</span><br></pre></td></tr></table></figure>

<p>本地运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -L 8080:localhost:8080 bohanfeng@192.168.2.102</span><br></pre></td></tr></table></figure>

<p>本地浏览器访问：<br><a target="_blank" rel="noopener" href="http://127.0.0.1:8080/lab?token=0061d1eb31396b1bc3cd77a7161b2084da1dedcdeca0600c">http://127.0.0.1:8080/lab?token=0061d1eb31396b1bc3cd77a7161b2084da1dedcdeca0600c</a></p>
<div class="post-content"><a href="/2024/12/10/[OBS]linux-Use SSH to Connect Jupyter-lab/Pasted_image_20241210145953.png" title="" title=" class="gallery-item"><img src="/2024/12/10/[OBS]linux-Use SSH to Connect Jupyter-lab/Pasted_image_20241210145953.png" alt="" title=""></a></div></div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2024/12/03/%5BOBS%5DFL-FLamby/"><img class="fill" src="/gallery/python.png" alt="FLamby" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-12-02T18:14:21.000Z" title="12/3/2024, 2:14:21 AM">2024-12-03</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:15.737Z" title="12/31/2024, 3:07:15 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">4 minutes read (About 609 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/12/03/%5BOBS%5DFL-FLamby/">FLamby</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>Repository: <a target="_blank" rel="noopener" href="https://github.com/owkin/FLamby">https://github.com/owkin/FLamby</a></p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/owkin/FLamby.git</span><br><span class="line"><span class="built_in">cd</span> FLamby</span><br><span class="line">conda <span class="built_in">env</span> create -f environment.yml</span><br><span class="line">conda activate flamby</span><br><span class="line">pip install -e .[all_extra]</span><br><span class="line">pip install wget</span><br><span class="line">pip install lifelines</span><br><span class="line">pip install jupyterlab</span><br></pre></td></tr></table></figure>

<h2 id="Dataset"><a href="#Dataset" class="headerlink" title="Dataset"></a>Dataset</h2><p>Fed-TCGA-BCRA<br><a target="_blank" rel="noopener" href="https://owkin.github.io/FLamby/fed_tcga_brca.html">https://owkin.github.io/FLamby/fed_tcga_brca.html</a></p>
<h2 id="Baseline-Learning"><a href="#Baseline-Learning" class="headerlink" title="Baseline Learning"></a>Baseline Learning</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> flamby.utils <span class="keyword">import</span> evaluate_model_on_tests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2 lines of code to change to switch to another dataset</span></span><br><span class="line"><span class="keyword">from</span> flamby.datasets.fed_tcga_brca <span class="keyword">import</span> (</span><br><span class="line">    BATCH_SIZE,</span><br><span class="line">    LR,</span><br><span class="line">    NUM_EPOCHS_POOLED,</span><br><span class="line">    Baseline,</span><br><span class="line">    BaselineLoss,</span><br><span class="line">    metric,</span><br><span class="line">    NUM_CLIENTS,</span><br><span class="line">    Optimizer,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> flamby.datasets.fed_tcga_brca <span class="keyword">import</span> FedTcgaBrca <span class="keyword">as</span> FedDataset</span><br></pre></td></tr></table></figure>
<p>Import several macros, datasets and metrics.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Instantiation of local train set (and data loader)), baseline loss function, baseline model, default optimizer</span></span><br><span class="line">train_dataset = FedDataset(center=<span class="number">0</span>, train=<span class="literal">True</span>, pooled=<span class="literal">False</span>)</span><br><span class="line">train_dataloader = torch.utils.data.DataLoader(train_dataset, batch_size=BATCH_SIZE, shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>)</span><br><span class="line">lossfunc = BaselineLoss()</span><br><span class="line">model = Baseline()</span><br><span class="line">optimizer = Optimizer(model.parameters(), lr=LR)</span><br></pre></td></tr></table></figure>
<p>In this script, the <code>pooled</code> parameter is set to <code>False</code> when creating the <code>FedDataset</code> instances. This indicates that the dataset is not pooled, meaning that the data is kept separate for each client or center. Each client or center has its own local dataset, which is a common setup in federated learning to simulate real-world scenarios where data is distributed across different locations or devices.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Traditional pytorch training loop</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, NUM_EPOCHS_POOLED):</span><br><span class="line">    <span class="keyword">for</span> idx, (X, y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_dataloader):</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        outputs = model(X)</span><br><span class="line">        loss = lossfunc(outputs, y)</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br></pre></td></tr></table></figure>
<p>正常的训练流程</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Evaluation</span></span><br><span class="line"><span class="comment"># Instantiation of a list of the local test sets</span></span><br><span class="line">test_dataloaders = [</span><br><span class="line">            torch.utils.data.DataLoader(</span><br><span class="line">                FedDataset(center=i, train=<span class="literal">False</span>, pooled=<span class="literal">False</span>),</span><br><span class="line">                batch_size=BATCH_SIZE,</span><br><span class="line">                shuffle=<span class="literal">False</span>,</span><br><span class="line">                num_workers=<span class="number">0</span>,</span><br><span class="line">            )</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(NUM_CLIENTS)</span><br><span class="line">        ]</span><br><span class="line"><span class="comment"># Function performing the evaluation</span></span><br><span class="line">dict_cindex = evaluate_model_on_tests(model, test_dataloaders, metric)</span><br><span class="line"><span class="built_in">print</span>(dict_cindex)</span><br></pre></td></tr></table></figure>
<p>使用的evaluation metric是<code>lifelines.utils.concordance_index</code>，返回的是c_index</p>
<div class="post-content"><a href="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241205160805.png" title="" title=" class="gallery-item"><img src="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241205160805.png" alt="" title=""></a></div>

<h2 id="Federated-Learning"><a href="#Federated-Learning" class="headerlink" title="Federated Learning"></a>Federated Learning</h2><div class="post-content"><a href="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241205175215.png" title="" title=" class="gallery-item"><img src="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241205175215.png" alt="" title=""></a></div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> flamby.utils <span class="keyword">import</span> evaluate_model_on_tests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2 lines of code to change to switch to another dataset</span></span><br><span class="line"><span class="keyword">from</span> flamby.datasets.fed_tcga_brca <span class="keyword">import</span> (</span><br><span class="line">    BATCH_SIZE,</span><br><span class="line">    LR,</span><br><span class="line">    NUM_EPOCHS_POOLED,</span><br><span class="line">    Baseline,</span><br><span class="line">    BaselineLoss,</span><br><span class="line">    metric,</span><br><span class="line">    NUM_CLIENTS,</span><br><span class="line">    get_nb_max_rounds</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> flamby.datasets.fed_tcga_brca <span class="keyword">import</span> FedTcgaBrca <span class="keyword">as</span> FedDataset</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1st line of code to change to switch to another strategy</span></span><br><span class="line"><span class="keyword">from</span> flamby.strategies.fed_avg <span class="keyword">import</span> FedAvg <span class="keyword">as</span> strat</span><br></pre></td></tr></table></figure>
use `FedAvg` as strategy

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># We loop on all the clients of the distributed dataset and instantiate associated data loaders</span></span><br><span class="line">train_dataloaders = [</span><br><span class="line">            torch.utils.data.DataLoader(</span><br><span class="line">                FedDataset(center = i, train = <span class="literal">True</span>, pooled = <span class="literal">False</span>),</span><br><span class="line">                batch_size = BATCH_SIZE,</span><br><span class="line">                shuffle = <span class="literal">True</span>,</span><br><span class="line">                num_workers = <span class="number">0</span></span><br><span class="line">            )</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(NUM_CLIENTS)</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">lossfunc = BaselineLoss()</span><br><span class="line">m = Baseline()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Federated Learning loop</span></span><br><span class="line"><span class="comment"># 2nd line of code to change to switch to another strategy (feed the FL strategy the right HPs)</span></span><br><span class="line">args = &#123;</span><br><span class="line">            <span class="string">&quot;training_dataloaders&quot;</span>: train_dataloaders,</span><br><span class="line">            <span class="string">&quot;model&quot;</span>: m,</span><br><span class="line">            <span class="string">&quot;loss&quot;</span>: lossfunc,</span><br><span class="line">            <span class="string">&quot;optimizer_class&quot;</span>: torch.optim.SGD,</span><br><span class="line">            <span class="string">&quot;learning_rate&quot;</span>: LR / <span class="number">10.0</span>,</span><br><span class="line">            <span class="string">&quot;num_updates&quot;</span>: <span class="number">100</span>,</span><br><span class="line"><span class="comment"># This helper function returns the number of rounds necessary to perform approximately as many</span></span><br><span class="line"><span class="comment"># epochs on each local dataset as with the pooled training</span></span><br><span class="line">            <span class="string">&quot;nrounds&quot;</span>: get_nb_max_rounds(<span class="number">100</span>),</span><br><span class="line">        &#125;</span><br><span class="line">s = strat(**args)</span><br><span class="line">m = s.run()[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Evaluation</span></span><br><span class="line"><span class="comment"># We only instantiate one test set in this particular case: the pooled one</span></span><br><span class="line">test_dataloaders = [</span><br><span class="line">            torch.utils.data.DataLoader(</span><br><span class="line">                FedDataset(train = <span class="literal">False</span>, pooled = <span class="literal">True</span>),</span><br><span class="line">                batch_size = BATCH_SIZE,</span><br><span class="line">                shuffle = <span class="literal">False</span>,</span><br><span class="line">                num_workers = <span class="number">0</span>,</span><br><span class="line">            )</span><br><span class="line">        ]</span><br><span class="line">dict_cindex = evaluate_model_on_tests(m, test_dataloaders, metric)</span><br><span class="line"><span class="built_in">print</span>(dict_cindex)</span><br></pre></td></tr></table></figure>

<h2 id="FedAvg-vs-FedAvgFineTuning"><a href="#FedAvg-vs-FedAvgFineTuning" class="headerlink" title="FedAvg vs FedAvgFineTuning"></a>FedAvg vs FedAvgFineTuning</h2><h3 id="FedAvg"><a href="#FedAvg" class="headerlink" title="FedAvg"></a>FedAvg</h3><div class="post-content"><a href="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241204174018.png" title="" title=" class="gallery-item"><img src="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241204174018.png" alt="" title=""></a></div>

<h3 id="FedAvgFineTuning"><a href="#FedAvgFineTuning" class="headerlink" title="FedAvgFineTuning"></a>FedAvgFineTuning</h3><div class="post-content"><a href="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241206140537.png" title="" title=" class="gallery-item"><img src="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241206140537.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241204174000.png" title="" title=" class="gallery-item"><img src="/2024/12/03/[OBS]FL-FLamby/Pasted_image_20241204174000.png" alt="" title=""></a></div>

</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-11-20T16:10:18.000Z" title="11/21/2024, 12:10:18 AM">2024-11-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:15.770Z" title="12/31/2024, 3:07:15 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">a few seconds read (About 78 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/11/21/%5BOBS%5DReconstruct%20Anything/">Reconstruct Anything</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>Convert Raw RGB-D to tree-structure scene(maybe in unity), for more </p>
<ol>
<li>Raw point cloud (voxel) to semantic segmented cloud</li>
<li>classify the segmented object into different structure and establish parent-child relationship</li>
<li>identify the state of object<ol>
<li>pose like, numbers (\\)</li>
<li>state like, open&#x2F;close (LLM)</li>
</ol>
</li>
</ol>
<p>发现和lff近期发表的一篇文章思想非常一致 <a target="_blank" rel="noopener" href="https://arxiv.org/html/2410.07408v1">https://arxiv.org/html/2410.07408v1</a></p>
<p>和场景理解的对比</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2024/11/17/%5BOBS%5DPoseEstimation-Cosypose%20(multi-view)%20Adaption/"><img class="fill" src="/gallery/python.png" alt="Cosypose modification" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-11-16T16:35:56.000Z" title="11/17/2024, 12:35:56 AM">2024-11-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:15.737Z" title="12/31/2024, 3:07:15 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">18 minutes read (About 2722 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/11/17/%5BOBS%5DPoseEstimation-Cosypose%20(multi-view)%20Adaption/">Cosypose modification</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h2><p>仓库: <a target="_blank" rel="noopener" href="https://github.com/Simple-Robotics/cosypose">https://github.com/Simple-Robotics/cosypose</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recurse-submodules https://github.com/Simple-Robotics/cosypose.git</span><br><span class="line"><span class="built_in">cd</span> cosypose</span><br><span class="line">conda <span class="built_in">env</span> create -n cosypose --file environment.yaml</span><br></pre></td></tr></table></figure>

<p>注意执行这一步的时候pip 会提示setuptools 和matplotlib-inline不符合3.7.6的python，到环境中手动安装适配的版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda activate cosypose</span><br><span class="line">pip install setuptools==63.4.1</span><br><span class="line">pip install matplotlib-inline==0.1.6</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git lfs pull</span><br><span class="line">python setup.py install</span><br><span class="line">python setup.py develop</span><br></pre></td></tr></table></figure>

<p>根据README下载数据<br>注意第一块指令无法下载成功，由 <a target="_blank" rel="noopener" href="https://bop.felk.cvut.cz/datasets/">https://bop.felk.cvut.cz/datasets/</a> 得知下载链接迁移到了huggingface, <a target="_blank" rel="noopener" href="https://huggingface.co/datasets/bop-benchmark/datasets/tree/main/ycbv">https://huggingface.co/datasets/bop-benchmark/datasets/tree/main/ycbv</a> 可以从这里手动下载测试集并放置到<code>local_data/bop_datasets/ycbv/test</code></p>
<p>设置测试使用的models</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> ./local_data/bop_datasets/ycbv/model_bop_compat_eval ./local_data/bop_datasets/ycbv/models</span><br></pre></td></tr></table></figure>

<h2 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h2><h3 id="np-where-mask-0-item"><a href="#np-where-mask-0-item" class="headerlink" title="np.where(mask)[0].item()"></a><code>np.where(mask)[0].item()</code></h3><p>运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_VISIBLE_DEVICES=0 </span><br><span class="line">python -m cosypose.scripts.run_cosypose_eval --config ycbv</span><br></pre></td></tr></table></figure>
<p>时出现报错</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;/home/cyl/.conda/envs/cosypose/lib/python3.7/runpy.py&quot;</span>, line 193, <span class="keyword">in</span> _run_module_as_main</span><br><span class="line">    <span class="string">&quot;__main__&quot;</span>, mod_spec)</span><br><span class="line">  File <span class="string">&quot;/home/cyl/.conda/envs/cosypose/lib/python3.7/runpy.py&quot;</span>, line 85, <span class="keyword">in</span> _run_code</span><br><span class="line">    <span class="built_in">exec</span>(code, run_globals)</span><br><span class="line">  File <span class="string">&quot;/home/cyl/cosypose/cosypose/scripts/run_cosypose_eval.py&quot;</span>, line 491, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    main()</span><br><span class="line">  File <span class="string">&quot;/home/cyl/cosypose/cosypose/scripts/run_cosypose_eval.py&quot;</span>, line 332, <span class="keyword">in</span> main</span><br><span class="line">    scene_ds = make_scene_dataset(ds_name)</span><br><span class="line">  File <span class="string">&quot;/home/cyl/cosypose/cosypose/datasets/datasets_cfg.py&quot;</span>, line 68, <span class="keyword">in</span> make_scene_dataset</span><br><span class="line">    ids.append(np.where(mask)[0].item())</span><br><span class="line">ValueError: can only convert an array of size 1 to a Python scalar</span><br></pre></td></tr></table></figure>
<p>添加debug输出，得到</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Debug - scene_id: 48, view_id: 1</span><br><span class="line">Debug - mask matches: 1</span><br><span class="line">Debug - <span class="built_in">where</span> result shape: (1,), values: [225]</span><br><span class="line">Debug - scene_id: 48, view_id: 36</span><br><span class="line">Debug - mask matches: 1</span><br><span class="line">Debug - <span class="built_in">where</span> result shape: (1,), values: [226]</span><br><span class="line">Debug - scene_id: 48, view_id: 47</span><br><span class="line">Debug - mask matches: 1</span><br><span class="line">Debug - <span class="built_in">where</span> result shape: (1,), values: [227]</span><br><span class="line">Debug - scene_id: 48, view_id: 83</span><br><span class="line">Debug - mask matches: 1</span><br><span class="line">Debug - <span class="built_in">where</span> result shape: (1,), values: [228]</span><br><span class="line">Debug - scene_id: 48, view_id: 112</span><br><span class="line">Debug - mask matches: 1</span><br><span class="line">Debug - <span class="built_in">where</span> result shape: (1,), values: [229]</span><br><span class="line">Debug - scene_id: 48, view_id: 135</span><br><span class="line">Debug - mask matches: 0</span><br><span class="line">Debug - <span class="built_in">where</span> result shape: (0,), values: []</span><br><span class="line">0:00:00.912023 - Expected exactly one match, got 0 matches <span class="keyword">for</span> scene_id=48, view_id=135</span><br></pre></td></tr></table></figure>
<p>发现是下载的测试数据集并不包含数据集keyframe.txt中所有的帧，导致一些关键帧识别不到</p>
<h3 id="运行到一半被终止的情况"><a href="#运行到一半被终止的情况" class="headerlink" title="运行到一半被终止的情况"></a>运行到一半被终止的情况</h3><p>如果想重新开始新的训练： 清空<code>local_data/joblib_cache</code></p>
<h2 id="Framework"><a href="#Framework" class="headerlink" title="Framework"></a>Framework</h2><h3 id="Prediction-Script-cosypose-scripts-run-cosypose-eval"><a href="#Prediction-Script-cosypose-scripts-run-cosypose-eval" class="headerlink" title="Prediction Script cosypose.scripts.run_cosypose_eval"></a>Prediction Script <code>cosypose.scripts.run_cosypose_eval</code></h3><h4 id="AI-explanation"><a href="#AI-explanation" class="headerlink" title="AI explanation"></a>AI explanation</h4><p>The script predicts object poses based on multi-view input by following these steps:</p>
<ol>
<li><p><strong>Dataset Loading</strong>: It first loads the dataset using the <code>make_scene_dataset</code> function, which prepares the scene data for evaluation. The dataset is wrapped in a <code>MultiViewWrapper</code> to handle multiple views.</p>
</li>
<li><p><strong>Model Loading</strong>: The script loads pre-trained models for pose prediction using the <code>load_models</code> function. It loads both coarse and refiner models based on the configuration specified in the command-line arguments.</p>
</li>
<li><p><strong>Prediction Setup</strong>: The script sets up the prediction parameters, including the number of iterations for coarse and refiner models, and whether to skip multi-view processing based on the number of views specified.</p>
</li>
<li><p><strong>Multi-view Prediction</strong>: The <code>MultiviewScenePredictor</code> is initialized with the mesh database, which is used to predict poses across multiple views. The <code>MultiviewPredictionRunner</code> is then used to run predictions on the dataset, leveraging the multi-view setup to improve pose estimation accuracy.</p>
</li>
<li><p><strong>Pose Estimation</strong>: The script uses the loaded models to predict object poses. It processes detections from either <code>pix2pose</code> or <code>posecnn</code> depending on the dataset, and refines these predictions using the refiner model.</p>
</li>
<li><p><strong>Evaluation</strong>: After predictions, the script evaluates the predicted poses using the <code>PoseEvaluation</code> class. It calculates various metrics like ADD-S and AUC to assess the accuracy of the pose predictions.</p>
</li>
<li><p><strong>Results Logging</strong>: Finally, the script logs the results, including evaluation metrics, and saves them to a specified directory.</p>
</li>
</ol>
<p>The multi-view approach allows the script to leverage information from different viewpoints, which can help resolve ambiguities and improve the robustness of the pose estimation.</p>
<h3 id="Prediction-Script-run-custom-scenario"><a href="#Prediction-Script-run-custom-scenario" class="headerlink" title="Prediction Script run_custom_scenario"></a>Prediction Script <code>run_custom_scenario</code></h3><h3 id="Terms"><a href="#Terms" class="headerlink" title="Terms"></a>Terms</h3><h4 id="TCO"><a href="#TCO" class="headerlink" title="TCO"></a>TCO</h4><p><strong>Transformation from Camera to Object.</strong><br>It represents the transformation matrix or parameters that describe the pose of an object relative to the camera’s coordinate system</p>
<h4 id="TWO"><a href="#TWO" class="headerlink" title="TWO"></a>TWO</h4><p><strong>Transformation from World to Object.</strong><br>It represents the transformation matrix or parameters that describe the pose of an object relative to the world’s coordinate system</p>
<h3 id="Model-dataset"><a href="#Model-dataset" class="headerlink" title="Model dataset"></a>Model dataset</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MeshDataBase</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, obj_list</span>):</span><br><span class="line">        <span class="variable language_">self</span>.infos = &#123;obj[<span class="string">&#x27;label&#x27;</span>]: obj <span class="keyword">for</span> obj <span class="keyword">in</span> obj_list&#125;</span><br><span class="line">        <span class="variable language_">self</span>.meshes = &#123;l: trimesh.load(obj[<span class="string">&#x27;mesh_path&#x27;</span>]) <span class="keyword">for</span> l, obj <span class="keyword">in</span> <span class="variable language_">self</span>.infos.items()&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">from_object_ds</span>(<span class="params">object_ds</span>):</span><br><span class="line">        obj_list = [object_ds[n] <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(object_ds))]</span><br><span class="line">        <span class="keyword">return</span> MeshDataBase(obj_list)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>一般使用的初始化方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">object_ds = BOPObjectDataset(scenario_dir / <span class="string">&#x27;models&#x27;</span>)</span><br><span class="line">mesh_db = MeshDataBase.from_object_ds(object_ds)</span><br></pre></td></tr></table></figure>
<p>也可以通过load models一起加载：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">predictor, mesh_db = load_models(coarse_run_id, refiner_run_id, n_workers=n_plotters, object_set=object_set)</span><br></pre></td></tr></table></figure>




<h3 id="Important-Classes"><a href="#Important-Classes" class="headerlink" title="Important Classes"></a>Important Classes</h3><h4 id="Multiview-wrapper"><a href="#Multiview-wrapper" class="headerlink" title="Multiview_wrapper"></a><code>Multiview_wrapper</code></h4><p>作用：<br>读取 scene_dataset 并且通过视角数量<code>n_views</code>来分割这些数据为不同场景，然后方便遍历其中的场景元素（这里都是ground truth）<br>遍历时返回的值为</p>
<ul>
<li><code>n_views</code>张不同视角下的RGB图像</li>
<li><code>n_views</code>张对应的mask</li>
<li><code>n_views</code>份对应的observation<ul>
<li>识别到的物体位姿和类型</li>
<li>相机位姿和内参</li>
<li>frame_info，没太多用<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scene_ds_pred = MultiViewWrapper(scene_ds, n_views=n_views)</span><br><span class="line">scene_ds_pred[<span class="number">0</span>][<span class="number">2</span>] <span class="comment"># scene48 multiview_group1 &#x27;s observations in five views</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"> &#123;<span class="string">&#x27;objects&#x27;</span>: </span><br><span class="line">  [</span><br><span class="line">   &#123;<span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;obj_000001&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;obj_000001&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;TWO&#x27;</span>: array([[-<span class="number">0.02062261</span>, -<span class="number">0.99870347</span>, -<span class="number">0.04654345</span>, -<span class="number">0.05380909</span>],</span><br><span class="line">           [ <span class="number">0.99854439</span>, -<span class="number">0.022895</span>  ,  <span class="number">0.04883047</span>,  <span class="number">0.00189095</span>],</span><br><span class="line">           [-<span class="number">0.04983272</span>, -<span class="number">0.04546878</span>,  <span class="number">0.9977229</span> ,  <span class="number">0.07060698</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;T0O&#x27;</span>: array([[-<span class="number">0.02062261</span>, -<span class="number">0.99870347</span>, -<span class="number">0.04654345</span>, -<span class="number">0.05380909</span>],</span><br><span class="line">           [ <span class="number">0.99854439</span>, -<span class="number">0.022895</span>  ,  <span class="number">0.04883047</span>,  <span class="number">0.00189095</span>],</span><br><span class="line">           [-<span class="number">0.04983272</span>, -<span class="number">0.04546878</span>,  <span class="number">0.9977229</span> ,  <span class="number">0.07060698</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;visib_fract&#x27;</span>: <span class="number">0.7769277845777234</span>,</span><br><span class="line">    <span class="string">&#x27;id_in_segm&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;bbox&#x27;</span>: [<span class="number">347</span>, <span class="number">210</span>, <span class="number">467</span>, <span class="number">374</span>]&#125;,</span><br><span class="line">   &#123;<span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;obj_000006&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;obj_000006&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;TWO&#x27;</span>: array([[-<span class="number">0.40056693</span>,  <span class="number">0.91475543</span>, -<span class="number">0.05262471</span>,  <span class="number">0.03103553</span>],</span><br><span class="line">           [-<span class="number">0.91622629</span>, -<span class="number">0.39934108</span>,  <span class="number">0.03248866</span>, -<span class="number">0.02365388</span>],</span><br><span class="line">           [ <span class="number">0.00870386</span>,  <span class="number">0.06123014</span>,  <span class="number">0.9980863</span> ,  <span class="number">0.01391488</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;T0O&#x27;</span>: array([[-<span class="number">0.40056693</span>,  <span class="number">0.91475543</span>, -<span class="number">0.05262471</span>,  <span class="number">0.03103553</span>],</span><br><span class="line">           [-<span class="number">0.91622629</span>, -<span class="number">0.39934108</span>,  <span class="number">0.03248866</span>, -<span class="number">0.02365388</span>],</span><br><span class="line">           [ <span class="number">0.00870386</span>,  <span class="number">0.06123014</span>,  <span class="number">0.9980863</span> ,  <span class="number">0.01391488</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;visib_fract&#x27;</span>: <span class="number">0.9990349353406678</span>,</span><br><span class="line">    <span class="string">&#x27;id_in_segm&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;bbox&#x27;</span>: [<span class="number">328</span>, <span class="number">343</span>, <span class="number">422</span>, <span class="number">405</span>]&#125;,</span><br><span class="line">   &#123;<span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;obj_000014&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;obj_000014&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;TWO&#x27;</span>: array([[ <span class="number">0.24178672</span>, -<span class="number">0.96941339</span>, -<span class="number">0.04215706</span>, -<span class="number">0.05206396</span>],</span><br><span class="line">           [ <span class="number">0.96977496</span>,  <span class="number">0.2399519</span> ,  <span class="number">0.0442575</span> ,  <span class="number">0.0179453</span> ],</span><br><span class="line">           [-<span class="number">0.03278805</span>, -<span class="number">0.05158388</span>,  <span class="number">0.99813144</span>,  <span class="number">0.16636215</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;T0O&#x27;</span>: array([[ <span class="number">0.24178672</span>, -<span class="number">0.96941339</span>, -<span class="number">0.04215706</span>, -<span class="number">0.05206396</span>],</span><br><span class="line">           [ <span class="number">0.96977496</span>,  <span class="number">0.2399519</span> ,  <span class="number">0.0442575</span> ,  <span class="number">0.0179453</span> ],</span><br><span class="line">           [-<span class="number">0.03278805</span>, -<span class="number">0.05158388</span>,  <span class="number">0.99813144</span>,  <span class="number">0.16636215</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;visib_fract&#x27;</span>: <span class="number">0.9938250428816466</span>,</span><br><span class="line">    <span class="string">&#x27;id_in_segm&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&#x27;bbox&#x27;</span>: [<span class="number">372</span>, <span class="number">143</span>, <span class="number">490</span>, <span class="number">241</span>]&#125;,</span><br><span class="line">   &#123;<span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;obj_000019&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;obj_000019&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;TWO&#x27;</span>: array([[-<span class="number">0.69888905</span>,  <span class="number">0.1926738</span> , -<span class="number">0.68878937</span>,  <span class="number">0.01412755</span>],</span><br><span class="line">           [ <span class="number">0.711967</span>  ,  <span class="number">0.27928957</span>, -<span class="number">0.64428215</span>,  <span class="number">0.05127768</span>],</span><br><span class="line">           [ <span class="number">0.06823575</span>, -<span class="number">0.94067797</span>, -<span class="number">0.33237011</span>,  <span class="number">0.06472594</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;T0O&#x27;</span>: array([[-<span class="number">0.69888905</span>,  <span class="number">0.1926738</span> , -<span class="number">0.68878937</span>,  <span class="number">0.01412755</span>],</span><br><span class="line">           [ <span class="number">0.711967</span>  ,  <span class="number">0.27928957</span>, -<span class="number">0.64428215</span>,  <span class="number">0.05127768</span>],</span><br><span class="line">           [ <span class="number">0.06823575</span>, -<span class="number">0.94067797</span>, -<span class="number">0.33237011</span>,  <span class="number">0.06472594</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;visib_fract&#x27;</span>: <span class="number">0.9890470974808324</span>,</span><br><span class="line">    <span class="string">&#x27;id_in_segm&#x27;</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="string">&#x27;bbox&#x27;</span>: [<span class="number">419</span>, <span class="number">222</span>, <span class="number">527</span>, <span class="number">410</span>]&#125;,</span><br><span class="line">   &#123;<span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;obj_000020&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;obj_000020&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;TWO&#x27;</span>: array([[-<span class="number">0.74512542</span>, -<span class="number">0.66691536</span>,  <span class="number">0.00352083</span>,  <span class="number">0.07854437</span>],</span><br><span class="line">           [-<span class="number">0.6669148</span> ,  <span class="number">0.74507458</span>, -<span class="number">0.00940455</span>, -<span class="number">0.15283599</span>],</span><br><span class="line">           [ <span class="number">0.00364864</span>, -<span class="number">0.00935569</span>, -<span class="number">0.99995023</span>,  <span class="number">0.01854317</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;T0O&#x27;</span>: array([[-<span class="number">0.74512542</span>, -<span class="number">0.66691536</span>,  <span class="number">0.00352083</span>,  <span class="number">0.07854437</span>],</span><br><span class="line">           [-<span class="number">0.6669148</span> ,  <span class="number">0.74507458</span>, -<span class="number">0.00940455</span>, -<span class="number">0.15283599</span>],</span><br><span class="line">           [ <span class="number">0.00364864</span>, -<span class="number">0.00935569</span>, -<span class="number">0.99995023</span>,  <span class="number">0.01854317</span>],</span><br><span class="line">           [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">    <span class="string">&#x27;visib_fract&#x27;</span>: <span class="number">0.9953060637992145</span>,</span><br><span class="line">    <span class="string">&#x27;id_in_segm&#x27;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&#x27;bbox&#x27;</span>: [<span class="number">92</span>, <span class="number">328</span>, <span class="number">288</span>, <span class="number">442</span>]&#125;],</span><br><span class="line">  <span class="string">&#x27;camera&#x27;</span>: </span><br><span class="line">  &#123;<span class="string">&#x27;T0C&#x27;</span>: array([[-<span class="number">0.0792652</span> ,  <span class="number">0.241296</span>  , -<span class="number">0.967209</span>  ,  <span class="number">0.946419</span>  ],</span><br><span class="line">          [ <span class="number">0.996102</span>  ,  <span class="number">0.0568396</span> , -<span class="number">0.0674529</span> , -<span class="number">0.02116569</span>],</span><br><span class="line">          [ <span class="number">0.0386997</span> , -<span class="number">0.968786</span>  , -<span class="number">0.244861</span>  ,  <span class="number">0.36645836</span>],</span><br><span class="line">          [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">   <span class="string">&#x27;K&#x27;</span>: array([[<span class="number">1.066778e+03</span>, <span class="number">0.000000e+00</span>, <span class="number">3.129869e+02</span>],</span><br><span class="line">          [<span class="number">0.000000e+00</span>, <span class="number">1.067487e+03</span>, <span class="number">2.413109e+02</span>],</span><br><span class="line">          [<span class="number">0.000000e+00</span>, <span class="number">0.000000e+00</span>, <span class="number">1.000000e+00</span>]]),</span><br><span class="line">   <span class="string">&#x27;TWC&#x27;</span>: array([[-<span class="number">0.0792652</span> ,  <span class="number">0.241296</span>  , -<span class="number">0.967209</span>  ,  <span class="number">0.946419</span>  ],</span><br><span class="line">          [ <span class="number">0.996102</span>  ,  <span class="number">0.0568396</span> , -<span class="number">0.0674529</span> , -<span class="number">0.02116569</span>],</span><br><span class="line">          [ <span class="number">0.0386997</span> , -<span class="number">0.968786</span>  , -<span class="number">0.244861</span>  ,  <span class="number">0.36645836</span>],</span><br><span class="line">          [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ]]),</span><br><span class="line">   <span class="string">&#x27;resolution&#x27;</span>: torch.Size([<span class="number">480</span>, <span class="number">640</span>])&#125;,</span><br><span class="line">  <span class="string">&#x27;frame_info&#x27;</span>: </span><br><span class="line">  &#123;</span><br><span class="line">   <span class="string">&#x27;scene_id&#x27;</span>: <span class="number">48</span>,</span><br><span class="line">   <span class="string">&#x27;cam_id&#x27;</span>: <span class="string">&#x27;cam&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;view_id&#x27;</span>: <span class="number">1626</span>,</span><br><span class="line">   <span class="string">&#x27;cam_name&#x27;</span>: <span class="string">&#x27;cam&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;group_id&#x27;</span>: <span class="number">0</span></span><br><span class="line">   &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  ... <span class="comment"># other views</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<h4 id="MultiviewPredictorRunner"><a href="#MultiviewPredictorRunner" class="headerlink" title="MultiviewPredictorRunner"></a><code>MultiviewPredictorRunner</code></h4><p>作用：<br>接收<code>Multiview_wrapper</code>作为输入，并做出预测</p>
<p>首先是数据集接收：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dataloader = DataLoader(scene_ds, batch_size=batch_size,</span><br><span class="line">						num_workers=n_workers,</span><br><span class="line">						sampler=sampler,</span><br><span class="line">						collate_fn=<span class="variable language_">self</span>.collate_fn)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>use <code>collate_fn</code> to process the row data （最后的注释里面有真正用到的数据）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">collate_fn</span>(<span class="params">self, batch</span>):</span><br><span class="line">	batch_im_id = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">	cam_infos, K = [], []</span><br><span class="line">	det_infos, bboxes = [], []</span><br><span class="line">	<span class="keyword">for</span> n, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(batch): <span class="comment"># normally only one batch</span></span><br><span class="line">		<span class="keyword">assert</span> n == <span class="number">0</span></span><br><span class="line">		images, masks, obss = data</span><br><span class="line">		<span class="keyword">for</span> c, obs <span class="keyword">in</span> <span class="built_in">enumerate</span>(obss): <span class="comment"># iterate along different views</span></span><br><span class="line">			batch_im_id += <span class="number">1</span></span><br><span class="line">			frame_info = obs[<span class="string">&#x27;frame_info&#x27;</span>]</span><br><span class="line">			im_info = &#123;k: frame_info[k] <span class="keyword">for</span> k <span class="keyword">in</span> (<span class="string">&#x27;scene_id&#x27;</span>, <span class="string">&#x27;view_id&#x27;</span>, <span class="string">&#x27;group_id&#x27;</span>)&#125; <span class="comment"># info for the image</span></span><br><span class="line">			im_info.update(batch_im_id=batch_im_id)</span><br><span class="line">			cam_info = im_info.copy() <span class="comment"># info for camera</span></span><br><span class="line"></span><br><span class="line">			K.append(obs[<span class="string">&#x27;camera&#x27;</span>][<span class="string">&#x27;K&#x27;</span>]) <span class="comment"># info for 相机内参</span></span><br><span class="line">			cam_infos.append(cam_info)</span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span> o, obj <span class="keyword">in</span> <span class="built_in">enumerate</span>(obs[<span class="string">&#x27;objects&#x27;</span>]):</span><br><span class="line">				obj_info = <span class="built_in">dict</span>(</span><br><span class="line">					label=obj[<span class="string">&#x27;name&#x27;</span>],</span><br><span class="line">					score=<span class="number">1.0</span>,</span><br><span class="line">				)</span><br><span class="line">				obj_info.update(im_info) <span class="comment"># add key-value pair from im_info to obj_info</span></span><br><span class="line">				bboxes.append(obj[<span class="string">&#x27;bbox&#x27;</span>])</span><br><span class="line">				det_infos.append(obj_info)</span><br><span class="line"></span><br><span class="line">	gt_detections = tc.PandasTensorCollection(</span><br><span class="line">		infos=pd.DataFrame(det_infos),</span><br><span class="line">		bboxes=torch.as_tensor(np.stack(bboxes)),</span><br><span class="line">	) <span class="comment"># 包括每一个ground truthdetection的的基本info,和检测框 </span></span><br><span class="line">	cameras = tc.PandasTensorCollection(</span><br><span class="line">		infos=pd.DataFrame(cam_infos),</span><br><span class="line">		K=torch.as_tensor(np.stack(K)),</span><br><span class="line">	)<span class="comment"># 包括每一view 相机的基本info（和detection info相同）,和内参</span></span><br><span class="line">	data = <span class="built_in">dict</span>(</span><br><span class="line">		images=images,</span><br><span class="line">		cameras=cameras,</span><br><span class="line">		gt_detections=gt_detections,</span><br><span class="line">	)</span><br><span class="line">	<span class="keyword">return</span> data</span><br></pre></td></tr></table></figure>

<p>最重要的function: <code>get_predictions</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_predictions</span>(<span class="params">self, pose_predictor, mv_predictor,</span></span><br><span class="line"><span class="params">					detections=<span class="literal">None</span>,</span></span><br><span class="line"><span class="params">					n_coarse_iterations=<span class="number">1</span>, n_refiner_iterations=<span class="number">1</span>,</span></span><br><span class="line"><span class="params">					sv_score_th=<span class="number">0.0</span>, skip_mv=<span class="literal">True</span>,</span></span><br><span class="line"><span class="params">					use_detections_TCO=<span class="literal">False</span></span>):</span><br></pre></td></tr></table></figure>

<p>Responsible for generating predictions for object poses in a scene using both single-view and multi-view approaches.</p>
<ol>
<li><p><strong>Input Parameters:</strong></p>
<ul>
<li><code>pose_predictor</code>: single view predictor，比如ycbv数据集用的就是posecnn的检测模型</li>
<li><code>mv_predictor</code>: An object or function that predicts scene states using multi-view information.</li>
<li><code>detections</code>: A collection of detected objects with associated information, pre-generated and saved in a .pkl file</li>
<li><code>n_coarse_iterations</code>, <code>n_refiner_iterations</code>: Number of iterations for coarse and refinement pose estimation.</li>
<li><code>sv_score_th</code>: Score threshold for single-view detections.</li>
<li><code>skip_mv</code>: A flag to skip multi-view predictions.</li>
<li><code>use_detections_TCO</code>: A flag to use detections for initial pose estimation.</li>
</ul>
</li>
<li><p><strong>Filtering Detections:</strong><br> 需要注意的是这里使用的detection是直接来自预存好的检测数据（非ground truth）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">posecnn_detections = load_posecnn_results()</span><br></pre></td></tr></table></figure>

<ul>
<li>The function filters the input <code>detections</code> based on the <code>sv_score_th</code> threshold.</li>
<li>It assigns a unique detection ID to each detection and creates an index based on <code>scene_id</code> and <code>view_id</code>.</li>
</ul>
</li>
<li><p><strong>Iterating Over Data:</strong></p>
<ul>
<li>The function iterates over batches of data from the <code>dataloader</code>.</li>
<li>For each batch, it extracts images, camera information, and ground truth detections.</li>
</ul>
</li>
<li><p><strong>Matching Detections:</strong></p>
<ul>
<li>It matches the detections with the current batch of data using the index created earlier.</li>
<li>It filters and prepares the detections for processing.</li>
</ul>
</li>
<li><p><strong>Pose Prediction:</strong></p>
<ul>
<li>If there are detections, it uses the <code>pose_predictor</code> to get single-view predictions.</li>
<li>It registers the initial bounding boxes with the candidates.</li>
</ul>
</li>
<li><p><strong>Multi-View Prediction:</strong></p>
<ul>
<li>If <code>skip_mv</code> is <code>False</code>, it uses the <code>mv_predictor</code> to predict the scene state using multi-view information.</li>
</ul>
</li>
<li><p><strong>Collecting Predictions:</strong></p>
<ul>
<li>It collects the single-view and multi-view predictions into a dictionary.</li>
</ul>
</li>
<li><p><strong>Concatenating Results:</strong></p>
<ul>
<li>It concatenates the predictions across all batches and returns the final predictions.</li>
</ul>
</li>
</ol>
<h4 id="MultiviewScenePredictor"><a href="#MultiviewScenePredictor" class="headerlink" title="MultiviewScenePredictor"></a><code>MultiviewScenePredictor</code></h4><p>作用：<br>used by <code>Myltiview_PredictionRunner.get_predictions</code><br>In <code>run_cosypose_eval</code> we initialize <code>MultiviewScenePredictor</code>  in this way:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv_predictor = MultiviewScenePredictor(mesh_db)</span><br></pre></td></tr></table></figure>

<p>In the <code>MultiviewScenePredictor</code> we use the mesh_db to initialize <code>MultiviewRefinement</code> and solve:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">problem = MultiviewRefinement(candidates=candidates_n,</span><br><span class="line">                    cameras=cameras,</span><br><span class="line">	                pairs_TC1C2=pairs_TC1C2,</span><br><span class="line">	                mesh_db=<span class="variable language_">self</span>.mesh_db_ba)</span><br><span class="line">ba_outputs = problem.solve(</span><br><span class="line">	n_iterations=ba_n_iter,</span><br><span class="line">	optimize_cameras=<span class="keyword">not</span> use_known_camera_poses,</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>The <code>solve</code> function of <code>MultiviewRefinement</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">solve</span>(<span class="params">self, sample_n_init=<span class="number">1</span>, **lm_kwargs</span>):</span><br><span class="line">	timer_init = Timer()</span><br><span class="line">	timer_opt = Timer()</span><br><span class="line">	timer_misc = Timer()</span><br><span class="line"></span><br><span class="line">	timer_init.start()</span><br><span class="line">	TWO_9d_init, TCW_9d_init = <span class="variable language_">self</span>.robust_initialization_TWO_TCW(n_init=sample_n_init)</span><br><span class="line">	timer_init.pause()</span><br><span class="line"></span><br><span class="line">	timer_opt.start()</span><br><span class="line">	TWO_9d_opt, TCW_9d_opt, history = <span class="variable language_">self</span>.optimize_lm(</span><br><span class="line">		TWO_9d_init, TCW_9d_init, **lm_kwargs)</span><br><span class="line">	timer_opt.pause()</span><br><span class="line"></span><br><span class="line">	timer_misc.start()</span><br><span class="line">	objects, cameras = <span class="variable language_">self</span>.make_scene_infos(TWO_9d_opt, TCW_9d_opt)</span><br><span class="line">	objects_init, cameras_init = <span class="variable language_">self</span>.make_scene_infos(TWO_9d_init, TCW_9d_init)</span><br><span class="line">	history = <span class="variable language_">self</span>.convert_history(history)</span><br><span class="line">	timer_misc.pause()</span><br><span class="line"></span><br><span class="line">	outputs = <span class="built_in">dict</span>(</span><br><span class="line">		objects_init=objects_init,</span><br><span class="line">		cameras_init=cameras_init,</span><br><span class="line">		objects=objects,</span><br><span class="line">		cameras=cameras,</span><br><span class="line">		history=history,</span><br><span class="line">		time_init=timer_init.stop(),</span><br><span class="line">		time_opt=timer_opt.stop(),</span><br><span class="line">		time_misc=timer_misc.stop(),</span><br><span class="line">	)</span><br><span class="line">	<span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure>


<h2 id="Adaption"><a href="#Adaption" class="headerlink" title="Adaption"></a>Adaption</h2><p>准备基于<code>run_custom_scenario</code>进行修改<br><code>run_custom_scenario</code>的使用方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m cosypose.scripts.run_custom_scenario --scenario=example</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Setting OMP and MKL num threads to 1.</span><br><span class="line">pybullet build time: Jan 28 2022 20:13:03</span><br><span class="line">0:00:00.000859 - -----------------------------------------------</span><br><span class="line">---------------------------------</span><br><span class="line">0:00:00.000921 - scenario: example</span><br><span class="line">0:00:00.000942 - sv_score_th: 0.3</span><br><span class="line">0:00:00.000956 - n_symmetries_rot: 64</span><br><span class="line">0:00:00.000956 - n_symmetries_rot: 64</span><br><span class="line">0:00:00.000968 - ransac_n_iter: 2000</span><br><span class="line">0:00:00.000980 - ransac_dist_threshold: 0.02</span><br><span class="line">0:00:00.001002 - nms_th: 0.04</span><br><span class="line">0:00:00.001015 - no_visualization: False</span><br><span class="line">0:00:00.001026 - -----------------------------------------------</span><br><span class="line">---------------------------------</span><br><span class="line">0:00:00.569089 - Loaded 796 candidates <span class="keyword">in</span> 8 views.</span><br><span class="line">0:00:00.570278 - Loaded cameras intrinsics.</span><br><span class="line">0:00:00.690990 - Loaded 30 3D object models.</span><br><span class="line">0:00:00.691047 - Running stage 2 and 3 of CosyPose...</span><br><span class="line">0:00:01.145408 - Num candidates: 107</span><br><span class="line">0:00:01.145468 - Num views: 8</span><br><span class="line">0:00:01.145728 - Estimating camera poses using RANSAC.</span><br><span class="line">0:00:04.588304 - Matched candidates: 49</span><br><span class="line">0:00:04.588375 - RANSAC time_models: 0:00:02.390068</span><br><span class="line">0:00:04.588398 - RANSAC time_score: 0:00:00.990740</span><br><span class="line">0:00:04.588415 - RANSAC time_misc: 0:00:00.061626</span><br><span class="line">0:00:04.902268 - BA time_init: 0:00:00.005349</span><br><span class="line">0:00:04.902333 - BA time_opt: 0:00:00.091822</span><br><span class="line">0:00:04.902351 - BA time_misc: 0:00:00.004793</span><br><span class="line">0:00:04.491746 - Subscene 0 has 8 objects and 7 cameras.</span><br><span class="line">0:00:04.512850 - Wrote predicted scene (objects+cameras): /home/cyl/cosypose/local_data/custom_scenarios/example/</span><br><span class="line">results/subscene=0/predicted_scene.json</span><br><span class="line">0:00:04.512906 - Wrote predicted objects with pose expressed <span class="keyword">in</span> camera frame: /home/cyl/cosypose/local_data/custo</span><br><span class="line">m_scenarios/example/results/subscene=0/scene_reprojected.csv</span><br></pre></td></tr></table></figure>
<p>该脚本只接收了candidates, mesh_db和camera_k信息，直接运行mv_predictor</p>
<p>写一个通过list输入构建candidates的function:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">read_list_candidates_cameras</span>(<span class="params">self, data_list, cameras_K_list</span>):</span><br><span class="line">	<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">	Creates a PandasTensorCollection from a list of candidates information.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Args:</span></span><br><span class="line"><span class="string">		data_list (list): Each element is a dictionary with keys:</span></span><br><span class="line"><span class="string">			- &quot;candidates&quot; (list of dict): Each candidate dictionary includes:</span></span><br><span class="line"><span class="string">				- &quot;label&quot; (str): The label of the object.</span></span><br><span class="line"><span class="string">				- &quot;score&quot; (float): The confidence score of the object.</span></span><br><span class="line"><span class="string">				- &quot;pose&quot; (torch.Tensor): A [4, 4] torch.Tensor representing the pose matrix.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Returns:</span></span><br><span class="line"><span class="string">		PandasTensorCollection: Contains poses and infos.</span></span><br><span class="line"><span class="string">	&quot;&quot;&quot;</span></span><br><span class="line">	all_poses = []</span><br><span class="line">	all_infos = []</span><br><span class="line">	all_K = []</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Initialize view_id to be assigned automatically</span></span><br><span class="line">	view_id = <span class="number">0</span></span><br><span class="line">	scene_id = <span class="number">0</span>  <span class="comment"># Fixed value for scene_id</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> view, K <span class="keyword">in</span> <span class="built_in">zip</span>(data_list, cameras_K_list):</span><br><span class="line">		all_K.append(K)</span><br><span class="line">		<span class="keyword">for</span> candidate <span class="keyword">in</span> view[<span class="string">&quot;candidates&quot;</span>]:</span><br><span class="line">			label = candidate[<span class="string">&quot;label&quot;</span>]</span><br><span class="line">			score = candidate[<span class="string">&quot;score&quot;</span>]</span><br><span class="line">			pose = candidate[<span class="string">&quot;pose&quot;</span>]</span><br><span class="line"></span><br><span class="line">			<span class="comment"># Append the pose tensor</span></span><br><span class="line">			all_poses.append(pose)</span><br><span class="line"></span><br><span class="line">			<span class="comment"># Append the metadata</span></span><br><span class="line">			all_infos.append(&#123;</span><br><span class="line">				<span class="string">&quot;view_id&quot;</span>: view_id,</span><br><span class="line">				<span class="string">&quot;scene_id&quot;</span>: scene_id,</span><br><span class="line">				<span class="string">&quot;score&quot;</span>: score,</span><br><span class="line">				<span class="string">&quot;label&quot;</span>: label</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br><span class="line">		<span class="comment"># Increment view_id for the next set of candidates</span></span><br><span class="line">		view_id += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">	K_tensor = torch.stack(all_K).to(dtype=torch.float32, device=<span class="string">&quot;cuda:0&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Stack poses into a single tensor</span></span><br><span class="line">	poses_tensor = torch.stack(all_poses).to(dtype=torch.float32, device=<span class="string">&quot;cuda:0&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment"># Create a Pandas DataFrame for infos</span></span><br><span class="line">	infos_df = pd.DataFrame(all_infos)</span><br><span class="line">	<span class="comment"># Return the PandasTensorCollection-like structure</span></span><br><span class="line">	ptc_candidate = tc.PandasTensorCollection(poses=poses_tensor, infos=infos_df)</span><br><span class="line">	cam_info = infos_df.loc[:,[<span class="string">&quot;view_id&quot;</span>]]</span><br><span class="line">	cam_info = cam_info.drop_duplicates()</span><br><span class="line">	ptc_cam = tc.PandasTensorCollection(K=K_tensor, infos=cam_info)</span><br><span class="line">	<span class="keyword">return</span> ptc_candidate, ptc_cam</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Example usage:</span></span><br><span class="line">example_data = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;candidates&quot;</span>: [</span><br><span class="line">            &#123;<span class="string">&quot;label&quot;</span>: <span class="string">&quot;obj_000017&quot;</span>, <span class="string">&quot;score&quot;</span>: <span class="number">0.829675</span>, <span class="string">&quot;pose&quot;</span>: torch.eye(<span class="number">4</span>)&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;label&quot;</span>: <span class="string">&quot;obj_000010&quot;</span>, <span class="string">&quot;score&quot;</span>: <span class="number">0.820436</span>, <span class="string">&quot;pose&quot;</span>: torch.eye(<span class="number">4</span>) * <span class="number">2</span>&#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;candidates&quot;</span>: [</span><br><span class="line">            &#123;<span class="string">&quot;label&quot;</span>: <span class="string">&quot;obj_000005&quot;</span>, <span class="string">&quot;score&quot;</span>: <span class="number">0.104478</span>, <span class="string">&quot;pose&quot;</span>: torch.eye(<span class="number">4</span>) * <span class="number">3</span>&#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">example_cameras_K = [</span><br><span class="line">    torch.eye(<span class="number">3</span>),</span><br><span class="line">    torch.eye(<span class="number">3</span>) * <span class="number">2</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">cd, cam= read_list_candidates(example_data, example_cameras_K)</span><br><span class="line">cd, cam</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(PandasTensorCollection(</span><br><span class="line">     poses: torch.Size([3, 4, 4]) torch.float32 cuda:0,</span><br><span class="line"> ----------------------------------------</span><br><span class="line">     infos:</span><br><span class="line">    view_id  scene_id     score       label</span><br><span class="line"> 0        0         0  0.829675  obj_000017</span><br><span class="line"> 1        0         0  0.820436  obj_000010</span><br><span class="line"> 2        1         0  0.104478  obj_000005</span><br><span class="line"> ),</span><br><span class="line"> PandasTensorCollection(</span><br><span class="line">     K: torch.Size([2, 3, 3]) torch.float32 cuda:0,</span><br><span class="line"> ----------------------------------------</span><br><span class="line">     infos:</span><br><span class="line">    view_id</span><br><span class="line"> 0        0</span><br><span class="line"> 1        1</span><br><span class="line"> ))</span><br></pre></td></tr></table></figure>
<p>之后就正常调用<code>MultiviewScenePredictor.predict_scene_state()</code> to estimate the scene:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">predictions = <span class="variable language_">self</span>.mv_predictor.predict_scene_state(candidates, cameras,</span><br><span class="line">									   score_th=<span class="variable language_">self</span>.sv_score_th,</span><br><span class="line">									   use_known_camera_poses=<span class="literal">False</span>,</span><br><span class="line">									   ransac_n_iter= <span class="variable language_">self</span>.ransac_n_iter,</span><br><span class="line">									   ransac_dist_threshold= <span class="variable language_">self</span>.ransac_dist_threshold,</span><br><span class="line">									   ba_n_iter= <span class="variable language_">self</span>.ba_n_iter)</span><br></pre></td></tr></table></figure>
<p>之后再使用Non-Maximum Suppression来聚合重复检出的物体</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">objects = predictions[<span class="string">&#x27;scene/objects&#x27;</span>]</span><br><span class="line">cameras = predictions[<span class="string">&#x27;scene/cameras&#x27;</span>]</span><br><span class="line">reproj = predictions[<span class="string">&#x27;ba_output&#x27;</span>]</span><br><span class="line"><span class="comment">#print(predictions)</span></span><br><span class="line"><span class="keyword">for</span> view_group <span class="keyword">in</span> np.unique(objects.infos[<span class="string">&#x27;view_group&#x27;</span>]):</span><br><span class="line">	objects_ = objects[np.where(objects.infos[<span class="string">&#x27;view_group&#x27;</span>] == view_group)[<span class="number">0</span>]]</span><br><span class="line">	cameras_ = cameras[np.where(cameras.infos[<span class="string">&#x27;view_group&#x27;</span>] == view_group)[<span class="number">0</span>]]</span><br><span class="line">	reproj_ = reproj[np.where(reproj.infos[<span class="string">&#x27;view_group&#x27;</span>] == view_group)[<span class="number">0</span>]]</span><br><span class="line">	objects_ = nms3d(objects_, th= <span class="variable language_">self</span>.nms_th, poses_attr=<span class="string">&#x27;TWO&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>最终输出<code>objects_</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PandasTensorCollection(</span><br><span class="line">    TWO: torch.Size([10, 4, 4]) torch.float32 cuda:0,</span><br><span class="line">----------------------------------------</span><br><span class="line">    infos:</span><br><span class="line">   obj_id     score       label  n_cand  view_group  group_id  scene_id</span><br><span class="line">0       2  5.469747  obj_000016       7           0         0        16</span><br><span class="line">1       0  5.450335  obj_000017       8           0         0        16</span><br><span class="line">2       4  4.098602  obj_000012       8           0         0        16</span><br><span class="line">3       1  3.380887  obj_000010       6           0         0        16</span><br><span class="line">4       5  2.771779  obj_000015       6           0         0        16</span><br><span class="line">5       3  1.453180  obj_000011       4           0         0        16</span><br><span class="line">6       9  1.183983  obj_000014       3           0         0        16</span><br><span class="line">7       8  1.106775  obj_000013       2           0         0        16</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>Please refer to the notebook <code>custom_scene.ipynb</code>.</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2024/10/28/%5BOBS%5Dhexo-Blog%20Template%20For%20New%20Hexo%20User%20(%E7%B3%95)/"><img class="fill" src="/gallery/hexo.png" alt="Blog Template For New Hexo User" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-10-27T19:14:22.000Z" title="10/28/2024, 3:14:22 AM">2024-10-28</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:15.767Z" title="12/31/2024, 3:07:15 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">4 minutes read (About 566 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/10/28/%5BOBS%5Dhexo-Blog%20Template%20For%20New%20Hexo%20User%20(%E7%B3%95)/">Blog Template For New Hexo User</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="前摇部分"><a href="#前摇部分" class="headerlink" title="前摇部分"></a>前摇部分</h1><h2 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h2><p>本地增添博客内容(markdown文件)-&gt;hexo根据文件内容生成网页源码-&gt;上通过指令上传(push)到github-&gt;github自行部署静态页面</p>
<h2 id="基本准备"><a href="#基本准备" class="headerlink" title="基本准备"></a>基本准备</h2><h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xueweisuoyong/p/11914045.html">https://www.cnblogs.com/xueweisuoyong/p/11914045.html</a></p>
<h3 id="Github-shh-key"><a href="#Github-shh-key" class="headerlink" title="Github shh key"></a>Github shh key</h3><p>因为把本地写的内容传到github，需要绑定一个ssh密钥<br>参见：<a target="_blank" rel="noopener" href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t ed25519 -C <span class="string">&quot;guanshengyuanlu@163.com&quot;</span></span><br></pre></td></tr></table></figure>

<div class="post-content"><a href="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/Pasted_image_20241027192407.png" title="" title=" class="gallery-item"><img src="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/Pasted_image_20241027192407.png" alt="" title=""></a></div>

<p>把这串公钥添加到github ssh settings里面</p>
<h3 id="安装npm"><a href="#安装npm" class="headerlink" title="安装npm"></a>安装npm</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lizhong2008/article/details/133844070">https://blog.csdn.net/lizhong2008/article/details/133844070</a><br>最新版本即可</p>
<h2 id="本地部署"><a href="#本地部署" class="headerlink" title="本地部署"></a>本地部署</h2><p>设定本地的git config</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email <span class="string">&quot;guanshengyuanlu@163.com&quot;</span></span><br><span class="line">git config --global user.name <span class="string">&quot;Draumurvakna&quot;</span></span><br></pre></td></tr></table></figure>

<p>克隆仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:Draumurvakna/MIGAO-Blog-Src.git</span><br><span class="line"><span class="built_in">cd</span> MIGAO-Blog-Src</span><br></pre></td></tr></table></figure>

<p>安装环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git submodule update --recursive --init   </span><br><span class="line">npm update</span><br><span class="line"><span class="built_in">cd</span> themes/icarus</span><br><span class="line">npm update</span><br></pre></td></tr></table></figure>

<h2 id="更新网站"><a href="#更新网站" class="headerlink" title="更新网站"></a>更新网站</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./show.sh <span class="comment">#预览</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./deploy.sh <span class="comment">#可以直接通过网页访https://draumurvakna.github.io/</span></span><br></pre></td></tr></table></figure>

<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>网站上的每一篇文章在本地都是一份<a target="_blank" rel="noopener" href="https://markdown.com.cn/intro.html">markdown</a>文本文件，存在<code>source/_posts</code>中</p>
<div class="post-content"><a href="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/Pasted_image_20241027220857.png" title="" title=" class="gallery-item"><img src="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/Pasted_image_20241027220857.png" alt="" title=""></a></div>
例如这里就有两篇示例文章

<p>通过指令<code>hexo new &quot;article title&quot;</code> 来创建一篇新博客</p>
<div class="post-content"><a href="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/Pasted_image_20241027221104.png" title="" title=" class="gallery-item"><img src="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/Pasted_image_20241027221104.png" alt="" title=""></a></div>


<p>然后到对应文件里面编辑就行了<br>markdown的编辑器推荐用typora，当然如果足够硬核的话用txt文本编辑器也毫无问题！</p>
<p>如果想添加图片的话，就往同文件夹下的资源文件夹（和这篇博客名字相同的文件夹）中添加照片然后在文中输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><div class="post-content"><a href="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/picture_name" title="" title=" class="gallery-item"><img src="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/picture_name" alt="" title=""></a></div></span><br></pre></td></tr></table></figure>
<p>可以参考<code>Sample Blog</code></p>
<p>添加完自己想要的内容之后用<code>./deploy.sh</code>部署一下网站，稍等片刻，进到网站里就可以看到最新的变化了。</p>
<h1 id="后"><a href="#后" class="headerlink" title="后"></a>后</h1><h3 id="我想给博客换个背景"><a href="#我想给博客换个背景" class="headerlink" title="我想给博客换个背景"></a>我想给博客换个背景</h3><p>进到<code>themes/icarus/source/img</code>文件夹📁</p>
<div class="post-content"><a href="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/Pasted_image_20241027222139.png" title="" title=" class="gallery-item"><img src="/2024/10/28/[OBS]hexo-Blog Template For New Hexo User (糕)/Pasted_image_20241027222139.png" alt="" title=""></a></div>
把`lightBG.png`, `darkBG.jpg`换成别的图片，名字一致

<p>如果重新部署后发现没有更改，那就网页里按一下<code>&lt;Ctrl&gt;+F5</code></p>
<h3 id="我想换个头像👤"><a href="#我想换个头像👤" class="headerlink" title="我想换个头像👤"></a>我想换个头像👤</h3><p>如上图，改avatar.png</p>
<h3 id="关于评论系统的话需要自己搞定o"><a href="#关于评论系统的话需要自己搞定o" class="headerlink" title="关于评论系统的话需要自己搞定o"></a>关于评论系统的话需要自己搞定o</h3><p>参考 <a href="https://chen-yulin.github.io/2024/09/03/%5BOBS%5Dhexo-Hexo%20Comment%20System%20--%20Twikoo/">https://chen-yulin.github.io/2024/09/03/%5BOBS%5Dhexo-Hexo%20Comment%20System%20--%20Twikoo/</a></p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-10-22T14:32:24.000Z" title="10/22/2024, 10:32:24 PM">2024-10-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-31T07:07:15.660Z" title="12/31/2024, 3:07:15 PM">2024-12-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">2 minutes read (About 232 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/10/22/%5BOBS%5D%E4%BF%A1%E6%81%AF%E5%B7%AE-%E5%AF%86%E9%99%A2%E7%BD%97%E6%96%AF%E5%95%86%E5%AD%A6%E9%99%A2%E5%8F%8C%E5%AD%A6%E4%BD%8D%E9%A1%B9%E7%9B%AE/">密院罗斯商学院双学位项目</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>研究生层面的罗斯商学院双学位项目<br>密大方面提供的硕士学位（授课型）：</p>
<ul>
<li>管理 <strong>30 credits</strong></li>
<li>供应链（管理）<strong>30 credits</strong></li>
<li>商务分析 (BA) <strong>36.5 credits</strong> 挺适合转商科，量化分析（programming required）</li>
</ul>
<p>密大的一年放在三年学制的<strong>最后一学年的6月~来年5月</strong>，我们认对方6学分，对方认我们Gateway<br>准入条件：</p>
<ul>
<li>密院研究生</li>
<li>对方的线上面试方式</li>
</ul>
<p>学费，<strong>5w$~6w$</strong> （如果承认学分学费可以打折），生活安娜堡预计1000$&#x2F;m，饮食1000$&#x2F;m， 杂项500$&#x2F;m</p>
<p>可以提供找工作的签证机会（利好留美发展者）<br>但是时间会和秋招冲突，会给国内找工作面试带来困难</p>
<p>发学位证书的时间在两边并不统一</p>
<p>26级包括<strong>专硕</strong>招生（和双学位挂钩）</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/categories/Note/page/0/">Previous</a></div><div class="pagination-next"><a href="/categories/Note/page/2/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/categories/Note/">1</a></li><li><a class="pagination-link" href="/categories/Note/page/2/">2</a></li><li><a class="pagination-link" href="/categories/Note/page/3/">3</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/categories/Note/page/7/">7</a></li></ul></nav></div><style>.column.column-left,.column.column-right{display:none}</style><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="Chen Yulin"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Chen Yulin</p><p class="is-size-6 is-block">SJTU student</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Manchester by the Sea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives/"><p class="title">168</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories/"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags/"><p class="title">171</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Chen-Yulin" target="_blank" rel="me noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/Chen-Yulin"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/12/"><span class="level-start"><span class="level-item">December 2024</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/11/"><span class="level-start"><span class="level-item">November 2024</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/10/"><span class="level-start"><span class="level-item">October 2024</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">September 2024</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">August 2024</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">July 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">June 2024</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">May 2024</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">March 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">May 2023</span></span><span class="level-end"><span class="level-item tag">47</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-31T05:13:32.000Z">2024-12-31</time></p><p class="title"><a href="/2024/12/31/%5BOBS%5DDeep%20Learning-Imitation%20Learnning-A%20Survey%20of%20Imitation%20Learning-%20Algorithms,%20Recent%20%20Developments,%20and%20Challenges/">A Survey of Imitation Learning- Algorithms, Recent  Developments, and Challenges</a></p><p class="categories"><a href="/categories/Note/">Note</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-27T13:42:10.000Z">2024-12-27</time></p><p class="title"><a href="/2024/12/27/%E9%95%BF%E5%A4%9C%E6%97%A0%E7%9C%A0%E6%B3%AA%E5%B7%B2%E5%B0%BD%EF%BC%8C%E4%B8%BD%E5%A4%8F%E6%9C%89%E6%9C%9F%E8%AF%97%E9%95%BF%E5%AD%98%E2%80%94%E2%80%942024%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/">长夜无眠泪已尽，丽夏有期诗长存——2024年度总结</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-23T11:05:36.000Z">2024-12-23</time></p><p class="title"><a href="/2024/12/23/%5BOBS%5D477%20Challenge/">477 Challenge</a></p><p class="categories"><a href="/categories/Note/">Note</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-17T14:56:38.000Z">2024-12-17</time></p><p class="title"><a href="/2024/12/17/%5BOBS%5DML-The%20Bitter%20Lesson/">The Bitter Lesson</a></p><p class="categories"><a href="/categories/Note/">Note</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-17T07:41:09.000Z">2024-12-17</time></p><p class="title"><a href="/2024/12/17/%5BOBS%5DReconstruct%20Anything-Dynamic%20Open-Vocabulary%203D%20Scene%20Graphs%20for%20Long-term%20Language-Guided%20Mobile%20Manipulation/">Dynamic Open-Vocabulary 3D Scene Graphs for Long-term Language-Guided Mobile Manipulation</a></p><p class="categories"><a href="/categories/Review/">Review</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/6-D/"><span class="tag">6-D</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AIGC/"><span class="tag">AIGC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AR/"><span class="tag">AR</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Behaviorism/"><span class="tag">Behaviorism</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CADC/"><span class="tag">CADC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CD/"><span class="tag">CD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CNN/"><span class="tag">CNN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CSharp/"><span class="tag">CSharp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CV/"><span class="tag">CV</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Capstone/"><span class="tag">Capstone</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Control/"><span class="tag">Control</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DD/"><span class="tag">DD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DT/"><span class="tag">DT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Discrete-Mathematics/"><span class="tag">Discrete-Mathematics</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ESP32/"><span class="tag">ESP32</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Education/"><span class="tag">Education</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Embeded-System/"><span class="tag">Embeded-System</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FL/"><span class="tag">FL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Federated-Learning/"><span class="tag">Federated-Learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Foundation/"><span class="tag">Foundation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Functional-programming/"><span class="tag">Functional programming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GPT/"><span class="tag">GPT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Game/"><span class="tag">Game</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gated-NN/"><span class="tag">Gated-NN</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Github/"><span class="tag">Github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HRI/"><span class="tag">HRI</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Haskell/"><span class="tag">Haskell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Humanism/"><span class="tag">Humanism</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IK/"><span class="tag">IK</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ImitationLearning/"><span class="tag">ImitationLearning</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Javascript/"><span class="tag">Javascript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LLM/"><span class="tag">LLM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LSP/"><span class="tag">LSP</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Latex/"><span class="tag">Latex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LinearAlgebra/"><span class="tag">LinearAlgebra</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MBTI/"><span class="tag">MBTI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ML/"><span class="tag">ML</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MR-AR/"><span class="tag">MR/AR</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Method/"><span class="tag">Method</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mod/"><span class="tag">Mod</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Music/"><span class="tag">Music</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NLP/"><span class="tag">NLP</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NN/"><span class="tag">NN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Network/"><span class="tag">Network</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenCV/"><span class="tag">OpenCV</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHD/"><span class="tag">PHD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PSY/"><span class="tag">PSY</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Planning/"><span class="tag">Planning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Plugin/"><span class="tag">Plugin</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PoseEstimation/"><span class="tag">PoseEstimation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Postgraduate/"><span class="tag">Postgraduate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prefab/"><span class="tag">Prefab</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Probability/"><span class="tag">Probability</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pytorch/"><span class="tag">Pytorch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/QML/"><span class="tag">QML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RNN/"><span class="tag">RNN</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ROS/"><span class="tag">ROS</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reading/"><span class="tag">Reading</span><span class="tag">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Real2Sim/"><span class="tag">Real2Sim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reconstruct/"><span class="tag">Reconstruct</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Robot/"><span class="tag">Robot</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Robotics/"><span class="tag">Robotics</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SJTU-Lecture/"><span class="tag">SJTU-Lecture</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Script/"><span class="tag">Script</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shader/"><span class="tag">Shader</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Signals-and-Systems/"><span class="tag">Signals and Systems</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sim2Real/"><span class="tag">Sim2Real</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Snippets/"><span class="tag">Snippets</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Star-rail/"><span class="tag">Star-rail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TC/"><span class="tag">TC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TOEFL/"><span class="tag">TOEFL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tech-Communication/"><span class="tag">Tech Communication</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Transoformer/"><span class="tag">Transoformer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unity/"><span class="tag">Unity</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VideoEditing/"><span class="tag">VideoEditing</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vim/"><span class="tag">Vim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WSL/"><span class="tag">WSL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web/"><span class="tag">Web</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/academic-ability/"><span class="tag">academic-ability</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aliyun/"><span class="tag">aliyun</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/app/"><span class="tag">app</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/atlas/"><span class="tag">atlas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/autonomousDriving/"><span class="tag">autonomousDriving</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/beautify/"><span class="tag">beautify</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bs4/"><span class="tag">bs4</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/c/"><span class="tag">c</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/comment-doc/"><span class="tag">comment&amp;doc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/course/"><span class="tag">course</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cuda/"><span class="tag">cuda</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dataframe/"><span class="tag">dataframe</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debate/"><span class="tag">debate</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debugger/"><span class="tag">debugger</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docs/"><span class="tag">docs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dynamic-programmming/"><span class="tag">dynamic-programmming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emoation/"><span class="tag">emoation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emotion/"><span class="tag">emotion</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ethic/"><span class="tag">ethic</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/family/"><span class="tag">family</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/godot/"><span class="tag">godot</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/health/"><span class="tag">health</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/html/"><span class="tag">html</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hyprland/"><span class="tag">hyprland</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/idea/"><span class="tag">idea</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jolt/"><span class="tag">jolt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live2d/"><span class="tag">live2d</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/llm/"><span class="tag">llm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/love/"><span class="tag">love</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lua/"><span class="tag">lua</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mason/"><span class="tag">mason</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/math/"><span class="tag">math</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/meeting/"><span class="tag">meeting</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/meme/"><span class="tag">meme</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/motivation/"><span class="tag">motivation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/movie/"><span class="tag">movie</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/multi-view/"><span class="tag">multi-view</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/music/"><span class="tag">music</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/numpy/"><span class="tag">numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nvim/"><span class="tag">nvim</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/operational-ability/"><span class="tag">operational-ability</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/oral/"><span class="tag">oral</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pandas/"><span class="tag">pandas</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/path/"><span class="tag">path</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/philosophy/"><span class="tag">philosophy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/physX/"><span class="tag">physX</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/physics-engine/"><span class="tag">physics-engine</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pio/"><span class="tag">pio</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/plugin/"><span class="tag">plugin</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/quantum/"><span class="tag">quantum</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/recursive/"><span class="tag">recursive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regex/"><span class="tag">regex</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/reinforcement-learning/"><span class="tag">reinforcement-learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/repository/"><span class="tag">repository</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/scrap/"><span class="tag">scrap</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/segmentation/"><span class="tag">segmentation</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/shell/"><span class="tag">shell</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sklearn/"><span class="tag">sklearn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/society/"><span class="tag">society</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssh/"><span class="tag">ssh</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/start-business/"><span class="tag">start-business</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/submodule/"><span class="tag">submodule</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/supervised-learning/"><span class="tag">supervised-learning</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/survey/"><span class="tag">survey</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tasks/"><span class="tag">tasks</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/thought/"><span class="tag">thought</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/torch/"><span class="tag">torch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/travel/"><span class="tag">travel</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unsupervised-learning/"><span class="tag">unsupervised-learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/version-management/"><span class="tag">version-management</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/waybar/"><span class="tag">waybar</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wayland/"><span class="tag">wayland</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/website/"><span class="tag">website</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/well-being/"><span class="tag">well-being</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/window-manager/"><span class="tag">window-manager</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ykll/"><span class="tag">ykll</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/zen/"><span class="tag">zen</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%F0%9F%90%B1/"><span class="tag">🐱</span><span class="tag">1</span></a></div></div></div></div></div></div><style>.column.column-left,.column.column-right{display:block}</style></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/img/cyllogo.png" alt="Chen Yulin&#039;s Blog" height="28"><img class="logo-img-dark" src="/img/cyllogonight.png" alt="Chen Yulin&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 Chen Yulin</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Chen-Yulin"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked="checked"><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer></script><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script><!-- hexo injector body_end start -->
<link rel="stylesheet" crossorigin href="https://g.alicdn.com/aliyun-documentation/web-chatbot-ui/0.0.11/index.css" />
<script type="module" crossorigin src="https://g.alicdn.com/aliyun-documentation/web-chatbot-ui/0.0.11/index.js"></script>
<script>
  window.CHATBOT_CONFIG = {
    endpoint: "https://webchat-bot-iqu-knzhgrvznd.cn-hangzhou.fcapp.run/chat", // 可以替换为 https://{your-fc-http-trigger-domain}/chat
    displayByDefault: false, // 默认不展示 AI 助手聊天框
    aiChatOptions: { // aiChatOptions 中 options 会传递 aiChat 组件，自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat
      conversationOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#conversation-options
        conversationStarters: [
          {prompt: '你是谁？'},
          {prompt: '博主又是谁？'},
          {prompt: '怎么使用这个网站？'},
          {prompt: '想要博主联系方式！'},
        ]
      },
      displayOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#display-options
        height: 600,
        width: 350,
      },
      personaOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#chat-personas
        assistant: {          name: '博主的AI助手，十四行诗参上！',
          // AI 助手的图标
          avatar: 'https://chen-yulin.github.io/thumb/14.png',
          tagline: '要不要试试问下面的问题呢？',
        }
      }
    }
  };
</script>
<style>
  :root {
    /* webchat 工具栏的颜色 */
    --webchat-toolbar-background-color: #1464E4;
    /* webchat 工具栏文字和按钮的颜色 */
    --webchat-toolbar-text-color: #FFF;
  }
  /* webchat 对话框如果被遮挡，可以尝试通过 z-index、bottom、left 等设置来调整位置 */
  .webchat-container {
    z-index: 100;
    bottom: 10px;
    right: 10px;
  }
  /* webchat 的唤起按钮如果被遮挡，可以尝试通过 z-index、bottom、left 等设置来调整位置 */
  .webchat-bubble-tip {
    z-index: 99;
    bottom: 60px;
    right: 20px;
  }
  .webchat-bubble-tip {
    overflow: visible !important;
  }
  @keyframes float {
    0% {
      transform: translateY(0px) translateX(-50%);
    }
    50% {
      transform: translateY(-10px) translateX(-50%);
    }
    100% {
      transform: translateY(0px) translateX(-50%);
    }
  }

  .webchat-bubble-tip::before {
    content: '';
    position: absolute;
    top: -25px;
    left: 70%;
    width: 40px;
    height: 40px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.5));
    animation: float 3s ease-in-out infinite;
  }
</style><script data-pjax src="https://registry.npmmirror.com/oh-my-live2d/latest/files"></script><script>const oml2d = OML2D.loadOml2d({libraryUrls:{"complete":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/complete.js","cubism2":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/cubism2.js","cubism5":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/cubism5.js"},dockedPosition:"left",mobileDisplay:true,models:[{"path":"https://model.oml2d.com/mai/model.json","mobilePosition":[25,0],"mobileScale":0.1,"mobileStageStyle":{"width":125,"height":175},"motionPreloadStrategy":"ALL","position":[50,0],"scale":0.2,"stageStyle":{"width":250,"height":350}}],parentElement:document.body,primaryColor:"var(--btn-bg)",sayHello:false,tips:{style: {"width":230,"height":120,"left":"calc(50% - 20px)","top":"-100px"},mobileStyle: {"width":180,"height":80,"left":"calc(50% - 30px)","top":"-100px"},idleTips:{interval:15000,message:function(){
  return axios.get('https://v1.hitokoto.cn?c=i')
    .then(function (response) {
      return response.data.hitokoto ;
    })
    .catch(function (error) {
      console.error(error);
    });
}
}}});</script><!-- hexo injector body_end end --></body></html>