<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta name="theme-color" content="#123456"><title>Tag: Python - Chen Yulin&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#6495ed"><meta name="application-name" content="Icarus - Hexo Theme"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="msapplication-TileColor" content="#6495ed"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Icarus - Hexo Theme"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Chen Yulin&#039;s Blog"><meta property="og:url" content="http://chen-yulin.github.io/"><meta property="og:site_name" content="Chen Yulin&#039;s Blog"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://chen-yulin.github.io/img/og_image.png"><meta property="article:author" content="Chen Yulin"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://chen-yulin.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://chen-yulin.github.io"},"headline":"Chen Yulin's Blog","image":["http://chen-yulin.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Chen Yulin"},"publisher":{"@type":"Organization","name":"Chen Yulin's Blog","logo":{"@type":"ImageObject","url":{"light":"/img/cyllogo.png","dark":"/img/cyllogonight.png"}}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><svg style="position:absolute;width:0;height:0;" aria-hidden="true"><defs><filter id="liquid-glass-sm" x="-10%" y="-10%" width="120%" height="120%"><feTurbulence type="fractalNoise" baseFrequency="0.015" numOctaves="2" result="noise" seed="5"></feTurbulence><feDisplacementMap in="SourceGraphic" in2="noise" scale="2" xchannelselector="R" ychannelselector="G"></feDisplacementMap></filter></defs></svg><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><canvas id="flower"></canvas><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/img/cyllogo.png" alt="Chen Yulin&#039;s Blog" height="28"><img class="logo-img-dark" src="/img/cyllogonight.png" alt="Chen Yulin&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Chen-Yulin"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags/">Tags</a></li><li class="is-active"><a href="#" aria-current="page">Python</a></li></ul></nav></div></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2026/01/11/%5BOBS%5D%E6%9C%BA%E5%99%A8%E4%BA%BA%E9%A2%84%E9%AB%98%E7%8F%AD-LifeGame%20Python/"><img class="fill" src="/gallery/Python.png" alt="LifeGame Python" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2026-01-10T23:16:57.000Z" title="1/11/2026, 7:16:57 AM">2026-01-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.378Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">11 minutes read (About 1667 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2026/01/11/%5BOBS%5D%E6%9C%BA%E5%99%A8%E4%BA%BA%E9%A2%84%E9%AB%98%E7%8F%AD-LifeGame%20Python/">LifeGame Python</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="使用-Python-和-Pygame-实现生命游戏"><a href="#使用-Python-和-Pygame-实现生命游戏" class="headerlink" title="使用 Python 和 Pygame 实现生命游戏"></a>使用 Python 和 Pygame 实现生命游戏</h1><h2 id="0-教学目标"><a href="#0-教学目标" class="headerlink" title="0. 教学目标"></a>0. 教学目标</h2><p>通过本实验，学习：</p>
<ul>
<li><p>使用 <strong>二维数组</strong>表示离散网格世界</p>
</li>
<li><p>理解并实现 <strong>生命游戏的局部规则 → 全局演化</strong></p>
</li>
<li><p>使用 <strong>Pygame</strong> 进行基础的二维图形显示</p>
</li>
<li><p>使用 <strong>键盘事件</strong>控制程序行为</p>
</li>
<li><p>将一个问题分解为：<br>  <strong>数据结构 → 规则函数 → 显示函数 → 主循环</strong></p>
</li>
</ul>
<hr>
<h2 id="1-什么是生命游戏（Conway’s-Game-of-Life）"><a href="#1-什么是生命游戏（Conway’s-Game-of-Life）" class="headerlink" title="1. 什么是生命游戏（Conway’s Game of Life）"></a>1. 什么是生命游戏（Conway’s Game of Life）</h2><p>生命游戏是一个<strong>离散、确定性、无随机的元胞自动机</strong>：</p>
<ul>
<li><p>空间：二维网格</p>
</li>
<li><p>时间：离散时间步</p>
</li>
<li><p>每个格子（细胞）只有两种状态：</p>
<ul>
<li><p><code>活 (1)</code></p>
</li>
<li><p><code>死 (0)</code></p>
</li>
</ul>
</li>
</ul>
<h3 id="1-1-演化规则（只依赖局部）"><a href="#1-1-演化规则（只依赖局部）" class="headerlink" title="1.1 演化规则（只依赖局部）"></a>1.1 演化规则（只依赖局部）</h3><p>对每个细胞，统计它周围 <strong>8 个邻居</strong> 中活细胞的数量：</p>
<table>
<thead>
<tr>
<th>当前状态</th>
<th>活邻居数</th>
<th>下一状态</th>
</tr>
</thead>
<tbody><tr>
<td>活</td>
<td>2 或 3</td>
<td>活</td>
</tr>
<tr>
<td>活</td>
<td>其他</td>
<td>死</td>
</tr>
<tr>
<td>死</td>
<td>3</td>
<td>活</td>
</tr>
<tr>
<td>死</td>
<td>其他</td>
<td>死</td>
</tr>
</tbody></table>
<p><strong>重要思想</strong>：</p>
<blockquote>
<p>全局复杂行为来自简单的局部规则</p>
</blockquote>
<hr>
<h2 id="2-程序整体结构设计"><a href="#2-程序整体结构设计" class="headerlink" title="2. 程序整体结构设计"></a>2. 程序整体结构设计</h2><p>在开始写代码前，先规划模块结构：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">生命游戏程序</span><br><span class="line">│</span><br><span class="line">├── 参数设置（网格大小、颜色）</span><br><span class="line">├── 二维数组表示网格</span><br><span class="line">├── 邻居统计函数</span><br><span class="line">├── 下一代计算函数</span><br><span class="line">├── Pygame 绘制函数</span><br><span class="line">└── 主循环（事件处理 + 显示）</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-第一步：准备环境和基本参数"><a href="#3-第一步：准备环境和基本参数" class="headerlink" title="3. 第一步：准备环境和基本参数"></a>3. 第一步：准备环境和基本参数</h2><h3 id="3-1-安装并导入库"><a href="#3-1-安装并导入库" class="headerlink" title="3.1 安装并导入库"></a>3.1 安装并导入库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pygame</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="keyword">import</span> random</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-2-定义网格和显示参数"><a href="#3-2-定义网格和显示参数" class="headerlink" title="3.2 定义网格和显示参数"></a>3.2 定义网格和显示参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CELL_SIZE = <span class="number">10</span>          <span class="comment"># 每个细胞在屏幕上的像素大小</span></span><br><span class="line">GRID_WIDTH = <span class="number">80</span>         <span class="comment"># 网格列数</span></span><br><span class="line">GRID_HEIGHT = <span class="number">60</span>        <span class="comment"># 网格行数</span></span><br><span class="line"></span><br><span class="line">SCREEN_WIDTH = GRID_WIDTH * CELL_SIZE</span><br><span class="line">SCREEN_HEIGHT = GRID_HEIGHT * CELL_SIZE</span><br></pre></td></tr></table></figure>

<p><strong>解释：</strong></p>
<ul>
<li><p>我们的“世界”是逻辑网格</p>
</li>
<li><p>Pygame 显示的是像素</p>
</li>
<li><p>一个细胞 ↔ 一个矩形</p>
</li>
</ul>
<hr>
<h3 id="3-3-定义细胞状态和颜色"><a href="#3-3-定义细胞状态和颜色" class="headerlink" title="3.3 定义细胞状态和颜色"></a>3.3 定义细胞状态和颜色</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ALIVE = <span class="number">1</span></span><br><span class="line">DEAD = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">COLOR_BG = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">COLOR_CELL = (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</span><br><span class="line">COLOR_GRID = (<span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-第二步：用二维数组表示生命世界"><a href="#4-第二步：用二维数组表示生命世界" class="headerlink" title="4. 第二步：用二维数组表示生命世界"></a>4. 第二步：用二维数组表示生命世界</h2><h3 id="4-1-二维数组的含义"><a href="#4-1-二维数组的含义" class="headerlink" title="4.1 二维数组的含义"></a>4.1 二维数组的含义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grid[y][x]</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>y</code>：第几行</p>
</li>
<li><p><code>x</code>：第几列</p>
</li>
<li><p>值：<code>0</code> 或 <code>1</code></p>
</li>
</ul>
<hr>
<h3 id="4-2-随机初始化网格"><a href="#4-2-随机初始化网格" class="headerlink" title="4.2 随机初始化网格"></a>4.2 随机初始化网格</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">random_grid</span>():</span><br><span class="line">    grid = []  <span class="comment"># 用来存放整个二维网格（每一行是一个列表）</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT):</span><br><span class="line">        row = []  <span class="comment"># 当前行</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH):</span><br><span class="line">            cell = random.choice([ALIVE, DEAD])</span><br><span class="line">            row.append(cell)</span><br><span class="line">        grid.append(row)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> grid</span><br></pre></td></tr></table></figure>
<p>更优雅的写法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">random_grid</span>():</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        [random.choice([ALIVE, DEAD]) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH)]</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT)</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<p><strong>教学要点：</strong></p>
<ul>
<li><p>外层列表 → 行</p>
</li>
<li><p>内层列表 → 列</p>
</li>
<li><p>每个位置随机赋值</p>
</li>
</ul>
<hr>
<h2 id="5-第三步：统计邻居数量（核心逻辑之一）"><a href="#5-第三步：统计邻居数量（核心逻辑之一）" class="headerlink" title="5. 第三步：统计邻居数量（核心逻辑之一）"></a>5. 第三步：统计邻居数量（核心逻辑之一）</h2><h3 id="5-1-邻域定义"><a href="#5-1-邻域定义" class="headerlink" title="5.1 邻域定义"></a>5.1 邻域定义</h3><p>每个细胞有 8 个邻居：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(-1,-1) (0,-1) (1,-1)</span><br><span class="line">(-1, 0)   X    (1, 0)</span><br><span class="line">(-1, 1) (0, 1) (1, 1)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="5-2-邻居统计函数"><a href="#5-2-邻居统计函数" class="headerlink" title="5.2 邻居统计函数"></a>5.2 邻居统计函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">count_neighbors</span>(<span class="params">grid, x, y</span>):</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> dy <span class="keyword">in</span> [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]:</span><br><span class="line">        <span class="keyword">for</span> dx <span class="keyword">in</span> [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]:</span><br><span class="line">            <span class="keyword">if</span> dx == <span class="number">0</span> <span class="keyword">and</span> dy == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            nx, ny = x + dx, y + dy</span><br><span class="line">            <span class="keyword">if</span> <span class="number">0</span> &lt;= nx &lt; GRID_WIDTH <span class="keyword">and</span> <span class="number">0</span> &lt;= ny &lt; GRID_HEIGHT:</span><br><span class="line">                count += grid[ny][nx]</span><br><span class="line">    <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure>

<p><strong>逐行解释：</strong></p>
<ul>
<li><p>两层循环遍历 3×3 区域</p>
</li>
<li><p>排除自身</p>
</li>
<li><p>检查是否越界</p>
</li>
<li><p>累加存活细胞数</p>
</li>
</ul>
<hr>
<h2 id="6-第四步：计算下一代网格"><a href="#6-第四步：计算下一代网格" class="headerlink" title="6. 第四步：计算下一代网格"></a>6. 第四步：计算下一代网格</h2><h3 id="6-1-为什么不能原地修改？"><a href="#6-1-为什么不能原地修改？" class="headerlink" title="6.1 为什么不能原地修改？"></a>6.1 为什么不能原地修改？</h3><ul>
<li><p>当前状态 → 决定下一状态</p>
</li>
<li><p>如果边算边改，会影响后续计算</p>
</li>
</ul>
<p><strong>解决方案</strong>：</p>
<blockquote>
<p>使用一个新的二维数组</p>
</blockquote>
<hr>
<h3 id="6-2-下一代计算函数"><a href="#6-2-下一代计算函数" class="headerlink" title="6.2 下一代计算函数"></a>6.2 下一代计算函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">next_generation</span>(<span class="params">grid</span>):</span><br><span class="line">    new_grid = [</span><br><span class="line">        [DEAD <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH)]</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT)</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH):</span><br><span class="line">            neighbors = count_neighbors(grid, x, y)</span><br><span class="line">            <span class="keyword">if</span> grid[y][x] == ALIVE:</span><br><span class="line">                <span class="keyword">if</span> neighbors <span class="keyword">in</span> (<span class="number">2</span>, <span class="number">3</span>):</span><br><span class="line">                    new_grid[y][x] = ALIVE</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> neighbors == <span class="number">3</span>:</span><br><span class="line">                    new_grid[y][x] = ALIVE</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> new_grid</span><br></pre></td></tr></table></figure>

<p><strong>教学重点：</strong></p>
<ul>
<li><p>规则直接翻译成代码</p>
</li>
<li><p>清晰的 if &#x2F; else 逻辑</p>
</li>
<li><p>新旧网格分离</p>
</li>
</ul>
<hr>
<h2 id="7-第五步：使用-Pygame-显示网格"><a href="#7-第五步：使用-Pygame-显示网格" class="headerlink" title="7. 第五步：使用 Pygame 显示网格"></a>7. 第五步：使用 Pygame 显示网格</h2><h3 id="7-1-显示原理"><a href="#7-1-显示原理" class="headerlink" title="7.1 显示原理"></a>7.1 显示原理</h3><ul>
<li><p>一个细胞 → 一个矩形</p>
</li>
<li><p>坐标换算：</p>
</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">屏幕 x = 网格列 * CELL_SIZE</span><br><span class="line">屏幕 y = 网格行 * CELL_SIZE</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="7-2-绘制函数"><a href="#7-2-绘制函数" class="headerlink" title="7.2 绘制函数"></a>7.2 绘制函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">draw_grid</span>(<span class="params">screen, grid</span>):</span><br><span class="line">    screen.fill(COLOR_BG)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH):</span><br><span class="line">            <span class="keyword">if</span> grid[y][x] == ALIVE:</span><br><span class="line">                rect = pygame.Rect(</span><br><span class="line">                    x * CELL_SIZE,</span><br><span class="line">                    y * CELL_SIZE,</span><br><span class="line">                    CELL_SIZE,</span><br><span class="line">                    CELL_SIZE</span><br><span class="line">                )</span><br><span class="line">                pygame.draw.rect(screen, COLOR_CELL, rect)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="7-3-（可选）绘制网格线"><a href="#7-3-（可选）绘制网格线" class="headerlink" title="7.3 （可选）绘制网格线"></a>7.3 （可选）绘制网格线</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH):</span><br><span class="line">    pygame.draw.line(</span><br><span class="line">        screen, COLOR_GRID,</span><br><span class="line">        (x * CELL_SIZE, <span class="number">0</span>),</span><br><span class="line">        (x * CELL_SIZE, SCREEN_HEIGHT)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT):</span><br><span class="line">    pygame.draw.line(</span><br><span class="line">        screen, COLOR_GRID,</span><br><span class="line">        (<span class="number">0</span>, y * CELL_SIZE),</span><br><span class="line">        (SCREEN_WIDTH, y * CELL_SIZE)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="8-第六步：主循环与键盘控制"><a href="#8-第六步：主循环与键盘控制" class="headerlink" title="8. 第六步：主循环与键盘控制"></a>8. 第六步：主循环与键盘控制</h2><h3 id="8-1-Pygame-程序基本结构"><a href="#8-1-Pygame-程序基本结构" class="headerlink" title="8.1 Pygame 程序基本结构"></a>8.1 Pygame 程序基本结构</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pygame.init()</span><br><span class="line">screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))</span><br><span class="line">clock = pygame.time.Clock()</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="8-2-事件处理与主循环"><a href="#8-2-事件处理与主循环" class="headerlink" title="8.2 事件处理与主循环"></a>8.2 事件处理与主循环</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">grid = random_grid()</span><br><span class="line">running = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> running:</span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">        <span class="keyword">if</span> event.<span class="built_in">type</span> == pygame.QUIT:</span><br><span class="line">            running = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> event.<span class="built_in">type</span> == pygame.KEYDOWN:</span><br><span class="line">            <span class="keyword">if</span> event.key == pygame.K_SPACE:</span><br><span class="line">                grid = next_generation(grid)</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_r:</span><br><span class="line">                grid = random_grid()</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_ESCAPE:</span><br><span class="line">                running = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    draw_grid(screen, grid)</span><br><span class="line">    pygame.display.flip()</span><br><span class="line">    clock.tick(<span class="number">60</span>)</span><br></pre></td></tr></table></figure>

<p><strong>教学重点：</strong></p>
<ul>
<li><p><strong>SPACE</strong>：推进一代</p>
</li>
<li><p><strong>R</strong>：重新初始化</p>
</li>
<li><p><strong>ESC</strong>：退出</p>
</li>
</ul>
<hr>
<h2 id="9-总结：完整程序的思想"><a href="#9-总结：完整程序的思想" class="headerlink" title="9. 总结：完整程序的思想"></a>9. 总结：完整程序的思想</h2><ul>
<li><p>二维数组 &#x3D; 世界状态</p>
</li>
<li><p>局部规则 → 全局演化</p>
</li>
<li><p>显示逻辑与计算逻辑分离</p>
</li>
<li><p>主循环 &#x3D; 事件 + 更新 + 绘制</p>
</li>
</ul>
<p>完整程序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="comment"># 1. 参数设置</span></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line">CELL_SIZE = <span class="number">10</span>          <span class="comment"># 单个细胞显示的像素大小</span></span><br><span class="line">GRID_WIDTH = <span class="number">80</span>         <span class="comment"># 网格列数</span></span><br><span class="line">GRID_HEIGHT = <span class="number">60</span>        <span class="comment"># 网格行数</span></span><br><span class="line"></span><br><span class="line">SCREEN_WIDTH = GRID_WIDTH * CELL_SIZE</span><br><span class="line">SCREEN_HEIGHT = GRID_HEIGHT * CELL_SIZE</span><br><span class="line"></span><br><span class="line">ALIVE = <span class="number">1</span></span><br><span class="line">DEAD = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 颜色定义</span></span><br><span class="line">COLOR_BG = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">COLOR_CELL = (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</span><br><span class="line">COLOR_GRID = (<span class="number">40</span>, <span class="number">40</span>, <span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="comment"># 2. 网格初始化（双层 for 循环版）</span></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_grid</span>():</span><br><span class="line">    grid = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT):</span><br><span class="line">        row = []</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH):</span><br><span class="line">            cell = random.choice([ALIVE, DEAD])</span><br><span class="line">            row.append(cell)</span><br><span class="line">        grid.append(row)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> grid</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="comment"># 3. 邻居数量统计</span></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count_neighbors</span>(<span class="params">grid, x, y</span>):</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> dy <span class="keyword">in</span> [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]:</span><br><span class="line">        <span class="keyword">for</span> dx <span class="keyword">in</span> [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]:</span><br><span class="line">            <span class="comment"># 跳过自身</span></span><br><span class="line">            <span class="keyword">if</span> dx == <span class="number">0</span> <span class="keyword">and</span> dy == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            nx = x + dx</span><br><span class="line">            ny = y + dy</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 边界检查</span></span><br><span class="line">            <span class="keyword">if</span> <span class="number">0</span> &lt;= nx &lt; GRID_WIDTH <span class="keyword">and</span> <span class="number">0</span> &lt;= ny &lt; GRID_HEIGHT:</span><br><span class="line">                count += grid[ny][nx]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="comment"># 4. 计算下一代</span></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">next_generation</span>(<span class="params">grid</span>):</span><br><span class="line">    new_grid = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT):</span><br><span class="line">        new_row = []</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH):</span><br><span class="line">            neighbors = count_neighbors(grid, x, y)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> grid[y][x] == ALIVE:</span><br><span class="line">                <span class="keyword">if</span> neighbors == <span class="number">2</span> <span class="keyword">or</span> neighbors == <span class="number">3</span>:</span><br><span class="line">                    new_row.append(ALIVE)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    new_row.append(DEAD)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> neighbors == <span class="number">3</span>:</span><br><span class="line">                    new_row.append(ALIVE)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    new_row.append(DEAD)</span><br><span class="line"></span><br><span class="line">        new_grid.append(new_row)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> new_grid</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="comment"># 5. 绘制网格</span></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_grid</span>(<span class="params">screen, grid</span>):</span><br><span class="line">    screen.fill(COLOR_BG)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 绘制细胞</span></span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH):</span><br><span class="line">            <span class="keyword">if</span> grid[y][x] == ALIVE:</span><br><span class="line">                rect = pygame.Rect(</span><br><span class="line">                    x * CELL_SIZE,</span><br><span class="line">                    y * CELL_SIZE,</span><br><span class="line">                    CELL_SIZE,</span><br><span class="line">                    CELL_SIZE</span><br><span class="line">                )</span><br><span class="line">                pygame.draw.rect(screen, COLOR_CELL, rect)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 绘制网格线（教学可选）</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(GRID_WIDTH):</span><br><span class="line">        pygame.draw.line(</span><br><span class="line">            screen,</span><br><span class="line">            COLOR_GRID,</span><br><span class="line">            (x * CELL_SIZE, <span class="number">0</span>),</span><br><span class="line">            (x * CELL_SIZE, SCREEN_HEIGHT)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(GRID_HEIGHT):</span><br><span class="line">        pygame.draw.line(</span><br><span class="line">            screen,</span><br><span class="line">            COLOR_GRID,</span><br><span class="line">            (<span class="number">0</span>, y * CELL_SIZE),</span><br><span class="line">            (SCREEN_WIDTH, y * CELL_SIZE)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="comment"># 6. 主程序</span></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    pygame.init()</span><br><span class="line">    screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))</span><br><span class="line">    pygame.display.set_caption(<span class="string">&quot;Conway&#x27;s Game of Life (Teaching Version)&quot;</span>)</span><br><span class="line"></span><br><span class="line">    clock = pygame.time.Clock()</span><br><span class="line"></span><br><span class="line">    grid = random_grid()</span><br><span class="line">    running = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> running:</span><br><span class="line">        <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">            <span class="keyword">if</span> event.<span class="built_in">type</span> == pygame.QUIT:</span><br><span class="line">                running = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">elif</span> event.<span class="built_in">type</span> == pygame.KEYDOWN:</span><br><span class="line">                <span class="keyword">if</span> event.key == pygame.K_SPACE:</span><br><span class="line">                    <span class="comment"># 推进到下一代</span></span><br><span class="line">                    grid = next_generation(grid)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">elif</span> event.key == pygame.K_r:</span><br><span class="line">                    <span class="comment"># 随机重新初始化</span></span><br><span class="line">                    grid = random_grid()</span><br><span class="line"></span><br><span class="line">                <span class="keyword">elif</span> event.key == pygame.K_ESCAPE:</span><br><span class="line">                    running = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        draw_grid(screen, grid)</span><br><span class="line">        pygame.display.flip()</span><br><span class="line">        clock.tick(<span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">    pygame.quit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="comment"># 7. 程序入口</span></span><br><span class="line"><span class="comment"># ==================================================</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2025/11/24/%5BOBS%5D%E6%9C%BA%E5%99%A8%E4%BA%BA%E9%A2%84%E5%88%9D%E7%8F%AD-Lec8/"><img class="fill" src="/gallery/Python.png" alt="Lec8" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-11-23T20:29:39.000Z" title="11/24/2025, 4:29:39 AM">2025-11-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.492Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">5 minutes read (About 677 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/11/24/%5BOBS%5D%E6%9C%BA%E5%99%A8%E4%BA%BA%E9%A2%84%E5%88%9D%E7%8F%AD-Lec8/">Lec8</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ===== 第一课时：函数的定义与使用 =====</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 最简单的函数 - 无参数无返回值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;--- 示例1：打招呼函数 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;这是一个简单的打招呼函数&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;你好！&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;欢迎学习Python！&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">say_hello()</span><br><span class="line">say_hello()  <span class="comment"># 可以多次调用</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 带参数的函数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n--- 示例2：带参数的函数 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;向指定的人打招呼&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;你好，&quot;</span>, name, <span class="string">&quot;！&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;很高兴见到你！&quot;</span>)</span><br><span class="line"></span><br><span class="line">greet(<span class="string">&quot;小明&quot;</span>)</span><br><span class="line">greet(<span class="string">&quot;小红&quot;</span>)</span><br><span class="line">greet(<span class="string">&quot;小刚&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 带多个参数的函数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n--- 示例3：多个参数 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">introduce</span>(<span class="params">name, age, hobby</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;自我介绍函数&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;大家好，我叫<span class="subst">&#123;name&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;我今年<span class="subst">&#123;age&#125;</span>岁&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;我喜欢<span class="subst">&#123;hobby&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">introduce(<span class="string">&quot;小明&quot;</span>, <span class="number">10</span>, <span class="string">&quot;打篮球&quot;</span>)</span><br><span class="line">introduce(<span class="string">&quot;小红&quot;</span>, <span class="number">9</span>, <span class="string">&quot;画画&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 带返回值的函数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n--- 示例4：返回值 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;计算两个数的和&quot;&quot;&quot;</span></span><br><span class="line">    result = a + b</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">sum1 = add(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line">sum2 = add(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;5 + 3 =&quot;</span>, sum1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;10 + 20 =&quot;</span>, sum2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 实用函数：计算矩形面积</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n--- 示例5：计算面积 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rectangle_area</span>(<span class="params">length, width</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;计算矩形面积&quot;&quot;&quot;</span></span><br><span class="line">    area = length * width</span><br><span class="line">    <span class="keyword">return</span> area</span><br><span class="line"></span><br><span class="line">area1 = rectangle_area(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line">area2 = rectangle_area(<span class="number">10</span>, <span class="number">8</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;长5宽3的矩形面积：&quot;</span>, area1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;长10宽8的矩形面积：&quot;</span>, area2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 实用函数：判断奇偶</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n--- 示例6：判断奇偶数 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_even</span>(<span class="params">number</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;判断一个数是否为偶数&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> number % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;4是偶数吗？&quot;</span>, is_even(<span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;7是偶数吗？&quot;</span>, is_even(<span class="number">7</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;10是偶数吗？&quot;</span>, is_even(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 实用函数：计算平均分</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n--- 示例7：计算平均分 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_average</span>(<span class="params">score1, score2, score3</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;计算三门课的平均分&quot;&quot;&quot;</span></span><br><span class="line">    total = score1 + score2 + score3</span><br><span class="line">    average = total / <span class="number">3</span></span><br><span class="line">    <span class="keyword">return</span> average</span><br><span class="line"></span><br><span class="line">avg = calculate_average(<span class="number">85</span>, <span class="number">90</span>, <span class="number">88</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;平均分是：&quot;</span>, avg)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8. 综合练习：温度转换</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n--- 示例8：温度转换 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">celsius_to_fahrenheit</span>(<span class="params">celsius</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;摄氏度转华氏度&quot;&quot;&quot;</span></span><br><span class="line">    fahrenheit = celsius * <span class="number">9</span>/<span class="number">5</span> + <span class="number">32</span></span><br><span class="line">    <span class="keyword">return</span> fahrenheit</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fahrenheit_to_celsius</span>(<span class="params">fahrenheit</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;华氏度转摄氏度&quot;&quot;&quot;</span></span><br><span class="line">    celsius = (fahrenheit - <span class="number">32</span>) * <span class="number">5</span>/<span class="number">9</span></span><br><span class="line">    <span class="keyword">return</span> celsius</span><br><span class="line"></span><br><span class="line">temp_c = <span class="number">25</span></span><br><span class="line">temp_f = celsius_to_fahrenheit(temp_c)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;temp_c&#125;</span>°C = <span class="subst">&#123;temp_f&#125;</span>°F&quot;</span>)</span><br><span class="line"></span><br><span class="line">temp_f2 = <span class="number">77</span></span><br><span class="line">temp_c2 = fahrenheit_to_celsius(temp_f2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;temp_f2&#125;</span>°F = <span class="subst">&#123;temp_c2&#125;</span>°C&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9. 带默认参数的函数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n--- 示例9：默认参数 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">power</span>(<span class="params">number, exponent=<span class="number">2</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;计算幂次方，默认是平方&quot;&quot;&quot;</span></span><br><span class="line">    result = number ** exponent</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;5的平方：&quot;</span>, power(<span class="number">5</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;2的3次方：&quot;</span>, power(<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;3的4次方：&quot;</span>, power(<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 10. 实践项目：成绩管理系统</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n--- 综合实践：成绩管理 ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_grade</span>(<span class="params">score</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;根据分数返回等级&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> score &gt;= <span class="number">90</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;优秀&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> score &gt;= <span class="number">80</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;良好&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> score &gt;= <span class="number">60</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;及格&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;不及格&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_report</span>(<span class="params">name, math, chinese, english</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;打印成绩单&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;\n===== <span class="subst">&#123;name&#125;</span>的成绩单 =====&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;数学：<span class="subst">&#123;math&#125;</span>分 - <span class="subst">&#123;get_grade(math)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;语文：<span class="subst">&#123;chinese&#125;</span>分 - <span class="subst">&#123;get_grade(chinese)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;英语：<span class="subst">&#123;english&#125;</span>分 - <span class="subst">&#123;get_grade(english)&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    avg = calculate_average(math, chinese, english)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;平均分：<span class="subst">&#123;avg:<span class="number">.1</span>f&#125;</span>分 - <span class="subst">&#123;get_grade(avg)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">print_report(<span class="string">&quot;小明&quot;</span>, <span class="number">85</span>, <span class="number">92</span>, <span class="number">88</span>)</span><br><span class="line">print_report(<span class="string">&quot;小红&quot;</span>, <span class="number">95</span>, <span class="number">87</span>, <span class="number">91</span>)</span><br></pre></td></tr></table></figure></div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2025/07/18/%5BOBS%5D%E7%A7%91%E7%A0%94-KAF%20Training/"><img class="fill" src="/gallery/Python.png" alt="KAF Training" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-07-18T10:15:28.000Z" title="7/18/2025, 6:15:28 PM">2025-07-18</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.404Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">2 minutes read (About 281 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/07/18/%5BOBS%5D%E7%A7%91%E7%A0%94-KAF%20Training/">KAF Training</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>For the figure, the each step corresponds to a processed batch(16).</p>
<h1 id="15k-dataset"><a href="#15k-dataset" class="headerlink" title="15k dataset"></a>15k dataset</h1><h2 id="Resdcn-FPNx2-↓-32-16-8-4"><a href="#Resdcn-FPNx2-↓-32-16-8-4" class="headerlink" title="Resdcn + FPNx2 (↓:32,16,8,4)"></a>Resdcn + FPNx2 (↓:32,16,8,4)</h2><h3 id="18-layer"><a href="#18-layer" class="headerlink" title="18 layer"></a>18 layer</h3><h4 id="with-warm-up-and-cosine-schedule"><a href="#with-warm-up-and-cosine-schedule" class="headerlink" title="with warm-up and cosine schedule"></a>with warm-up and cosine schedule</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python train.py --log_name resdcn18_all \</span><br><span class="line">                --data_dir ~/cyl/Data/PSR_final \</span><br><span class="line">                --<span class="built_in">arch</span> resdcn_18 \</span><br><span class="line">                --lr 1e-5 \</span><br><span class="line">                --batch_size 36 \</span><br><span class="line">                --num_epochs 90 --num_workers 0 --log_interval 5</span><br></pre></td></tr></table></figure>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250724102830.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250724102830.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250724102924.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250724102924.png" alt="" title=""></a></div>
### 50 layer
#### with warm-up and cosine schedule
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python train.py --log_name resdcn50_all \</span><br><span class="line">                --data_dir ~/cyl/Data/PSR_final \</span><br><span class="line">                --<span class="built_in">arch</span> resdcn_50 \</span><br><span class="line">                --lr 1e-5 \</span><br><span class="line">                --batch_size 24 \</span><br><span class="line">                --num_epochs 90 --num_workers 0 --log_interval 5</span><br></pre></td></tr></table></figure>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250723143030.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250723143030.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250723143124.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250723143124.png" alt="" title=""></a></div>
### 101 layer
#### Use PSR dataset before remove bg samples (12415 training samples)
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python train.py --log_name resdcn_all \</span><br><span class="line">                --data_dir ~/cyl/Data/PSR_final \</span><br><span class="line">                --<span class="built_in">arch</span> resdcn_101 \</span><br><span class="line">                --lr 5e-5 \</span><br><span class="line">                --lr_step 40,70 \</span><br><span class="line">                --batch_size 16 \</span><br><span class="line">                --num_epochs 90 --num_workers 0 --log_interval 5</span><br></pre></td></tr></table></figure>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250718104410.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250718104410.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250718105745.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250718105745.png" alt="" title=""></a></div>
#### Use PSR dataset after remove bg samples (11729 samples)
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python train.py --log_name resdcn_all \</span><br><span class="line">                --data_dir ~/cyl/Data/PSR_final \</span><br><span class="line">                --<span class="built_in">arch</span> resdcn_101 \</span><br><span class="line">                --lr 5e-5 \</span><br><span class="line">                --lr_step 40,70 \</span><br><span class="line">                --batch_size 16 \</span><br><span class="line">                --num_epochs 90 --num_workers 0 --log_interval 5</span><br></pre></td></tr></table></figure>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250720155929.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250720155929.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250720155953.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250720155953.png" alt="" title=""></a></div>

<h2 id="HRNet-↓-4-4-4-4"><a href="#HRNet-↓-4-4-4-4" class="headerlink" title="HRNet (↓:4,4,4,4)"></a>HRNet (↓:4,4,4,4)</h2><h3 id="Use-PSR-dataset-after-remove-bg-samples-11729-samples"><a href="#Use-PSR-dataset-after-remove-bg-samples-11729-samples" class="headerlink" title="Use PSR dataset after remove bg samples (11729 samples)"></a>Use PSR dataset after remove bg samples (11729 samples)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python train.py --log_name hrnet_all \</span><br><span class="line">                --data_dir ~/cyl/Data/PSR_final \</span><br><span class="line">                --<span class="built_in">arch</span> hrnet \</span><br><span class="line">                --lr 5e-5 \</span><br><span class="line">                --lr_step 40,70 \</span><br><span class="line">                --batch_size 16 \</span><br><span class="line">                --num_epochs 90 --num_workers 0 --log_interval 5</span><br></pre></td></tr></table></figure>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250721105627.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250721105627.png" alt="" title=""></a></div>
## Hourglass (↓:4,4,4,4) 
### Use PSR dataset after remove bg samples (11729 samples)
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python train.py --log_name hg_all \</span><br><span class="line">                --data_dir ~/cyl/Data/PSR_final \</span><br><span class="line">                --<span class="built_in">arch</span> hourglass_small \</span><br><span class="line">                --lr 5e-5 \</span><br><span class="line">                --lr_step 40,70 \</span><br><span class="line">                --batch_size 16 \</span><br><span class="line">                --num_epochs 90 --num_workers 0 --log_interval 5</span><br></pre></td></tr></table></figure>
<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250722101143.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250722101143.png" alt="" title=""></a></div>


<h1 id="25k-dataset"><a href="#25k-dataset" class="headerlink" title="25k dataset"></a>25k dataset</h1><h2 id="Resdcn-FPNx2-↓-32-16-8-4-1"><a href="#Resdcn-FPNx2-↓-32-16-8-4-1" class="headerlink" title="Resdcn+FPNx2 (↓:32,16,8,4)"></a>Resdcn+FPNx2 (↓:32,16,8,4)</h2><h3 id="50-layer"><a href="#50-layer" class="headerlink" title="50 layer"></a>50 layer</h3><div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250731144902.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250731144902.png" alt="" title=""></a></div>

<div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250731144922.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250731144922.png" alt="" title=""></a></div>

<h2 id="Resnet-pretrained-↓-32-16-8-4"><a href="#Resnet-pretrained-↓-32-16-8-4" class="headerlink" title="Resnet (pretrained) (↓:32,16,8,4)"></a>Resnet (pretrained) (↓:32,16,8,4)</h2><div class="post-content"><a href="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250801101738.png" title="" title=" class="gallery-item"><img src="/2025/07/18/[OBS]科研-KAF Training/Pasted_image_20250801101738.png" alt="" title=""></a></div></div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2025/05/23/%5BOBS%5D%E7%A7%91%E7%A0%94-Pixtral%2012B%20API%20Inference/"><img class="fill" src="/gallery/Python.png" alt="Pixtral 12B API Inference" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-05-23T14:48:49.000Z" title="5/23/2025, 10:48:49 PM">2025-05-23</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.400Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">3 minutes read (About 435 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/05/23/%5BOBS%5D%E7%A7%91%E7%A0%94-Pixtral%2012B%20API%20Inference/">Pixtral 12B API Inference</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>Repository:<br><a target="_blank" rel="noopener" href="https://github.com/PSGBOT/pixtral-12B-Inference">https://github.com/PSGBOT/pixtral-12B-Inference</a></p>
<h2 id="本地图片上传"><a href="#本地图片上传" class="headerlink" title="本地图片上传"></a>本地图片上传</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">encode_image</span>(<span class="params">image_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Encode the image to base64.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(image_path, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> image_file:</span><br><span class="line">            <span class="keyword">return</span> base64.b64encode(image_file.read()).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error: The file <span class="subst">&#123;image_path&#125;</span> was not found.&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:  <span class="comment"># Added general exception handling</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure>

<h2 id="Prompt"><a href="#Prompt" class="headerlink" title="Prompt"></a>Prompt</h2><h3 id="VLM物体描述的prompt"><a href="#VLM物体描述的prompt" class="headerlink" title="VLM物体描述的prompt:"></a>VLM物体描述的prompt:</h3><p>核心需要：准确定位物体所在方位，不把远景识别为物体，降低False Positive</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Focus on the area highlighted in green in the image.</span><br><span class="line"></span><br><span class="line">Step 1: Determine if the highlighted area represents a distinct, identifiable object or instance:</span><br><span class="line">- If the highlighted area is clearly a distinct object, proceed to Step 2.</span><br><span class="line">- If the highlighted area is abstract, ambiguous, or you cannot confidently identify it as a specific object (e.g., part of background, texture, partial view), respond with &quot;Valid: No&quot;.</span><br><span class="line"></span><br><span class="line">Step 2: If the highlighted area is a distinct object, provide:</span><br><span class="line">1. The specific name of the object (be precise and use technical terms when appropriate)</span><br><span class="line">2. The primary function or purpose of this object</span><br><span class="line">3. Any notable features visible in the highlighted area (no color description)</span><br><span class="line">4. If there is text visible on the object, include what it says</span><br><span class="line"></span><br><span class="line">Remember, if you&#x27;re uncertain about the highlighted area being a distinct object, respond only with &quot;Valid: No&quot;.</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<ul>
<li>Valid<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Valid: Yes</span><br><span class="line"></span><br><span class="line">1. The specific name of the object: Soap dispenser</span><br><span class="line">2. The primary function or purpose of this object: To dispense liquid soap or hand sanitizer.</span><br><span class="line">3. Notable features visible in the highlighted area:</span><br><span class="line">	- The dispenser has a pump mechanism at the top.</span><br><span class="line">	- The body of the dispenser is cylindrical.</span><br><span class="line">	- The material appears to be translucent plastic.</span><br><span class="line">4. There is no visible text on the object.</span><br></pre></td></tr></table></figure></li>
<li>invalid<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Valid: No</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="VLM输出-gt-Structured-Output"><a href="#VLM输出-gt-Structured-Output" class="headerlink" title="VLM输出-&gt;Structured Output"></a>VLM输出-&gt;Structured Output</h3><p>使用另一个LLM来对VLM输出的内容进行parse，转化成json文件, 通过mistral ai 提供的接口实现:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Instance</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    valid: <span class="built_in">str</span></span><br><span class="line">    name: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line">    feature: <span class="type">Optional</span>[<span class="type">List</span>[<span class="built_in">str</span>]] = Field(default_factory=<span class="built_in">list</span>)</span><br><span class="line">    usage: <span class="type">Optional</span>[<span class="type">List</span>[<span class="built_in">str</span>]] = Field(default_factory=<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_description_msg</span>(<span class="params">msg</span>):</span><br><span class="line">    message = [</span><br><span class="line">        &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;Extract the description information.&quot;</span>&#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: msg,</span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span> message</span><br><span class="line"></span><br><span class="line">chat_response = <span class="variable language_">self</span>.client.chat.parse(</span><br><span class="line">	model=<span class="variable language_">self</span>.llm,</span><br><span class="line">	messages=msg,</span><br><span class="line">	response_format=Instance,</span><br><span class="line">	max_tokens=<span class="variable language_">self</span>.llm_max_tokens,</span><br><span class="line">	temperature=<span class="variable language_">self</span>.llm_temperature,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">return</span> json.loads(chat_response.choices[<span class="number">0</span>].message.content)</span><br></pre></td></tr></table></figure></div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2025/04/23/%5BOBS%5D%E7%A7%91%E7%A0%94-FCSGG%20Repo%20Explanation/"><img class="fill" src="/gallery/Python.png" alt="FCSGG Repo Explanation" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-04-23T14:34:47.000Z" title="4/23/2025, 10:34:47 PM">2025-04-23</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.411Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">6 minutes read (About 870 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/04/23/%5BOBS%5D%E7%A7%91%E7%A0%94-FCSGG%20Repo%20Explanation/">FCSGG Repo Explanation</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="FCSGG-Repository-Summary"><a href="#FCSGG-Repository-Summary" class="headerlink" title="FCSGG Repository Summary"></a>FCSGG Repository Summary</h1><p>FCSGG (Fully Convolutional Scene Graph Generation) is a PyTorch implementation of the paper “Fully Convolutional Scene Graph Generation” published in CVPR 2021. The project focuses on scene graph generation, which is the task of detecting objects in an image and identifying the relationships between them.</p>
<h2 id="Core-Components"><a href="#Core-Components" class="headerlink" title="Core Components:"></a>Core Components:</h2><ol>
<li><p><strong>Architecture</strong>: </p>
<ul>
<li>Built on Detectron2, a popular object detection framework by Facebook</li>
<li>Uses a one-stage detector approach (CenterNet) as the meta-architecture</li>
<li>Supports various backbones including ResNet, HRNet (High-Resolution Network), Hourglass networks, and DLA</li>
</ul>
</li>
<li><p><strong>Key Features</strong>:</p>
<ul>
<li>Fully convolutional approach to scene graph generation</li>
<li>Multiple backbone options with different feature pyramid networks (FPN, BiFPN, HRFPN)</li>
<li>Various head designs including multiscale heads and attention mechanisms</li>
<li>Support for different input resolutions and training strategies</li>
</ul>
</li>
<li><p><strong>Dataset</strong>:</p>
<ul>
<li>Primarily designed for the <strong>Visual Genome dataset</strong>, a large-scale dataset for scene understanding</li>
<li>Includes custom data loaders and preprocessing for scene graph generation</li>
</ul>
</li>
<li><p><strong>Model Components</strong>:</p>
<ul>
<li><strong>Backbones</strong>: Various CNN architectures (ResNet, HRNet, Hourglass, DLA)</li>
<li><strong>Necks</strong>: Feature pyramid networks and variants (FPN, BiFPN, HRFPN, Trident)</li>
<li><strong>Heads</strong>: Detection and relationship prediction heads</li>
<li><strong>Loss Functions</strong>: Custom losses for object detection and relationship prediction</li>
</ul>
</li>
<li><p><strong>Utilities</strong>:</p>
<ul>
<li>Visualization tools for scene graphs</li>
<li>Evaluation metrics for scene graph generation</li>
<li>Training and inference scripts</li>
</ul>
</li>
</ol>
<h2 id="Project-Structure"><a href="#Project-Structure" class="headerlink" title="Project Structure:"></a>Project Structure:</h2><ul>
<li><p><strong>fcsgg&#x2F;</strong>: Main module containing model implementation</p>
<ul>
<li><strong>modeling&#x2F;</strong>: Neural network architecture components<ul>
<li><strong>backbone&#x2F;</strong>: Feature extraction networks</li>
<li><strong>necks&#x2F;</strong>: Feature pyramid networks</li>
<li><strong>heads&#x2F;</strong>: Detection and relationship prediction heads</li>
<li><strong>meta_arch&#x2F;</strong>: High-level model architecture (CenterNet)</li>
</ul>
</li>
<li><strong>data&#x2F;</strong>: Dataset handling and preprocessing</li>
<li><strong>evaluation&#x2F;</strong>: Metrics and evaluation code</li>
<li><strong>utils&#x2F;</strong>: Helper functions and utilities</li>
<li><strong>layers&#x2F;</strong>: Custom neural network layers</li>
<li><strong>structures&#x2F;</strong>: Data structures for scene graphs</li>
</ul>
</li>
<li><p><strong>configs&#x2F;</strong>: Configuration files for different model variants</p>
</li>
<li><p><strong>tools&#x2F;</strong>: Training, evaluation, and visualization scripts</p>
</li>
<li><p><strong>GraphViz&#x2F;</strong>: Visualization tools for scene graphs</p>
</li>
</ul>
<h2 id="Key-Innovations"><a href="#Key-Innovations" class="headerlink" title="Key Innovations:"></a>Key Innovations:</h2><p>The project implements a fully convolutional approach to scene graph generation, which differs from traditional two-stage methods. Instead of first detecting objects and then predicting relationships, it uses a one-stage detector to simultaneously predict objects and their relationships in a fully convolutional manner.</p>
<h2 id="Benchmarks"><a href="#Benchmarks" class="headerlink" title="Benchmarks:"></a>Benchmarks:</h2><p>The repository provides several pre-trained models with different backbones:</p>
<ol>
<li>HRNetW32-1S</li>
<li>ResNet50-4S-FPN×2</li>
<li>HRNetW48-5S-FPN×2</li>
</ol>
<p>These models achieve competitive performance on the Visual Genome dataset for scene graph generation tasks.</p>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage:"></a>Usage:</h2><p>The project provides tools for training, evaluation, and visualization of scene graphs. It requires the Visual Genome dataset and can be run using Docker or directly with PyTorch.</p>
<p>In summary, FCSGG is a comprehensive implementation of a state-of-the-art approach to scene graph generation using fully convolutional networks, offering various model architectures and training configurations.</p>
<h1 id="How-Detectron2-is-Used-in-FCSGG"><a href="#How-Detectron2-is-Used-in-FCSGG" class="headerlink" title="How Detectron2 is Used in FCSGG"></a>How Detectron2 is Used in FCSGG</h1><p>FCSGG is built on top of Detectron2, Facebook’s object detection framework, and leverages many of its components while extending it for scene graph generation. Here’s a detailed breakdown:</p>
<h2 id="1-Core-Architecture-Integration"><a href="#1-Core-Architecture-Integration" class="headerlink" title="1. Core Architecture Integration"></a>1. Core Architecture Integration</h2><ul>
<li><p><strong>Meta Architecture</strong>: FCSGG registers a custom meta architecture called “CenterNet” with Detectron2’s <code>META_ARCH_REGISTRY</code>. This extends Detectron2’s modular architecture system while maintaining compatibility.</p>
</li>
<li><p><strong>Backbone Networks</strong>: FCSGG uses Detectron2’s backbone networks (ResNet, etc.) directly and also implements custom backbones like HRNet while following Detectron2’s backbone interface.</p>
</li>
<li><p><strong>Feature Pyramid Networks (FPN)</strong>: The repository uses Detectron2’s FPN implementation and extends it with custom variants like BiFPN and HRFPN.</p>
</li>
</ul>
<h2 id="2-Configuration-System"><a href="#2-Configuration-System" class="headerlink" title="2. Configuration System"></a>2. Configuration System</h2><ul>
<li><p><strong>YAML Configuration</strong>: FCSGG adopts Detectron2’s YAML-based configuration system, extending it with custom configurations for scene graph generation through <code>add_fcsgg_config()</code>.</p>
</li>
<li><p><strong>Command Line Arguments</strong>: The training script uses Detectron2’s <code>default_argument_parser()</code> to maintain the same command-line interface.</p>
</li>
</ul>
<h2 id="3-Data-Handling"><a href="#3-Data-Handling" class="headerlink" title="3. Data Handling"></a>3. Data Handling</h2><ul>
<li><p><strong>Dataset Registration</strong>: Visual Genome dataset is registered with Detectron2’s <code>DatasetCatalog</code> and <code>MetadataCatalog</code>, making it available through Detectron2’s data loading pipeline.</p>
</li>
<li><p><strong>Custom Dataset Mapper</strong>: FCSGG implements a custom <code>DatasetMapper</code> class that extends Detectron2’s mapper to handle scene graph annotations.</p>
</li>
<li><p><strong>Data Loaders</strong>: The repository uses Detectron2’s <code>build_detection_train_loader</code> and <code>build_detection_test_loader</code> with custom mappers.</p>
</li>
</ul>
<h2 id="4-Training-and-Evaluation"><a href="#4-Training-and-Evaluation" class="headerlink" title="4. Training and Evaluation"></a>4. Training and Evaluation</h2><ul>
<li><p><strong>Trainer Class</strong>: FCSGG extends Detectron2’s <code>DefaultTrainer</code> class to customize the training loop, evaluation metrics, and data loading.</p>
</li>
<li><p><strong>Checkpointing</strong>: The repository uses Detectron2’s <code>DetectionCheckpointer</code> for model saving and loading.</p>
</li>
<li><p><strong>Distributed Training</strong>: FCSGG leverages Detectron2’s distributed training utilities through <code>detectron2.utils.comm</code> and the <code>launch</code> function.</p>
</li>
<li><p><strong>Custom Evaluators</strong>: The repository implements a custom <code>VGEvaluator</code> for scene graph evaluation while following Detectron2’s evaluator interface.</p>
</li>
</ul>
<h2 id="5-Visualization-and-Logging"><a href="#5-Visualization-and-Logging" class="headerlink" title="5. Visualization and Logging"></a>5. Visualization and Logging</h2><ul>
<li><p><strong>Event Storage</strong>: FCSGG uses Detectron2’s event storage system for logging metrics during training.</p>
</li>
<li><p><strong>Visualization Tools</strong>: The repository leverages Detectron2’s visualization utilities for debugging and result analysis.</p>
</li>
</ul>
<h2 id="6-Extensions-for-Scene-Graph-Generation"><a href="#6-Extensions-for-Scene-Graph-Generation" class="headerlink" title="6. Extensions for Scene Graph Generation"></a>6. Extensions for Scene Graph Generation</h2><ul>
<li><p><strong>Custom Heads</strong>: While using Detectron2’s architecture, FCSGG implements custom prediction heads for relationship detection.</p>
</li>
<li><p><strong>Scene Graph Structures</strong>: The repository defines custom data structures for scene graphs that integrate with Detectron2’s <code>Instances</code> class.</p>
</li>
<li><p><strong>Loss Functions</strong>: FCSGG implements specialized loss functions for scene graph generation while maintaining compatibility with Detectron2’s loss computation framework.</p>
</li>
</ul>
<h2 id="7-Installation-and-Dependencies"><a href="#7-Installation-and-Dependencies" class="headerlink" title="7. Installation and Dependencies"></a>7. Installation and Dependencies</h2><ul>
<li><p><strong>Submodule Integration</strong>: Detectron2 is included as a Git submodule, ensuring version compatibility.</p>
</li>
<li><p><strong>Build Process</strong>: The installation process includes building Detectron2 from source to ensure proper integration.</p>
</li>
</ul>
<p>In summary, FCSGG uses Detectron2 as its foundation, leveraging its modular architecture, data handling, training infrastructure, and configuration system while extending it with custom components for scene graph generation. This approach allows FCSGG to benefit from Detectron2’s robust implementation and optimizations while adding specialized functionality for relationship detection between objects.</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2025/04/22/%5BOBS%5D%E7%A7%91%E7%A0%94-Detectron/"><img class="fill" src="/gallery/Python.png" alt="Detectron" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-04-22T14:13:52.000Z" title="4/22/2025, 10:13:52 PM">2025-04-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.397Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">a few seconds read (About 0 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/04/22/%5BOBS%5D%E7%A7%91%E7%A0%94-Detectron/">Detectron</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"></div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2025/04/22/%5BOBS%5D%E7%A7%91%E7%A0%94-FCSGG%20Repository%20Application/"><img class="fill" src="/gallery/Python.png" alt="FCSGG Repository Application" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-04-22T10:08:07.000Z" title="4/22/2025, 6:08:07 PM">2025-04-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.413Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">4 minutes read (About 570 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/04/22/%5BOBS%5D%E7%A7%91%E7%A0%94-FCSGG%20Repository%20Application/">FCSGG Repository Application</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>Official repo:<br><a target="_blank" rel="noopener" href="https://github.com/liuhengyue/fcsgg">https://github.com/liuhengyue/fcsgg</a><br>Our repo:<br><a target="_blank" rel="noopener" href="https://github.com/PSGBOT/KAF-Generation">https://github.com/PSGBOT/KAF-Generation</a></p>
<p>My venv: fcsgg</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h3 id="Environment-Preparation"><a href="#Environment-Preparation" class="headerlink" title="Environment Preparation"></a>Environment Preparation</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:liuhengyue/fcsgg.git</span><br><span class="line"><span class="built_in">cd</span> fcsgg</span><br><span class="line">git submodule init</span><br><span class="line">git submodule update</span><br><span class="line">conda create --name fcsgg</span><br><span class="line">conda create -n fcsgg python=3.10</span><br><span class="line">conda install nvidia/label/cuda-11.8.0::cuda-toolkit -c nvidia/label/cuda-11.8.0</span><br><span class="line">conda install cudatoolkit</span><br><span class="line">pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118</span><br><span class="line"></span><br><span class="line"><span class="comment"># for building detectron</span></span><br><span class="line">conda install -c conda-forge gcc=11.2.0</span><br><span class="line">conda install -c conda-forge gxx=11.2.0</span><br><span class="line"></span><br><span class="line">conda <span class="built_in">env</span> config vars <span class="built_in">set</span> LD_LIBRARY_PATH=<span class="string">&quot;/home/cyl/miniconda3/envs/fcsgg/lib/&quot;</span></span><br><span class="line">conda <span class="built_in">env</span> config vars <span class="built_in">set</span> CPATH=<span class="string">&quot;/home/cyl/miniconda3/envs/fcsgg/include/&quot;</span></span><br><span class="line">conda <span class="built_in">env</span> config vars <span class="built_in">set</span> CUDA_HOME=<span class="string">&quot;/home/cyl/miniconda3/envs/fcsgg/&quot;</span></span><br><span class="line"></span><br><span class="line">conda deactivate</span><br><span class="line">conda activate fcsgg</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> CC=<span class="variable">$CONDA_PREFIX</span>/bin/gcc</span><br><span class="line"><span class="built_in">export</span> CXX=<span class="variable">$CONDA_PREFIX</span>/bin/g++</span><br><span class="line"></span><br><span class="line">pip install -r requirements.txt</span><br><span class="line">python -m pip install -e detectron2</span><br></pre></td></tr></table></figure>

<h3 id="Downloads"><a href="#Downloads" class="headerlink" title="Downloads"></a>Downloads</h3><p>Datasets:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/Reconst</span><br><span class="line">wget https://cs.stanford.edu/people/rak248/VG_100K_2/images.zip -P ./Data/vg/</span><br><span class="line">wget https://cs.stanford.edu/people/rak248/VG_100K_2/images2.zip -P ./Data/vg/</span><br><span class="line">unzip -j ./Data/vg/images.zip -d ./Data/vg/VG_100K</span><br><span class="line">unzip -j ./Data/vg/images2.zip -d ./Data/vg/VG_100K</span><br></pre></td></tr></table></figure>
<p>Download the <a target="_blank" rel="noopener" href="https://1drv.ms/u/s!AmRLLNf6bzcir8xf9oC3eNWlVMTRDw?e=63t7Ed">scene graphs</a> and extract them to <code>datasets/vg/VG-SGG-with-attri.h5</code>.</p>
<h3 id="Issues"><a href="#Issues" class="headerlink" title="Issues"></a>Issues</h3><h4 id="1"><a href="#1" class="headerlink" title="1"></a>1</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AttributeError: module <span class="string">&#x27;PIL.Image&#x27;</span> has no attribute <span class="string">&#x27;LINEAR&#x27;</span>. Did you mean: <span class="string">&#x27;BILINEAR&#x27;</span>?</span><br></pre></td></tr></table></figure>
<p>LINEAR-&gt; BILINEAR: <a target="_blank" rel="noopener" href="https://github.com/PSGBOT/detectron2/commit/c2a93d67d55adc19a65312a3f9d5e5c58d17be9d">commit</a></p>
<h4 id="2"><a href="#2" class="headerlink" title="2"></a>2</h4><p>在尝试训练的过程中报错：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  File <span class="string">&quot;/home/cyl/Reconst/fcsgg/fcsgg/data/detection_utils.py&quot;</span>, line 432, <span class="keyword">in</span> generate_score_map</span><br><span class="line">    masked_fmap = torch.max(masked_fmap, gaussian_mask * k)</span><br><span class="line">RuntimeError: The size of tensor a (55) must match the size of tensor b (56) at non-singleton dimension 1</span><br></pre></td></tr></table></figure>
<p>modify <code>detection_utils.py</code>: <a target="_blank" rel="noopener" href="https://github.com/PSGBOT/KAF-Generation/commit/0f8533d9662d209e1a7f81a07c54c3c68bb9a49f">commit</a></p>
<h2 id="Training"><a href="#Training" class="headerlink" title="Training"></a>Training</h2><p>首先更改训练的配置文件<code>./config/quick_schedules/Quick-FCSGG-HRNet-W32.yaml</code>, (原文件使用预训练的参数)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MODEL:</span><br><span class="line">  META_ARCHITECTURE: <span class="string">&quot;CenterNet&quot;</span></span><br><span class="line">  HRNET:</span><br><span class="line">    WEIGHTS: <span class="string">&quot;output/FasterR-CNN-HR32-3x.pth&quot;</span></span><br></pre></td></tr></table></figure>
<p>更改为train from scratch</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MODEL:</span><br><span class="line">  META_ARCHITECTURE: <span class="string">&quot;CenterNet&quot;</span></span><br><span class="line">  HRNET:</span><br><span class="line">    WEIGHTS: <span class="string">&quot;&quot;</span>  <span class="comment"># Empty string to train from scratch</span></span><br></pre></td></tr></table></figure>

<p>再运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python tools/train_net.py --num-gpus 1 --config-file configs/quick_schedules/Quick-FCSGG-HRNet-W32.yaml</span><br></pre></td></tr></table></figure>

<p>成功训练✌</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">[04/23 10:21:01] d2.utils.events INFO:  eta: 0:05:37  iter: 1159  total_loss: 1.042  loss_cls: 0.7593  loss_box_wh: 0.08827  loss_center_reg: 0.02485  loss_raf: 0.1754    <span class="keyword">time</span>: 0.4042  last_time: 0.4519  data_time: 0.0043  last_data_time: 0.0044   lr: 0.001  max_mem: 4141M</span><br><span class="line">[04/23 10:21:09] d2.utils.events INFO:  eta: 0:05:29  iter: 1179  total_loss: 1.028  loss_cls: 0.7208  loss_box_wh: 0.09246  loss_center_reg: 0.02669  loss_raf: 0.1625    <span class="keyword">time</span>: 0.4042  last_time: 0.4035  data_time: 0.0041  last_data_time: 0.0044   lr: 0.001  max_mem: 4141M</span><br><span class="line">[04/23 10:21:17] d2.utils.events INFO:  eta: 0:05:21  iter: 1199  total_loss: 1.01  loss_cls: 0.671  loss_box_wh: 0.1038  loss_center_reg: 0.02432  loss_raf: 0.1635    <span class="keyword">time</span>: 0.4042  last_time: 0.3943  data_time: 0.0042  last_data_time: 0.0043   lr: 0.001  max_mem: 4141M</span><br><span class="line">[04/23 10:21:25] d2.utils.events INFO:  eta: 0:05:13  iter: 1219  total_loss: 0.9737  loss_cls: 0.6887  loss_box_wh: 0.0929  loss_center_reg: 0.02574  loss_raf: 0.1749    <span class="keyword">time</span>: 0.4041  last_time: 0.4101  data_time: 0.0041  last_data_time: 0.0042   lr: 0.001  max_mem: 4141M</span><br><span class="line">...</span><br></pre></td></tr></table></figure>


<h2 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h2><p>See [[FCSGG Repo Explanation]]</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2025/04/11/%5BOBS%5DPython-OmegaConf%20Python%20Package/"><img class="fill" src="/gallery/Python.png" alt="OmegaConf Python Package" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-04-10T16:02:15.000Z" title="4/11/2025, 12:02:15 AM">2025-04-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.472Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">a minute read (About 166 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/04/11/%5BOBS%5DPython-OmegaConf%20Python%20Package/">OmegaConf Python Package</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p><a target="_blank" rel="noopener" href="https://omegaconf.readthedocs.io/en/2.3_branch/">docs</a></p>
<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install omegaconf</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> omegaconf <span class="keyword">import</span> OmegaConf</span><br></pre></td></tr></table></figure>

<h2 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h2><p>You can create OmegaConf objects from multiple sources.</p>
<h3 id="From-dict"><a href="#From-dict" class="headerlink" title="From dict"></a>From <code>dict</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">conf = OmegaConf.create(&#123;<span class="string">&quot;k&quot;</span> : <span class="string">&quot;v&quot;</span>, <span class="string">&quot;list&quot;</span> : [<span class="number">1</span>, &#123;<span class="string">&quot;a&quot;</span>: <span class="string">&quot;1&quot;</span>, <span class="string">&quot;b&quot;</span>: <span class="string">&quot;2&quot;</span>, <span class="number">3</span>: <span class="string">&quot;c&quot;</span>&#125;]&#125;)</span><br><span class="line"><span class="built_in">print</span>(OmegaConf.to_yaml(conf))</span><br><span class="line"></span><br><span class="line">k: v</span><br><span class="line"><span class="built_in">list</span>:</span><br><span class="line">- <span class="number">1</span></span><br><span class="line">- a: <span class="string">&#x27;1&#x27;</span></span><br><span class="line">  b: <span class="string">&#x27;2&#x27;</span></span><br><span class="line">  <span class="number">3</span>: c</span><br></pre></td></tr></table></figure>

<h3 id="From-list"><a href="#From-list" class="headerlink" title="From list"></a>From <code>list</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">conf = OmegaConf.create([<span class="number">1</span>, &#123;<span class="string">&quot;a&quot;</span>:<span class="number">10</span>, <span class="string">&quot;b&quot;</span>: &#123;<span class="string">&quot;a&quot;</span>:<span class="number">10</span>, <span class="number">123</span>: <span class="string">&quot;int_key&quot;</span>&#125;&#125;])</span><br><span class="line"><span class="built_in">print</span>(OmegaConf.to_yaml(conf))</span><br><span class="line"></span><br><span class="line">- <span class="number">1</span></span><br><span class="line">- a: <span class="number">10</span></span><br><span class="line">  b:</span><br><span class="line">    a: <span class="number">10</span></span><br><span class="line">    <span class="number">123</span>: int_key</span><br></pre></td></tr></table></figure>

<h3 id="From-yaml"><a href="#From-yaml" class="headerlink" title="From yaml"></a>From <code>yaml</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">conf = OmegaConf.load(<span class="string">&#x27;source/example.yaml&#x27;</span>)</span><br><span class="line"><span class="comment"># Output is identical to the YAML file</span></span><br><span class="line"><span class="built_in">print</span>(OmegaConf.to_yaml(conf))</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: <span class="number">80</span></span><br><span class="line">log:</span><br><span class="line">  file: ???</span><br><span class="line">  rotation: <span class="number">3600</span></span><br><span class="line">users:</span><br><span class="line">- user1</span><br><span class="line">- user2</span><br></pre></td></tr></table></figure>

<h3 id="From-dot-list"><a href="#From-dot-list" class="headerlink" title="From dot-list"></a>From <code>dot-list</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dot_list = [<span class="string">&quot;a.aa.aaa=1&quot;</span>, <span class="string">&quot;a.aa.bbb=2&quot;</span>, <span class="string">&quot;a.bb.aaa=3&quot;</span>, <span class="string">&quot;a.bb.bbb=4&quot;</span>]</span><br><span class="line">conf = OmegaConf.from_dotlist(dot_list)</span><br><span class="line"><span class="built_in">print</span>(OmegaConf.to_yaml(conf))</span><br><span class="line"></span><br><span class="line">a:</span><br><span class="line">  aa:</span><br><span class="line">    aaa: <span class="number">1</span></span><br><span class="line">    bbb: <span class="number">2</span></span><br><span class="line">  bb:</span><br><span class="line">    aaa: <span class="number">3</span></span><br><span class="line">    bbb: <span class="number">4</span></span><br></pre></td></tr></table></figure>

<h3 id="From-command-line-arguments"><a href="#From-command-line-arguments" class="headerlink" title="From command line arguments"></a>From command line arguments</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sys.argv = [<span class="string">&#x27;your-program.py&#x27;</span>, <span class="string">&#x27;server.port=82&#x27;</span>, <span class="string">&#x27;log.file=log2.txt&#x27;</span>]</span><br><span class="line">conf = OmegaConf.from_cli()</span><br><span class="line"><span class="built_in">print</span>(OmegaConf.to_yaml(conf))</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: <span class="number">82</span></span><br><span class="line">log:</span><br><span class="line">  file: log2.txt</span><br></pre></td></tr></table></figure>




</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2025/04/07/%5BOBS%5Dlinux-SJTU-HPC-SJTU-HPC%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"><img class="fill" src="/gallery/Linux.png" alt="SJTU-HPC基本操作" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-04-06T16:12:37.000Z" title="4/7/2025, 12:12:37 AM">2025-04-07</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.514Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">4 minutes read (About 616 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/04/07/%5BOBS%5Dlinux-SJTU-HPC-SJTU-HPC%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">SJTU-HPC基本操作</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p><a target="_blank" rel="noopener" href="https://docs.hpc.sjtu.edu.cn/">官方文档</a></p>
<h2 id="LMOD软件管理"><a href="#LMOD软件管理" class="headerlink" title="LMOD软件管理"></a><code>LMOD</code>软件管理</h2><p><a target="_blank" rel="noopener" href="https://lmod.readthedocs.io/en/latest/010_user.html">https://lmod.readthedocs.io/en/latest/010_user.html</a></p>
<p>交大hpc使用<code>lmod</code>来管理用户软件，每一次重新登陆都会重置module，需要将软件重新load。<br>常用指令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ml <span class="comment"># list these loaded modules</span></span><br><span class="line">ml miniconda3 <span class="comment"># load the miniconda3 module</span></span><br><span class="line">ml -miniconda3 <span class="comment"># unload the miniconda3 module</span></span><br><span class="line">module spider <span class="comment"># inspect the possible modules that can be loaded</span></span><br><span class="line">module spider cuda <span class="comment"># show available cuda versions</span></span><br></pre></td></tr></table></figure>

<h2 id="oh-my-zsh更好的shell"><a href="#oh-my-zsh更好的shell" class="headerlink" title="oh-my-zsh更好的shell"></a><code>oh-my-zsh</code>更好的shell</h2><p>hpc默认已安装zsh, 通过omzsh的安装脚本进行安装，并安装插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CHSH=no  <span class="comment"># 避免它自动切换默认 shell（HPC 通常不允许）</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git \</span><br><span class="line">  <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions \</span><br><span class="line">  <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span><br><span class="line">git <span class="built_in">clone</span> --depth 1 https://github.com/junegunn/fzf.git ~/.fzf</span><br><span class="line">~/.fzf/install</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/psprint/zsh-navigation-tools ~/.zsh-navigation-tools</span><br><span class="line"></span><br><span class="line"><span class="comment">## vim add configuration in `.zshrc`</span></span><br><span class="line">plugins=(</span><br><span class="line">  git</span><br><span class="line">  zsh-navigation-tools</span><br><span class="line">  rails</span><br><span class="line">  ruby</span><br><span class="line">  zsh-syntax-highlighting</span><br><span class="line">  zsh-autosuggestions</span><br><span class="line">)</span><br><span class="line"><span class="built_in">source</span> <span class="variable">$&#123;(q-)ZSH_CUSTOM:-<span class="variable">$ZSH</span>/custom&#125;</span>/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</span><br><span class="line"></span><br><span class="line"><span class="comment">## :wq</span></span><br></pre></td></tr></table></figure>

<h2 id="nvim-更好的编辑器"><a href="#nvim-更好的编辑器" class="headerlink" title="nvim 更好的编辑器"></a><code>nvim</code> 更好的编辑器</h2><p>因为在服务器上没有<code>sudo</code>权限所以需要手动编译</p>
<p>首先使用conda创建编译环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n nvim-build cmake libtool gettext curl unzip ninja gcc gxx -y -c conda-forge</span><br></pre></td></tr></table></figure>

<p>clone &amp; build</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/neovim/neovim.git</span><br><span class="line"><span class="built_in">cd</span> neovim</span><br><span class="line">git checkout stable</span><br><span class="line">make CMAKE_BUILD_TYPE=Release</span><br></pre></td></tr></table></figure>

<h2 id="Tricks"><a href="#Tricks" class="headerlink" title="Tricks"></a>Tricks</h2><h3 id="交互式计算资源"><a href="#交互式计算资源" class="headerlink" title="交互式计算资源"></a>交互式计算资源</h3><p>某些情况下需要进行并行编译，编译需要耗费大量资源，并不一定可以在登录节点使用：</p>
<div class="post-content"><a href="/2025/04/07/[OBS]linux-SJTU-HPC-SJTU-HPC基本操作/Pasted_image_20250408153328.png" title="" title=" class="gallery-item"><img src="/2025/04/07/[OBS]linux-SJTU-HPC-SJTU-HPC基本操作/Pasted_image_20250408153328.png" alt="" title=""></a></div>
在这种情况下使用提交作业的方式较为低效，可以申请交互式计算资源
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">srun -p cpu -n 4 --pty /bin/bash</span><br></pre></td></tr></table></figure>
example:
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">(base) chenyulin@pilogin2 ~&gt; srun -p cpu -n 4 --pty /bin/bash</span><br><span class="line">srun: job 43090290 queued and waiting <span class="keyword">for</span> resources</span><br><span class="line">srun: job 43090290 has been allocated resources</span><br><span class="line">(base) chenyulin@cas242 ~&gt; <span class="built_in">ls</span></span><br><span class="line">condalist.txt  dinov2  <span class="built_in">log</span>  test.slurm</span><br><span class="line">(base) chenyulin@cas242 ~&gt; <span class="built_in">cd</span> dinov2        </span><br><span class="line">(base) chenyulin@cas242 ~/dinov2&gt; conda activate dinov2</span><br><span class="line">(dinov2) chenyulin@cas242 ~/dinov2&gt; <span class="built_in">export</span> CC=<span class="variable">$CONDA_PREFIX</span>/bin/gcc                       main</span><br><span class="line"><span class="built_in">export</span> CXX=<span class="variable">$CONDA_PREFIX</span>/bin/g++</span><br><span class="line">(dinov2) chenyulin@cas242 ~/dinov2&gt; <span class="built_in">which</span> g++                                             main</span><br><span class="line">~/.conda/envs/dinov2/bin/g++</span><br><span class="line">(dinov2) chenyulin@cas242 ~/dinov2&gt; vim conda_cyl.yaml                                    main</span><br><span class="line">(dinov2) chenyulin@cas242 ~/dinov2&gt; conda <span class="built_in">env</span> update -f conda_cyl.yaml                    main</span><br><span class="line">Retrieving notices: ...working... <span class="keyword">done</span></span><br><span class="line">Channels:</span><br><span class="line"> - xformers</span><br><span class="line"> - pytorch</span><br><span class="line"> - nvidia</span><br><span class="line"> - conda-forge</span><br><span class="line"> - defaults</span><br><span class="line"> - nvidia/label/cuda-11.7.0</span><br><span class="line">Platform: linux-64</span><br><span class="line">Collecting package metadata (repodata.json): <span class="keyword">done</span></span><br><span class="line">Solving environment: <span class="keyword">done</span></span><br><span class="line">Installing pip dependencies: |</span><br></pre></td></tr></table></figure>

<h2 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h2><h3 id="本地向云端传输"><a href="#本地向云端传输" class="headerlink" title="本地向云端传输"></a>本地向云端传输</h3><p>使用hpc studio传输<br><a target="_blank" rel="noopener" href="https://studio.hpc.sjtu.edu.cn/pun/sys/dashboard/files/fs//lustre/home/acct-umjbyy/chenyulin/Data">https://studio.hpc.sjtu.edu.cn/pun/sys/dashboard/files/fs//lustre/home/acct-umjbyy/chenyulin/Data</a></p>
<h3 id="云端之间互相传输"><a href="#云端之间互相传输" class="headerlink" title="云端之间互相传输"></a>云端之间互相传输</h3><p>例如拷贝conda环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -r /lustre/home/acct-umjbyy/chenyulin/.conda /dssg/home/acct-umjbyy/chenyulin/</span><br></pre></td></tr></table></figure>



</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2025/03/31/%5BOBS%5D%E7%A7%91%E7%A0%94-DINOv2%20Repository%20Application/"><img class="fill" src="/gallery/Linux.png" alt="DINOv2 Repository Application" referrerpolicy="no-referrer"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-03-31T11:25:46.000Z" title="3/31/2025, 7:25:46 PM">2025-03-31</time></span><span class="level-item">Updated&nbsp;<time dateTime="2026-02-14T13:35:59.402Z" title="2/14/2026, 9:35:59 PM">2026-02-14</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">2 minutes read (About 236 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/03/31/%5BOBS%5D%E7%A7%91%E7%A0%94-DINOv2%20Repository%20Application/">DINOv2 Repository Application</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>Repository: </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/facebookresearch/dinov2">https://github.com/facebookresearch/dinov2</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/itsprakhar/Downstream-Dinov2">https://github.com/itsprakhar/Downstream-Dinov2</a></li>
</ul>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>official:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="built_in">env</span> create -f conda.yaml</span><br></pre></td></tr></table></figure>

<p>不建议使用official的<code>conda.yaml</code>, 使用更改后的<code>conda_cyl.yaml</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">pip install torch==2.0.0 torchvision==0.15.1 torchaudio==2.0.1</span><br><span class="line"></span><br><span class="line">conda install nvidia/label/cuda-11.7.0::cuda-toolkit -c nvidia/label/cuda-11.7.0</span><br><span class="line">conda install cudatoolkit</span><br><span class="line">conda install -c conda-forge gcc=11.2.0</span><br><span class="line">conda install -c conda-forge gxx=11.2.0</span><br><span class="line"></span><br><span class="line">conda <span class="built_in">env</span> config vars <span class="built_in">set</span> LD_LIBRARY_PATH=<span class="string">&quot;/home/cyl/miniconda3/envs/dinov2/lib/&quot;</span></span><br><span class="line">conda <span class="built_in">env</span> config vars <span class="built_in">set</span> CPATH=<span class="string">&quot;/home/cyl/miniconda3/envs/dinov2/include/&quot;</span></span><br><span class="line">conda <span class="built_in">env</span> config vars <span class="built_in">set</span> CUDA_HOME=<span class="string">&quot;/home/cyl/miniconda3/envs/dinov2/&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> CC=<span class="variable">$CONDA_PREFIX</span>/bin/gcc</span><br><span class="line"><span class="built_in">export</span> CXX=<span class="variable">$CONDA_PREFIX</span>/bin/g++</span><br><span class="line"></span><br><span class="line"><span class="comment"># check with `which g++`</span></span><br><span class="line"></span><br><span class="line">conda <span class="built_in">env</span> update -f conda_cyl.yaml</span><br><span class="line"></span><br><span class="line">pip3 install -U xformers==0.0.18</span><br><span class="line"></span><br><span class="line">conda <span class="built_in">env</span> config vars <span class="built_in">set</span> PYTHONPATH=<span class="string">&quot;/home/cyl/Reconst/dinov2/&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="Demo-🐱"><a href="#Demo-🐱" class="headerlink" title="Demo 🐱"></a>Demo 🐱</h2><p>官方提供了 depth estimation 和 segmentation 的 notebook，可以找时间理解一下</p>
<h2 id="Train"><a href="#Train" class="headerlink" title="Train"></a>Train</h2><p>使用的数据集为<a target="_blank" rel="noopener" href="https://www.kaggle.com/datasets/ifigotin/imagenetmini-1000">Imagenet-mini</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">imagenet-mini</span><br><span class="line">├── labels.txt</span><br><span class="line">├── train</span><br><span class="line">└── val</span><br></pre></td></tr></table></figure>
<p>Note: 需要额外添加一个<a target="_blank" rel="noopener" href="https://github.com/facebookresearch/dinov2/files/11424682/labels.txt">label.txt</a></p>
<p>使用脚本生产数据集的meta data:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>


</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/tags/Python/page/0/">Previous</a></div><div class="pagination-next"><a href="/tags/Python/page/2/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/tags/Python/">1</a></li><li><a class="pagination-link" href="/tags/Python/page/2/">2</a></li><li><a class="pagination-link" href="/tags/Python/page/3/">3</a></li></ul></nav></div><style>.column.column-left,.column.column-right{display:none}</style><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="Chen Yulin"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Chen Yulin</p><p class="is-size-6 is-block">SJTU student</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Manchester by the Sea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives/"><p class="title">312</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories/"><p class="title">10</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags/"><p class="title">235</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Chen-Yulin" target="_blank" rel="me noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/Chen-Yulin"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2026/02/"><span class="level-start"><span class="level-item">February 2026</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2026/01/"><span class="level-start"><span class="level-item">January 2026</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/12/"><span class="level-start"><span class="level-item">December 2025</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/11/"><span class="level-start"><span class="level-item">November 2025</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/10/"><span class="level-start"><span class="level-item">October 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/09/"><span class="level-start"><span class="level-item">September 2025</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/08/"><span class="level-start"><span class="level-item">August 2025</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/07/"><span class="level-start"><span class="level-item">July 2025</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/06/"><span class="level-start"><span class="level-item">June 2025</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/05/"><span class="level-start"><span class="level-item">May 2025</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/04/"><span class="level-start"><span class="level-item">April 2025</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/03/"><span class="level-start"><span class="level-item">March 2025</span></span><span class="level-end"><span class="level-item tag">45</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/02/"><span class="level-start"><span class="level-item">February 2025</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/01/"><span class="level-start"><span class="level-item">January 2025</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/12/"><span class="level-start"><span class="level-item">December 2024</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/11/"><span class="level-start"><span class="level-item">November 2024</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/10/"><span class="level-start"><span class="level-item">October 2024</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">September 2024</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">August 2024</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">July 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">June 2024</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">May 2024</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">March 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">May 2023</span></span><span class="level-end"><span class="level-item tag">46</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/2026/02/14/%5BOBS%5Dexist_label/"><img src="/thumb/Research-paper.png" alt="exist_label"></a></figure><div class="media-content"><p class="date"><time dateTime="2026-02-14T12:01:54.000Z">2026-02-14</time></p><p class="title"><a href="/2026/02/14/%5BOBS%5Dexist_label/">exist_label</a></p><p class="categories"><a href="/categories/Note/">Note</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2026/02/06/%5BOBS%5DDeep%20Learning-BAGEL-Unified-Multimodal-Pretraining/"><img src="/thumb/Research-paper.png" alt="BAGEL-Unified-Multimodal-Pretraining"></a></figure><div class="media-content"><p class="date"><time dateTime="2026-02-05T21:30:00.000Z">2026-02-06</time></p><p class="title"><a href="/2026/02/06/%5BOBS%5DDeep%20Learning-BAGEL-Unified-Multimodal-Pretraining/">BAGEL-Unified-Multimodal-Pretraining</a></p><p class="categories"><a href="/categories/Review/">Review</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2026/02/05/%5BOBS%5DDeep%20Learning-LingBot-VLA/"><img src="/thumb/Research-paper.png" alt="LingBot-VLA"></a></figure><div class="media-content"><p class="date"><time dateTime="2026-02-05T15:30:00.000Z">2026-02-05</time></p><p class="title"><a href="/2026/02/05/%5BOBS%5DDeep%20Learning-LingBot-VLA/">LingBot-VLA</a></p><p class="categories"><a href="/categories/Review/">Review</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2026/02/05/%5BOBS%5DDeep%20Learning-Transformer-Mixture-of-Experts-Survey/"><img src="/thumb/LLM.png" alt="Mixture-of-Experts-Survey"></a></figure><div class="media-content"><p class="date"><time dateTime="2026-02-05T15:30:00.000Z">2026-02-05</time></p><p class="title"><a href="/2026/02/05/%5BOBS%5DDeep%20Learning-Transformer-Mixture-of-Experts-Survey/">Mixture-of-Experts-Survey</a></p><p class="categories"><a href="/categories/Review/">Review</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2026-02-05T00:00:00.000Z">2026-02-05</time></p><p class="title"><a href="/2026/02/05/%5BOBS%5DRobotics-Humanoid-Robot-Control-Methods/">人形机器人控制方法综述</a></p><p class="categories"><a href="/categories/Note/">Note</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/3D-Scene/"><span class="tag">3D-Scene</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/6-D/"><span class="tag">6-D</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AIGC/"><span class="tag">AIGC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/API/"><span class="tag">API</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AR/"><span class="tag">AR</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Academic/"><span class="tag">Academic</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Aliyun/"><span class="tag">Aliyun</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/App/"><span class="tag">App</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Atlas/"><span class="tag">Atlas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BS4/"><span class="tag">BS4</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bayesian-Inference/"><span class="tag">Bayesian-Inference</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Beautify/"><span class="tag">Beautify</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Behaviorism/"><span class="tag">Behaviorism</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Business/"><span class="tag">Business</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CADC/"><span class="tag">CADC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CD/"><span class="tag">CD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CLI/"><span class="tag">CLI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CLIP/"><span class="tag">CLIP</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CNN/"><span class="tag">CNN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CV/"><span class="tag">CV</span><span class="tag">68</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Camera/"><span class="tag">Camera</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Capstone/"><span class="tag">Capstone</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Chemistry/"><span class="tag">Chemistry</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Claude/"><span class="tag">Claude</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Communication/"><span class="tag">Communication</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Contrastive-Learning/"><span class="tag">Contrastive-Learning</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Control/"><span class="tag">Control</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Csharp/"><span class="tag">Csharp</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Css/"><span class="tag">Css</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cuda/"><span class="tag">Cuda</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DD/"><span class="tag">DD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DINO/"><span class="tag">DINO</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DT/"><span class="tag">DT</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Dataframe/"><span class="tag">Dataframe</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Debate/"><span class="tag">Debate</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Debugger/"><span class="tag">Debugger</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Deep-Learning/"><span class="tag">Deep-Learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Development-Tools/"><span class="tag">Development-Tools</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Diffusion/"><span class="tag">Diffusion</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Diffusion-Policy/"><span class="tag">Diffusion-Policy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DiffusionModel/"><span class="tag">DiffusionModel</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Discrete-Mathematics/"><span class="tag">Discrete-Mathematics</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Disney/"><span class="tag">Disney</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docs/"><span class="tag">Docs</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Dynamic-programming/"><span class="tag">Dynamic-programming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ESP32/"><span class="tag">ESP32</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Education/"><span class="tag">Education</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Embeded-System/"><span class="tag">Embeded-System</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Embodied-AI/"><span class="tag">Embodied-AI</span><span class="tag">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Emoation/"><span class="tag">Emoation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Emotion/"><span class="tag">Emotion</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ethic/"><span class="tag">Ethic</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Experiment/"><span class="tag">Experiment</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FL/"><span class="tag">FL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FPN/"><span class="tag">FPN</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Family/"><span class="tag">Family</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Federated-Learning/"><span class="tag">Federated-Learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Foundation/"><span class="tag">Foundation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FoundationModel/"><span class="tag">FoundationModel</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Functional-programming/"><span class="tag">Functional programming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GPT/"><span class="tag">GPT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Game/"><span class="tag">Game</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gated-NN/"><span class="tag">Gated-NN</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Github/"><span class="tag">Github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Godot/"><span class="tag">Godot</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Graph/"><span class="tag">Graph</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HPC/"><span class="tag">HPC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HRI/"><span class="tag">HRI</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Haskell/"><span class="tag">Haskell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Health/"><span class="tag">Health</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hierarchical/"><span class="tag">Hierarchical</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Html/"><span class="tag">Html</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Humanism/"><span class="tag">Humanism</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Humanoid/"><span class="tag">Humanoid</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HumanoidRobot/"><span class="tag">HumanoidRobot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hybrid-Control/"><span class="tag">Hybrid-Control</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hyprland/"><span class="tag">Hyprland</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IK/"><span class="tag">IK</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Image-Grounding/"><span class="tag">Image-Grounding</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Image-Text/"><span class="tag">Image-Text</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Image-generation/"><span class="tag">Image-generation</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Image2Text/"><span class="tag">Image2Text</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ImgGen/"><span class="tag">ImgGen</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ImitationLearning/"><span class="tag">ImitationLearning</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Information-Theory/"><span class="tag">Information-Theory</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Jolt/"><span class="tag">Jolt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Json/"><span class="tag">Json</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LLM/"><span class="tag">LLM</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LSP/"><span class="tag">LSP</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LatentAction/"><span class="tag">LatentAction</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Latex/"><span class="tag">Latex</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lego/"><span class="tag">Lego</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Life/"><span class="tag">Life</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LinearAlgebra/"><span class="tag">LinearAlgebra</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">22</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Live2d/"><span class="tag">Live2d</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Love/"><span class="tag">Love</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lua/"><span class="tag">Lua</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MBTI/"><span class="tag">MBTI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ML/"><span class="tag">ML</span><span class="tag">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MPC/"><span class="tag">MPC</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MR-AR/"><span class="tag">MR/AR</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Machine-Learning/"><span class="tag">Machine-Learning</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mason/"><span class="tag">Mason</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Math/"><span class="tag">Math</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Meme/"><span class="tag">Meme</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Message-Passing/"><span class="tag">Message-Passing</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MindPlus/"><span class="tag">MindPlus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MoE/"><span class="tag">MoE</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mod/"><span class="tag">Mod</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Model-Predictive-Control/"><span class="tag">Model-Predictive-Control</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Motivation/"><span class="tag">Motivation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Moveit/"><span class="tag">Moveit</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Movie/"><span class="tag">Movie</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Multi-Agent/"><span class="tag">Multi-Agent</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Multi-modal/"><span class="tag">Multi-modal</span><span class="tag">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Multi-view/"><span class="tag">Multi-view</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MultiModal/"><span class="tag">MultiModal</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Music/"><span class="tag">Music</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NLP/"><span class="tag">NLP</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NN/"><span class="tag">NN</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Network/"><span class="tag">Network</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nodejs/"><span class="tag">Nodejs</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Numpy/"><span class="tag">Numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nvim/"><span class="tag">Nvim</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Object-Detection/"><span class="tag">Object-Detection</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Open-Vocabulary/"><span class="tag">Open-Vocabulary</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenCV/"><span class="tag">OpenCV</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Oral/"><span class="tag">Oral</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHD/"><span class="tag">PHD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PSY/"><span class="tag">PSY</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pandas/"><span class="tag">Pandas</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Panoptic/"><span class="tag">Panoptic</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Path/"><span class="tag">Path</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Philosophy/"><span class="tag">Philosophy</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PhysX/"><span class="tag">PhysX</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Physical-Scene/"><span class="tag">Physical-Scene</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Physics-engine/"><span class="tag">Physics-engine</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pio/"><span class="tag">Pio</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Planning/"><span class="tag">Planning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Plugin/"><span class="tag">Plugin</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PoseEstimation/"><span class="tag">PoseEstimation</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Postgraduate/"><span class="tag">Postgraduate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prefab/"><span class="tag">Prefab</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Probability/"><span class="tag">Probability</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">30</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pytorch/"><span class="tag">Pytorch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/QML/"><span class="tag">QML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Quantum/"><span class="tag">Quantum</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RAG/"><span class="tag">RAG</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RL/"><span class="tag">RL</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RNN/"><span class="tag">RNN</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ROS/"><span class="tag">ROS</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reading/"><span class="tag">Reading</span><span class="tag">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Real2Sim/"><span class="tag">Real2Sim</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reconstruct/"><span class="tag">Reconstruct</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Regex/"><span class="tag">Regex</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reinforcement-Learning/"><span class="tag">Reinforcement-Learning</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reinforcement-learning/"><span class="tag">Reinforcement-learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Repository/"><span class="tag">Repository</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Representation-Learning/"><span class="tag">Representation-Learning</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Research-paper/"><span class="tag">Research-paper</span><span class="tag">97</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Robot/"><span class="tag">Robot</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RobotLearning/"><span class="tag">RobotLearning</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Robotics/"><span class="tag">Robotics</span><span class="tag">38</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SJTU-Lecture/"><span class="tag">SJTU-Lecture</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SSH/"><span class="tag">SSH</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scalability/"><span class="tag">Scalability</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scene-graph/"><span class="tag">Scene-graph</span><span class="tag">34</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scene-synthesis/"><span class="tag">Scene-synthesis</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Science-fiction/"><span class="tag">Science-fiction</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scrap/"><span class="tag">Scrap</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Script/"><span class="tag">Script</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Segmentation/"><span class="tag">Segmentation</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Semantic/"><span class="tag">Semantic</span><span class="tag">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shader/"><span class="tag">Shader</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell/"><span class="tag">Shell</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Signals-and-Systems/"><span class="tag">Signals and Systems</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sim2Real/"><span class="tag">Sim2Real</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sklearn/"><span class="tag">Sklearn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Snippets/"><span class="tag">Snippets</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Society/"><span class="tag">Society</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Star-rail/"><span class="tag">Star-rail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Statistics/"><span class="tag">Statistics</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Subgraph/"><span class="tag">Subgraph</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Submodule/"><span class="tag">Submodule</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Supervised-learning/"><span class="tag">Supervised-learning</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Survey/"><span class="tag">Survey</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TC/"><span class="tag">TC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TOEFL/"><span class="tag">TOEFL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Task-Planning/"><span class="tag">Task-Planning</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tasks/"><span class="tag">Tasks</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tech-Communication/"><span class="tag">Tech Communication</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Torch/"><span class="tag">Torch</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Transformer/"><span class="tag">Transformer</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Translation-Embedding/"><span class="tag">Translation-Embedding</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Travel/"><span class="tag">Travel</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UI/"><span class="tag">UI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unified-Multimodal/"><span class="tag">Unified-Multimodal</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unity/"><span class="tag">Unity</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unsupervised-learning/"><span class="tag">Unsupervised-learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VAE/"><span class="tag">VAE</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VLA/"><span class="tag">VLA</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VLM/"><span class="tag">VLM</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VLP/"><span class="tag">VLP</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VQ-VAE/"><span class="tag">VQ-VAE</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Variational-Inference/"><span class="tag">Variational-Inference</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Version-management/"><span class="tag">Version-management</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ViT/"><span class="tag">ViT</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VideoEditing/"><span class="tag">VideoEditing</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vim/"><span class="tag">Vim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Visual-Relation/"><span class="tag">Visual-Relation</span><span class="tag">23</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WSL/"><span class="tag">WSL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Waybar/"><span class="tag">Waybar</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Wayland/"><span class="tag">Wayland</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web/"><span class="tag">Web</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Website/"><span class="tag">Website</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Well-being/"><span class="tag">Well-being</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Window-manager/"><span class="tag">Window-manager</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WorldModel/"><span class="tag">WorldModel</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/YKLL/"><span class="tag">YKLL</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zen/"><span class="tag">Zen</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E2%99%A5%EF%B8%8F/"><span class="tag">♥️</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AE%9E%E4%B9%A0/"><span class="tag">实习</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%F0%9F%8D%A2/"><span class="tag">🍢</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%F0%9F%8D%B0/"><span class="tag">🍰</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%F0%9F%90%B1/"><span class="tag">🐱</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%F0%9F%A7%80/"><span class="tag">🧀</span><span class="tag">1</span></a></div></div></div></div></div></div><style>.column.column-left,.column.column-right{display:block}</style></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/img/cyllogo.png" alt="Chen Yulin&#039;s Blog" height="28"><img class="logo-img-dark" src="/img/cyllogonight.png" alt="Chen Yulin&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2026 Chen Yulin</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Chen-Yulin"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked="checked"><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer></script><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script><script type="text/javascript" src="/js/imaegoo/falling-petals.js"></script><!-- hexo injector body_end start -->
<link rel="stylesheet" crossorigin href="https://g.alicdn.com/aliyun-documentation/web-chatbot-ui/0.0.11/index.css" />
<script type="module" crossorigin src="https://g.alicdn.com/aliyun-documentation/web-chatbot-ui/0.0.11/index.js"></script>
<script>
  window.CHATBOT_CONFIG = {
    endpoint: "https://webchat-bot-iqu-knzhgrvznd.cn-hangzhou.fcapp.run/chat", // 可以替换为 https://{your-fc-http-trigger-domain}/chat
    displayByDefault: false, // 默认不展示 AI 助手聊天框
    aiChatOptions: { // aiChatOptions 中 options 会传递 aiChat 组件，自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat
      conversationOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#conversation-options
        conversationStarters: [
          {prompt: '你是谁？'},
          {prompt: '博主又是谁？'},
          {prompt: '怎么使用这个网站？'},
          {prompt: '想要博主联系方式！'},
        ]
      },
      displayOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#display-options
        height: 600,
        width: 350,
      },
      personaOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#chat-personas
        assistant: {          name: '博主的AI助手，十四行诗参上！',
          // AI 助手的图标
          avatar: 'https://chen-yulin.github.io/thumb/14.png',
          tagline: '要不要试试问下面的问题呢？',
        }
      }
    }
  };
</script>
<style>
  :root {
    /* webchat 工具栏的颜色 */
    --webchat-toolbar-background-color: #1464E4;
    /* webchat 工具栏文字和按钮的颜色 */
    --webchat-toolbar-text-color: #FFF;
  }
  /* webchat 对话框如果被遮挡，可以尝试通过 z-index、bottom、left 等设置来调整位置 */
  .webchat-container {
    z-index: 100;
    bottom: 10px;
    right: 10px;
  }
  /* webchat 的唤起按钮如果被遮挡，可以尝试通过 z-index、bottom、left 等设置来调整位置 */
  .webchat-bubble-tip {
    z-index: 99;
    bottom: 60px;
    right: 20px;
  }
  .webchat-bubble-tip {
    overflow: visible !important;
  }
  @keyframes float {
    0% {
      transform: translateY(0px) translateX(-50%);
    }
    50% {
      transform: translateY(-10px) translateX(-50%);
    }
    100% {
      transform: translateY(0px) translateX(-50%);
    }
  }

  .webchat-bubble-tip::before {
    content: '';
    position: absolute;
    top: -25px;
    left: 70%;
    width: 40px;
    height: 40px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.5));
    animation: float 3s ease-in-out infinite;
  }
</style><script data-pjax src="https://registry.npmmirror.com/oh-my-live2d/latest/files"></script><script>const oml2d = OML2D.loadOml2d({libraryUrls:{"complete":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/complete.js","cubism2":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/cubism2.js","cubism5":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/cubism5.js"},dockedPosition:"left",mobileDisplay:true,models:[{"path":"https://model.hacxy.cn/mai/model.json","mobilePosition":[25,0],"mobileScale":0.1,"mobileStageStyle":{"width":125,"height":175},"motionPreloadStrategy":"ALL","position":[50,0],"scale":0.2,"stageStyle":{"width":250,"height":350}}],parentElement:document.body,primaryColor:"var(--btn-bg)",sayHello:false,tips:{style: {"width":230,"height":120,"left":"calc(50% - 20px)","top":"-100px"},mobileStyle: {"width":180,"height":80,"left":"calc(50% - 30px)","top":"-100px"},idleTips:{interval:15000,message:function(){
  return axios.get('https://v1.hitokoto.cn?c=i')
    .then(function (response) {
      return response.data.hitokoto ;
    })
    .catch(function (error) {
      console.error(error);
    });
}
}}});</script><!-- hexo injector body_end end --></body></html>