<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta name="theme-color" content="#123456"><title>Tag: Embeded-System - Chen Yulin&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#6495ed"><meta name="application-name" content="Icarus - Hexo Theme"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="msapplication-TileColor" content="#6495ed"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Icarus - Hexo Theme"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Chen Yulin&#039;s Blog"><meta property="og:url" content="http://chen-yulin.github.io/"><meta property="og:site_name" content="Chen Yulin&#039;s Blog"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://chen-yulin.github.io/img/og_image.png"><meta property="article:author" content="Chen Yulin"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://chen-yulin.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://chen-yulin.github.io"},"headline":"Chen Yulin's Blog","image":["http://chen-yulin.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Chen Yulin"},"publisher":{"@type":"Organization","name":"Chen Yulin's Blog","logo":{"@type":"ImageObject","url":{"light":"/img/cyllogo.png","dark":"/img/cyllogonight.png"}}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/img/cyllogo.png" alt="Chen Yulin&#039;s Blog" height="28"><img class="logo-img-dark" src="/img/cyllogonight.png" alt="Chen Yulin&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Chen-Yulin"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags/">Tags</a></li><li class="is-active"><a href="#" aria-current="page">Embeded-System</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-09-25T16:54:42.000Z" title="9/26/2024, 12:54:42 AM">2024-09-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-03T12:09:59.030Z" title="12/3/2024, 8:09:59 PM">2024-12-03</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">a minute read (About 200 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/09/26/%5BOBS%5DEmbededSystem-ESP32-CAM%20Video%20Stream/">ESP32-CAM Video Stream</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>参考仓库: <a target="_blank" rel="noopener" href="https://github.com/rzeldent/esp32cam-rtsp">https://github.com/rzeldent/esp32cam-rtsp</a></p>
<h2 id="Objective"><a href="#Objective" class="headerlink" title="Objective"></a>Objective</h2><p>Stream video through wifi using ESP-32-CAM.<br>The video sources can be accessed by an ip address.</p>
<h2 id="Implemenation"><a href="#Implemenation" class="headerlink" title="Implemenation"></a>Implemenation</h2><p>Install PlatformIO plugin in vscode.<br>Clone the repository</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive https://github.com/rzeldent/esp32cam-rtsp.git</span><br></pre></td></tr></table></figure>

<p>Use vscode pio to open the project. Wait pio till its configuration is done.</p>
<p>Change the <code>default_envs</code> settings, here I use <code>esp32cam_ai_thinker</code></p>
<div class="post-content"><a href="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925170942.png" title="" title=" class="gallery-item"><img src="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925170942.png" alt="" title=""></a></div>

<blockquote>
<p>If no <code>default_envs</code> is specified, pio will build the project for all platforms</p>
</blockquote>
<p>Here we can build and upload the program to the board.</p>
<div class="post-content"><a href="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925171147.png" title="" title=" class="gallery-item"><img src="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925171147.png" alt="" title=""></a></div>

<p>Connect to <code>ESP****</code> WiFi, and visit <code>http://192.168.4.1</code> to configure the wifi settings of the board. I choose to my phone’s hot spot.</p>
<div class="post-content"><a href="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240926095320.png" title="" title=" class="gallery-item"><img src="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240926095320.png" alt="" title=""></a></div>

<p>Then open the monitor to check the ip address (you need to connect your computer to the same LAN (local area network) to visit the ip)</p>
<div class="post-content"><a href="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925171246.png" title="" title=" class="gallery-item"><img src="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925171246.png" alt="" title=""></a></div>

<p>Visit the <code>192.168.23.142</code> and you will see the page (similar with the page of <code>http://192.168.4.1</code>):</p>
<div class="post-content"><a href="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925171915.png" title="" title=" class="gallery-item"><img src="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925171915.png" alt="" title=""></a></div>

<p>Click <code>rtsp://192.168.23.197:554/mjpeg/1</code> and you will see the streaming video:</p>
<div class="post-content"><a href="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925172909.png" title="" title=" class="gallery-item"><img src="/2024/09/26/[OBS]EmbededSystem-ESP32-CAM Video Stream/Pasted_image_20240925172909.png" alt="" title=""></a></div>

<blockquote>
<p>生无可恋做横向.jpg</p>
</blockquote>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-09-23T11:44:27.000Z" title="9/23/2024, 7:44:27 PM">2024-09-23</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-03T12:09:59.073Z" title="12/3/2024, 8:09:59 PM">2024-12-03</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">a minute read (About 223 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/09/23/%5BOBS%5DEmbededSystem-ESP32%20Development%20on%20Linux/">ESP32 Development on Linux</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="Standard-Toolchain-Setup"><a href="#Standard-Toolchain-Setup" class="headerlink" title="Standard Toolchain Setup"></a>Standard Toolchain Setup</h2><p>Guide: <a target="_blank" rel="noopener" href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/linux-macos-setup.html#">https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/linux-macos-setup.html#</a></p>
<h3 id="ESP-IDF"><a href="#ESP-IDF" class="headerlink" title="ESP_IDF"></a>ESP_IDF</h3><p>I directly download the archive with all the submodules included: <a target="_blank" rel="noopener" href="https://github.com/espressif/esp-idf/releases/tag/v5.3.1">https://github.com/espressif/esp-idf/releases/tag/v5.3.1</a></p>
<blockquote>
<p>This archive can also be downloaded from Espressif’s download server: <a target="_blank" rel="noopener" href="https://dl.espressif.com/github_assets/espressif/esp-idf/releases/download/v5.3.1/esp-idf-v5.3.1.zip">https://dl.espressif.com/github_assets&#x2F;espressif&#x2F;esp-idf&#x2F;releases&#x2F;download&#x2F;v5.3.1&#x2F;esp-idf-v5.3.1.zip</a></p>
</blockquote>
<p>cd into the unzip folder (The installation will fail in conda venv)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda deactivate</span><br><span class="line">./install.sh</span><br><span class="line">. ./export.sh</span><br></pre></td></tr></table></figure>

<p>In <code>~/.zshrc</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> get_idf=<span class="string">&#x27;. $HOME/esp/esp-idf-v5.3.1/export.sh&#x27;</span></span><br></pre></td></tr></table></figure>
<p>Then each time I need to setup esp32 development environment, I only need to type <code>get_idf</code>.</p>
<p>Some useful commands</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">idf.py set-target esp32</span><br><span class="line">idf.py menuconfig</span><br><span class="line">idf.py build</span><br><span class="line">idf.py -p /dev/ttyUSB0 -b 115200 flash</span><br><span class="line">idf.py -p /dev/ttyUSB0 -b monitor</span><br><span class="line">idf.py -p /dev/ttyUSB0 flash monitor <span class="comment"># combine together</span></span><br></pre></td></tr></table></figure>

<h3 id="PlatformIO"><a href="#PlatformIO" class="headerlink" title="PlatformIO"></a>PlatformIO</h3><p>事实证明pio是最方便的。。<br>事前安装过pio的vscode插件，直接打开pio的esp32项目就直接可以编译上传以及查看串口监视器。</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-08-05T13:34:02.000Z" title="8/5/2024, 9:34:02 PM">2024-08-05</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-03T12:09:59.030Z" title="12/3/2024, 8:09:59 PM">2024-12-03</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">12 minutes read (About 1785 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/08/05/%5BOBS%5DEmbededSystem-ECE3730J%20Final%20RC%20Part%201/">ECE3730J Final RC Part 1</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="L2-Embedded-system-overview"><a href="#L2-Embedded-system-overview" class="headerlink" title="L2 (Embedded system overview)"></a>L2 (Embedded system overview)</h2><p>Take a look at the differences between <strong>Microprocessor</strong> (in our personal computer or phone) and <strong>Microcontroller</strong></p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805142046.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805142046.png" alt="" title=""></a></div>
### Von Neumann vs Harvard architecture
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805142016.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805142016.png" alt="" title=""></a></div>
efficiency: Harvard architecture can avoid the "Von Neumann bottleneck"
> VERBOSE~
**Von Neumann bottleneck**: when the bandwidth between CPU and RAM is much lower than the speed at which a typical CPU can process data, because the shared bus for instructions and data can cause competition.

<p>In embedded system, harvard architecture is widely used.<br>Our board (STM32F103C8T6) use harvard architecture on physical level (refer to the block diagram in reference manual)</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805143312.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805143312.png" alt="" title=""></a></div>
>*VERBOSE~*
**ICode bus**:This bus connects the Instruction bus of the Cortex®-M3 core to the Flash memory instruction interface.
**DCode bus**:This bus connects the DCode bus (literal load and debug access) of the Cortex ®-M3 core to the Flash memory Data interface.

<p>However, in the software level, we treat the instruction memory and data memory as a whole block of memory (therefore, it is more accurate to say that the stm32 uses a mixed Harvard and von Neumann architecture.).</p>
<p>In stm32, instruction memory, data memory, registers of peripherals&#x2F;IO are all mapped to memory.</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805213045.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805213045.png" alt="" title=""></a></div>
Table from https://embeddedsecurity.io/vendor-stm32

<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806115644.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806115644.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806115733.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806115733.png" alt="" title=""></a></div>

<h2 id="L3-Programming"><a href="#L3-Programming" class="headerlink" title="L3 (Programming)"></a>L3 (Programming)</h2><h3 id="Type-Qualifiers"><a href="#Type-Qualifiers" class="headerlink" title="Type Qualifiers"></a>Type Qualifiers</h3><h4 id="const"><a href="#const" class="headerlink" title="const"></a><code>const</code></h4><ul>
<li>implies that value not supposed to be written by program (read only) during run-time. Can be modified by others like hardware. <blockquote>
<p>If you want to save the limited RAM spaces (data memory) for other variables, you can use this keyword to store this variable in ROM (program memory). It’s important for harvard architecture.</p>
</blockquote>
</li>
</ul>
<h4 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a><code>volatile</code></h4><ul>
<li>indicate the value can be changed by something other than program so it should be reexamined frequently.<blockquote>
<p>This means two things:</p>
<ul>
<li>The compiler will not try to optimize the variable with <code>volatile</code>. See the two examples on slides.</li>
<li>Each time the program reads the <code>volatile</code> variable, the processor will not look into cached data memory, meaning that the program can always get the newest updated data in memory (which is very important when external hardware change the variable). <del>However, this case is not relevant with STM32 MCU since it didn’t have cache.</del></li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="What-about-const-volatile"><a href="#What-about-const-volatile" class="headerlink" title="What about const volatile ?"></a>What about <code>const volatile</code> ?</h4><ul>
<li>The combination of the above two concepts. Usually used to declare pointers<br><em>Example:</em><br><code>const volatile char *a</code> declares a pointer pointing to a value that cannot be changed by the program through <code>*a</code>, but the value of a can be changed (pointing to another value). <code>*a = 0</code> is not allowed, <code>a = &amp;b</code> is allowed.</li>
</ul>
<p>Generally, we use <code>const volatile</code> to declare pointers that points to hardware registers or memory-mapped Input ports(<strong>read only</strong>). </p>
<h3 id="Basic-Program-Structure"><a href="#Basic-Program-Structure" class="headerlink" title="Basic Program Structure"></a>Basic Program Structure</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import header file for the board (containing the declaration of SFR)</span></span><br><span class="line"><span class="comment">// declare global variables</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">	<span class="comment">// initialization (system clock, peripherals)</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="literal">true</span>) <span class="comment">// super loop, the the program alive</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// interact with peripherals</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="How-to-interact-with-peripherals"><a href="#How-to-interact-with-peripherals" class="headerlink" title="How to interact with peripherals"></a>How to interact with peripherals</h3><p>We need to use C code to set the value of SFR. </p>
<h4 id="SFR-special-function-registers"><a href="#SFR-special-function-registers" class="headerlink" title="SFR (special function registers)"></a>SFR (special function registers)</h4><p>These are registers that are embedded in peripherals, used for configuration and control of peripherals.</p>
<blockquote>
<p><em>VERBOSE~</em><br>If we want to get the status of a peripheral, we read the value of SFR.<br>If we want to send something to peripheral, we write value to SFR.</p>
</blockquote>
<p>Let’s take timer as an example:<br>SFR in block diagram of timer:</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805210220.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805210220.png" alt="" title=""></a></div>


<p>SFR declaration in code:</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805204631.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805204631.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805204818.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805204818.png" alt="" title=""></a></div>

<p>We change operate with these registers through <code>Bit Operation</code>.</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805210556.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805210556.png" alt="" title=""></a></div>(These are PIC32 codes but I think you have got it)

<h2 id="L4-IO"><a href="#L4-IO" class="headerlink" title="L4 (IO)"></a>L4 (IO)</h2><p>All the modes of GPIO:</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805214356.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805214356.png" alt="" title=""></a></div>
The whole block diagram:
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805215231.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805215231.png" alt="" title=""></a></div>

<p>You may see an unfamiliar unit <div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805232310.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805232310.png" alt="" title=""></a></div> Here.<br>It’s used to convert the input analog voltage to digital voltage.<br>You can memorize it through this graph:<br><strong><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Transfer_function">Transfer function</a> of a Schmitt trigger.</strong></p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805232536.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805232536.png" alt="" title=""></a></div>
>The horizontal and vertical axes are input voltage and output voltage, respectively. T and −T are the switching thresholds, and M and −M are the output voltage levels.

<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>After we configured the GPIO to be input ports, the output driver is disabled (disconnected).</p>
<h4 id="Pull-down"><a href="#Pull-down" class="headerlink" title="Pull down"></a>Pull down</h4><div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805233438.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240805233438.png" alt="" title=""></a></div>
- When the IO pin is connected to LOW (0V) or unconnected, the input data register will be 0.
- When the IO pin is connected to HIGH (3.3V/5V), the input data register will be 1.

<h4 id="Pull-up"><a href="#Pull-up" class="headerlink" title="Pull up"></a>Pull up</h4><div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806000537.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806000537.png" alt="" title=""></a></div>
- When the IO pin is connected to LOW (0V), the input data register will be 0.
- When the IO pin is connected to HIGH (3.3V/5V) or unconnected, the input data register will be 1.

<h4 id="Floating"><a href="#Floating" class="headerlink" title="Floating"></a>Floating</h4><div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806001337.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806001337.png" alt="" title=""></a></div>
- When the IO pin is connected to LOW (0V), the input data register will be 0.
- When the IO pin is connected to HIGH (VDD), the input data register will be 1.
- When the IO pin is unconnected, the input data register will be unpredictable.

<h3 id="General-Purpose-Output"><a href="#General-Purpose-Output" class="headerlink" title="General Purpose Output"></a>General Purpose Output</h3><p>The input driver part is still enabled so that we can read the output status.</p>
<h4 id="Open-Drain"><a href="#Open-Drain" class="headerlink" title="Open Drain"></a>Open Drain</h4><p>Can “generate” voltage higher than <code>VDD</code> at IO pin.</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806004041.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806004041.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806004653.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806004653.png" alt="" title=""></a></div>
- “0” in the Output register activates the N-MOS (LOW (0V) at IO pin)
- “1” in the Output register leaves the port in Hi-Z (HIGH (V+) at IO pin)
 (the P-MOS is never activated)

<h4 id="Push-Pull"><a href="#Push-Pull" class="headerlink" title="Push Pull"></a>Push Pull</h4><p>Most common one.</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806005010.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806005010.png" alt="" title=""></a></div>
- “0” in the Output register activates the N-MOS (LOW (0V) at IO pin)
- “1” in the Output register activates the P-MOS (HIGH (VDD) at IO pin)

<h3 id="Alternative-Function-Output"><a href="#Alternative-Function-Output" class="headerlink" title="Alternative Function Output"></a>Alternative Function Output</h3><p>Not covered.</p>
<h2 id="L5-Interrupts"><a href="#L5-Interrupts" class="headerlink" title="L5 (Interrupts)"></a>L5 (Interrupts)</h2><h3 id="Why-interrupt"><a href="#Why-interrupt" class="headerlink" title="Why interrupt?"></a>Why interrupt?</h3><div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806011926.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806011926.png" alt="" title=""></a></div>
Most of the peripherals take quite a few time to complete its task or trigger an event. Instead of instruct the processor to keep checking the status of these peripheral (polling), we want the peripherals to inform processor when there exists an event, so that the processor can focus on its own task.

<p>Peripherals inform the processor through external interrupt.</p>
<h3 id="Where-do-interrupts-come-from"><a href="#Where-do-interrupts-come-from" class="headerlink" title="Where do interrupts come from"></a>Where do interrupts come from</h3><p>We mainly deal with the interrupts from peripherals.</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806015023.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806015023.png" alt="" title=""></a></div>
Each peripheral can have multiple interrupt sources, indicating different events.

<h3 id="How-to-handle-interrupts"><a href="#How-to-handle-interrupts" class="headerlink" title="How to handle interrupts"></a>How to handle interrupts</h3><p>Through interrupt service routine (ISR)</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806021820.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806021820.png" alt="" title=""></a></div>
#### Interrupt vectors
Interrupt vectors are **addresses that inform the interrupt handler as to where to find the ISR**

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">| Vector Number | Interrupt Number | Description                    | Vector Address   |</span><br><span class="line">|---------------|------------------|--------------------------------|------------------|</span><br><span class="line">| 0             | -                | Initial Stack Pointer          | 0x0800 0000      |</span><br><span class="line">| 1             | -                | Reset Handler                  | 0x0800 0004      |</span><br><span class="line">....</span><br><span class="line">| 27            | 11               | DMA1 Channel1 global Interrupt | 0x0800 006C      |</span><br><span class="line">| 28            | 12               | DMA1 Channel2 global Interrupt | 0x0800 0070      |</span><br><span class="line">| 29            | 13               | DMA1 Channel3 global Interrupt | 0x0800 0074      |</span><br><span class="line">| 30            | 14               | DMA1 Channel4 global Interrupt | 0x0800 0078      |</span><br><span class="line">| 31            | 15               | DMA1 Channel5 global Interrupt | 0x0800 007C      |</span><br><span class="line">| 32            | 16               | DMA1 Channel6 global Interrupt | 0x0800 0080      |</span><br><span class="line">| 33            | 17               | DMA1 Channel7 global Interrupt | 0x0800 0084      |</span><br><span class="line">...</span><br><span class="line">| 41            | 25               | TIM1 Break Interrupt           | 0x0800 00A4      |</span><br><span class="line">| 42            | 26               | TIM1 Update Interrupt          | 0x0800 00A8      |</span><br><span class="line">| 43            | 27               | TIM1 Trigger and Commutation   | 0x0800 00AC      |</span><br><span class="line">| 44            | 28               | TIM1 Capture Compare Interrupt | 0x0800 00B0      |</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This is an arbitrary IVT that depicts the pattern of IVT, for detailed IVT of STM32, please refer to the reference manual. </p>
</blockquote>
<h4 id="What-to-do-inside-ISR"><a href="#What-to-do-inside-ISR" class="headerlink" title="What to do inside ISR"></a>What to do inside ISR</h4><ul>
<li>Always remember to clear the interrupt flag in ISR.</li>
<li>Because there is often more interrupt sources than interrupt vectors, you need to judge which source triggered this interrupt based on interrupt status register.</li>
<li>Customized operation… (but be short, because if the operation take too many clock cycles, it may be interrupted by another interrupt source, which may not be on purpose)</li>
</ul>
<h3 id="Nested-interrupts"><a href="#Nested-interrupts" class="headerlink" title="Nested interrupts"></a>Nested interrupts</h3><div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806021935.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806021935.png" alt="" title=""></a></div>
When executing ISR, the processor can be interrupted by interrupts with higher priority.
> **Remainder:** the lower the priority number, the higher the priority
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806115404.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806115404.png" alt="" title=""></a></div>


<h2 id="L6-Timer"><a href="#L6-Timer" class="headerlink" title="L6 (Timer)"></a>L6 (Timer)</h2><p>Let’s split Timer peripheral into 3 parts:</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806120419.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806120419.png" alt="" title=""></a></div>
#### Blue part: Master/slave controller
The master/slave unit provides the time-base unit with the **counting clock signal** (for example the CK_PSC signal, PSC here means that it's for the prescaler in time-base unit), as well as the counting direction (counting up/down) control signal.
This unit mainly provides the **control signals** for the time-base unit.
#### Yellow part: Time-base unit
The main block of the programmable timer is a **16-bit** counter with its related auto-reload register.
The counter can count up, down or both up and down. 
The counter clock can be divided by a **prescaler** (which is basically another counter).
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806120629.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806120629.png" alt="" title=""></a></div>
> On the reference manual there are many wave-forms for you to understand how these control registers take effects.

<p>The reset frequency of the counter is $$\frac{f_{input}}{(Prescaler+1)\times(Counter Period+1)}$$</p>
<h4 id="Red-part-Timer-channels-unit"><a href="#Red-part-Timer-channels-unit" class="headerlink" title="Red part: Timer-channels unit"></a>Red part: Timer-channels unit</h4><p>The timer channels are the working elements of the timer.<br>They are the means by which a timer peripheral interacts with its external environment (through input capture or output compare).</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806134426.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806134426.png" alt="" title=""></a></div>

<h3 id="How-to-use-multiple-timer-for-more-counting-digits-32-bit"><a href="#How-to-use-multiple-timer-for-more-counting-digits-32-bit" class="headerlink" title="How to use multiple timer for more counting digits (32-bit)"></a>How to use multiple timer for more counting digits (32-bit)</h3><div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806114606.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806114606.png" alt="" title=""></a></div>
It is possible to configure one slave timer to increment its counter based on a master-timer events such as the timer update event. The master-timer event is signaled by the master timer master/slave controller unit. This controlling unit uses the master timer output-TRGO signal. The master timer output-TRGO signal is connected to the slave timer TRGI-input signal. The master/slave controller unit of the slave timer is configured to use the TRGI-input signal as clock source to increment the slave timer counter.

<h2 id="L7-LCD"><a href="#L7-LCD" class="headerlink" title="L7 (LCD)"></a>L7 (LCD)</h2><p>Just refer to RC2_LCD. I think it’s not the focus of final exam.</p>
<h2 id="L9-amp-L10-Input-Capture-amp-Output-Compare"><a href="#L9-amp-L10-Input-Capture-amp-Output-Compare" class="headerlink" title="L9 &amp; L10 (Input Capture &amp; Output Compare)"></a>L9 &amp; L10 (Input Capture &amp; Output Compare)</h2><p>IC is a peripheral that can <strong>monitor the input signal changes</strong> (pos&#x2F;neg edge) independent of the processor (Core).<br>OC is a peripheral that can <strong>generate precise output signal</strong> independent of the processor (Core).</p>
<p>In STM32, it is embedded in timer peripheral (together with output compare).</p>
<div class="post-content"><a href="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806131345.png" title="" title=" class="gallery-item"><img src="/2024/08/05/[OBS]EmbededSystem-ECE3730J Final RC Part 1/Pasted_image_20240806131345.png" alt="" title=""></a></div>

<h3 id="IC"><a href="#IC" class="headerlink" title="IC"></a>IC</h3><p>You can consider IC as a <strong>timer value recorder</strong>. It will record the timer value each time the capture condition is met (you can see from the diagram, the timer value is from <code>CNT counter</code>).</p>
<blockquote>
<p>These conditions can be:</p>
<ul>
<li>rising edge</li>
<li>falling edge</li>
<li>both<br>With a prescaler, we trigger capture events every few edges.<br>Similar for interrupt, we can trigger an interrupt every few captures.</li>
</ul>
</blockquote>
<blockquote>
<p><strong>Note:</strong><br>The IC does not capture the edge immediately when a rising or falling edge happened. The capture event needs to be sync with PB_clk.<br>Further more, the module will capture the timer counter value that is valid 2-3 PB_clk cycles after the capture event.</p>
</blockquote>
<p>For detailed configuration, please refer to <code>Reference Manual.pdf</code> on canvas, page 349-359, 382-385.</p>
<h3 id="OC"><a href="#OC" class="headerlink" title="OC"></a>OC</h3><p>Just refer to RC2_Output_Campare and RC3_Lab4 for the concepts and PWM configuration.<br>Also, the solution of hw2 has been uploaded to canvas, please take a look.</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-06-30T20:07:02.000Z" title="7/1/2024, 4:07:02 AM">2024-07-01</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-03T12:09:59.027Z" title="12/3/2024, 8:09:59 PM">2024-12-03</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">2 minutes read (About 284 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/07/01/%5BOBS%5DEmbededSystem-ECE3730J%20RC3_LAB4/">ECE3730J RC3_LAB4</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>For this RC, we will go through Lab 4 in detail.</p>
<h2 id="CubeMX"><a href="#CubeMX" class="headerlink" title="CubeMX"></a>CubeMX</h2><p>We need to generate PWM signal on <code>PB14</code>(embeded with an LED <code>D1</code>, or <code>D2</code> if you like)</p>
<div class="post-content"><a href="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701151153.png" title="" title=" class="gallery-item"><img src="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701151153.png" alt="" title=""></a></div>
> when the `PB14` output `LOW`, `D1` will light up.

<p>In STM32, Input Capture and Output Compare is configured in Timer channels.</p>
<div class="post-content"><a href="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701152054.png" title="" title=" class="gallery-item"><img src="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701152054.png" alt="" title=""></a></div>

<p>Let’s check which Timer is connected to <code>PB14</code></p>
<div class="post-content"><a href="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701152158.png" title="" title=" class="gallery-item"><img src="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701152158.png" alt="" title=""></a></div>
It's the `CH2N` channel of timer 1.

<p>Then we configure timer 1.</p>
<div class="post-content"><a href="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701143248.png" title="" title=" class="gallery-item"><img src="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701143248.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701144606.png" title="" title=" class="gallery-item"><img src="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701144606.png" alt="" title=""></a></div>
Prescaler: 7200-1
Counter Period: 200-1 (50Hz)
Pulse: 180 (duty cycle of 90%; TIM_CNT 0~179: HIGH, TIM_CNT 180~199: LOW)
CHN Polarity: LOW (needed for CHN)
> CHxN is the complementary channel of CHx in Timer1.
> If the polarity of CHxN and CHx are different, the two channels will follow the same output pattern, otherwise they will be complementary


<p>Also remember to configure <code>PB12</code> (<code>SW4</code>) as GPIO_Input.</p>
<div class="post-content"><a href="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701152725.png" title="" title=" class="gallery-item"><img src="/2024/07/01/[OBS]EmbededSystem-ECE3730J RC3_LAB4/Pasted_image_20240701152725.png" alt="" title=""></a></div>
> You can try to use Input Capture to capture the press action of the button (as indicated in lab manual, i.e. connecting `PB12` to `PA0`).
## Code
Init PWM in `main()`:
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* USER CODE BEGIN 2 */</span></span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_2);</span><br><span class="line">HAL_TIMEx_PWMN_Start(&amp;htim1, TIM_CHANNEL_2);</span><br><span class="line"><span class="comment">/* USER CODE END 2 */</span></span><br></pre></td></tr></table></figure>


<p>Change PWM duty cycle:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">ChangeDutyCycle</span><span class="params">(<span class="type">int</span> pulse_width)</span></span><br><span class="line">&#123;</span><br><span class="line">    __HAL_TIM_SET_COMPARE(&amp;htim1, TIM_CHANNEL_2, pulse_width);</span><br><span class="line">    <span class="comment">// htim1.Instance-&gt;CCR2 = pulse_width;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Get the press&#x2F;release action of the button (<code>PB12</code>):</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> pressed = <span class="number">0</span>;</span><br><span class="line">   <span class="comment">/* USER CODE BEGIN WHILE */</span></span><br><span class="line">   <span class="keyword">while</span> (<span class="number">1</span>) &#123; <span class="comment">// main loop</span></span><br><span class="line">       <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line">       <span class="comment">/* USER CODE BEGIN 3 */</span></span><br><span class="line">       <span class="keyword">if</span> (!HAL_GPIO_ReadPin(GPIOB, GPIO_PIN_12) &amp;&amp; pressed == <span class="number">0</span>) &#123;</span><br><span class="line">           pressed = <span class="number">1</span>;</span><br><span class="line">           <span class="comment">// what to do when pressed</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> <span class="keyword">if</span> (HAL_GPIO_ReadPin(GPIOB, GPIO_PIN_12) &amp;&amp; pressed == <span class="number">1</span>) &#123;</span><br><span class="line">           pressed = <span class="number">0</span>;</span><br><span class="line">           <span class="comment">// what to do when releassed</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* USER CODE END 3 */</span></span><br></pre></td></tr></table></figure>


</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-06-15T17:51:30.000Z" title="6/16/2024, 1:51:30 AM">2024-06-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-03T12:09:59.027Z" title="12/3/2024, 8:09:59 PM">2024-12-03</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">a few seconds read (About 75 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/16/%5BOBS%5DEmbededSystem-ECE3730J%20RC2_Input_Capture/">ECE3730J RC2_Input_Capture</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="Input-Compare-Module"><a href="#Input-Compare-Module" class="headerlink" title="Input Compare Module"></a>Input Compare Module</h2><p>IC is a peripheral that can monitor the input signal change (pos&#x2F;neg edge) independent of the processor (Core).</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Input_Capture/Pasted_image_20240617150723.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Input_Capture/Pasted_image_20240617150723.png" alt="" title=""></a></div>
You can consider IC as a **timer value recorder**. It will record the timer value each time the capture condition is met.

<p>For detailed configuration, please refer to <code>Reference Manual.pdf</code> on canvas, page 349-359, 382-385.</p>
<p>Some useful documentation on the configuration register:</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Input_Capture/Pasted_image_20240617155913.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Input_Capture/Pasted_image_20240617155913.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Input_Capture/Pasted_image_20240617155926.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Input_Capture/Pasted_image_20240617155926.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Input_Capture/Pasted_image_20240617155935.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Input_Capture/Pasted_image_20240617155935.png" alt="" title=""></a></div>

</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-06-15T17:51:30.000Z" title="6/16/2024, 1:51:30 AM">2024-06-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-03T12:09:59.030Z" title="12/3/2024, 8:09:59 PM">2024-12-03</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">5 minutes read (About 757 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/16/%5BOBS%5DEmbededSystem-ECE3730J%20RC2_LCD/">ECE3730J RC2</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616202750.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616202750.png" alt="" title=""></a></div>
Basically, we are using MCU to communicate with the LCD controller (HD44780).

<p>Datasheet for HD44780: <a target="_blank" rel="noopener" href="https://www.sparkfun.com/datasheets/LCD/HD44780.pdf">https://www.sparkfun.com/datasheets/LCD/HD44780.pdf</a></p>
<h2 id="LCD-Controller-Pin"><a href="#LCD-Controller-Pin" class="headerlink" title="LCD Controller Pin"></a>LCD Controller Pin</h2><ol>
<li><strong>VSS (Pin 1)</strong>: Ground (GND).</li>
<li><strong>VDD (Pin 2)</strong>: Power supply (usually +5V).<br> Note: If you use J-link debugger to power the board, the output voltage at <code>+5V</code> pin will not be 5V, maybe around 2.8V, so remember to use the 5V power supply wire to power the board.</li>
<li><strong>VO (Pin 3)</strong>: Contrast adjustment pin. Usually connected to a potentiometer to adjust the contrast.</li>
<li><strong>RS (Pin 4)</strong>: Register select pin. Low for instruction register, high for data register.</li>
<li><strong>RW (Pin 5)</strong>: Read&#x2F;Write pin. Low for write operation, high for read operation. Usually grounded (write mode).</li>
<li><strong>E (Pin 6)</strong>: Enable pin. The LCD controller only captures (grabs) the data presented at its register lines(D0-D7) only when the E pin “transitions” from high to low.</li>
<li><strong>D0-D7 (Pins 7-14)</strong>: Data bus pins. Used for communication with the microcontroller in either 4-bit (D4-D7) or 8-bit (D0-D7) mode.</li>
<li><strong>A (Pin 15)</strong>: For the backlight. Typically connected to +5V.</li>
<li><strong>K (Pin 16)</strong>: For the backlight. Typically grounded (GND).</li>
</ol>
<h3 id="Connection-with-STM32"><a href="#Connection-with-STM32" class="headerlink" title="Connection with STM32"></a>Connection with STM32</h3><div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616210515.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616210515.png" alt="" title=""></a></div>

<h2 id="Some-Useful-Charts"><a href="#Some-Useful-Charts" class="headerlink" title="Some Useful Charts"></a>Some Useful Charts</h2><p>From <a target="_blank" rel="noopener" href="https://www.sparkfun.com/datasheets/LCD/HD44780.pdf">datasheet</a></p>
<ol>
<li>Four operation<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616212637.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616212637.png" alt="" title=""></a></div>
**IR: instruction register**
**DR: data register**</li>
</ol>
<p><em>In this Lab, we will mainly use the first and third operation</em></p>
<ol start="2">
<li><p>Instruction</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616212934.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616212934.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616213009.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616213009.png" alt="" title=""></a></div>
</li>
<li><p>DDRAM</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616214538.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616214538.png" alt="" title=""></a></div>
</li>
<li><p>CGRAM</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616215520.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616215520.png" alt="" title=""></a></div></li>
</ol>
<h2 id="Application-Example"><a href="#Application-Example" class="headerlink" title="Application Example"></a>Application Example</h2><h3 id="Send-Command-to-LCD-Controller"><a href="#Send-Command-to-LCD-Controller" class="headerlink" title="Send Command to LCD Controller"></a>Send Command to LCD Controller</h3><p>Recall the operation:</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616220104.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616220104.png" alt="" title=""></a></div>

<ol>
<li>Set the pin of <code>RS</code> &amp; <code>R/W</code> to low.</li>
<li>Set <code>E</code> to high, preparing for the data transfer.</li>
<li>Set <code>D7-D0</code> to the desired instruction(8-bit).</li>
<li>Set <code>E</code> to low</li>
</ol>
<p>Sample code:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">LCD_Write_Command</span><span class="params">(uchar Com)</span> &#123;</span><br><span class="line">  Delay_ms(<span class="number">10</span>);</span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, LCD_RS_Pin, GPIO_PIN_RESET); <span class="comment">// LCD_RS = 0;</span></span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, LCD_RW_Pin, GPIO_PIN_RESET); <span class="comment">//	LCD_RW = 0;</span></span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, LCD_E_Pin, GPIO_PIN_SET);    <span class="comment">// LCD_E_Pin = 1;</span></span><br><span class="line">  Delay_ms(<span class="number">1</span>);                                          <span class="comment">// wait for tpw;</span></span><br><span class="line"></span><br><span class="line">  LCD_PORT = Com;<span class="comment">// put command on the bus</span></span><br><span class="line"></span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, LCD_E_Pin, GPIO_PIN_RESET); <span class="comment">// LCD_E_Pin =0;</span></span><br><span class="line">  Delay_ms(<span class="number">1</span>);                                         <span class="comment">// wait for tpw;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Write-Data-To-DDRAM"><a href="#Write-Data-To-DDRAM" class="headerlink" title="Write Data To DDRAM"></a>Write Data To DDRAM</h3><p>Recall the operation:</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616222832.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616222832.png" alt="" title=""></a></div>

<ol>
<li><p>Set the pin of <code>RS</code> to high and <code>R/W</code> to low.</p>
</li>
<li><p>Set <code>E</code> to high, preparing for the data transfer.</p>
</li>
<li><p>Set <code>D7-D0</code> to the desired address.</p>
 <div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616223239.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_LCD/Pasted_image_20240616223239.png" alt="" title=""></a></div>
 </li>
<li><p>Set <code>E</code> to low</p>
</li>
</ol>
<p>Sample code:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">LCD_Write_Data</span><span class="params">(uchar dat)</span> &#123;</span><br><span class="line">  Delay_ms(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, LCD_RS_Pin, GPIO_PIN_SET);   <span class="comment">// LCD_RS = 1;</span></span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, LCD_RW_Pin, GPIO_PIN_RESET); <span class="comment">//	LCD_RW = 0;</span></span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, LCD_E_Pin, GPIO_PIN_SET);    <span class="comment">// LCD_E_Pin = 1;</span></span><br><span class="line">  <span class="comment">// Delay_ms(1);</span></span><br><span class="line"></span><br><span class="line">  LCD_PORT = dat; <span class="comment">// put data on the bus</span></span><br><span class="line"></span><br><span class="line">  HAL_GPIO_WritePin(GPIOB, LCD_E_Pin, GPIO_PIN_RESET); <span class="comment">// Set LCD_E = 0;</span></span><br><span class="line"></span><br><span class="line">  Delay_ms(<span class="number">1</span>); <span class="comment">// wait for tpw;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Init-LCD"><a href="#Init-LCD" class="headerlink" title="Init LCD"></a>Init LCD</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> LCD_2_LINE_4_BITS 0x28</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LCD_2_LINE_8_BITS 0x38</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LCD_DSP_CSR 0x0c</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LCD_CLR_DSP 0x01 </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LCD_CSR_INC 0x06</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">LCD_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">  LCD_Write_Command(LCD_2_LINE_8_BITS); <span class="comment">// function set -8 bit interface</span></span><br><span class="line">  Delay_ms(<span class="number">5</span>);</span><br><span class="line">  LCD_Write_Command(LCD_2_LINE_8_BITS); </span><br><span class="line">  </span><br><span class="line">  LCD_Write_Command(LCD_CLR_DSP); <span class="comment">// clear display</span></span><br><span class="line">  Delay_us(<span class="number">100</span>);</span><br><span class="line">  LCD_Write_Command(LCD_CSR_INC); <span class="comment">// Set entry mode: increment</span></span><br><span class="line">  Delay_us(<span class="number">100</span>);</span><br><span class="line">  LCD_Write_Command(LCD_DSP_CSR); <span class="comment">// open display, close cursor</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Display-Charactor"><a href="#Display-Charactor" class="headerlink" title="Display Charactor"></a>Display Charactor</h3><p>First we need to set the cursor position</p>
<p>The cursor position is basically the DDRAM address that you want to write data in, which is corresponding to the display location on LCD screen.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">LCD_Set_Position</span><span class="params">(uchar x, uchar y)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (y == <span class="number">0</span>) <span class="comment">// first line</span></span><br><span class="line">  &#123;</span><br><span class="line">    LCD_Write_Command(<span class="number">0x80</span> + x);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y == <span class="number">1</span>) <span class="comment">// second line</span></span><br><span class="line">  &#123;</span><br><span class="line">    LCD_Write_Command(<span class="number">0xc0</span> + x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>If we want to display a character at first line, first column:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LCD_Set_Position(<span class="number">0</span>,<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>Then, we need to write data into DDRAM[addr] to tell the LCD which character you want to display, for example “J”.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LCD_Write_Data(<span class="string">&quot;J&quot;</span>); <span class="comment">// send the ascii code</span></span><br></pre></td></tr></table></figure>

<p>Putting them all together:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">LCD_Display_Char</span><span class="params">(uchar Char, uchar x, uchar y)</span></span><br><span class="line">&#123;</span><br><span class="line">  LCD_Set_Position(x, y);</span><br><span class="line">  LCD_Write_Data(Char);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Display-String"><a href="#Display-String" class="headerlink" title="Display String"></a>Display String</h3><p>The cursor will shift right (because we set <code>increment</code> entry mode) after each <code>write_data</code> operation, so displaying a string is quite simple.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">LCD_Display_Char</span><span class="params">(uchar Char, uchar x, uchar y)</span> <span class="comment">// 显示字符ASCII码</span></span><br><span class="line">&#123;</span><br><span class="line">  LCD_Set_Position(x, y);</span><br><span class="line">  LCD_Write_Data(Char);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>…</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-06-15T17:51:30.000Z" title="6/16/2024, 1:51:30 AM">2024-06-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-03T12:09:59.027Z" title="12/3/2024, 8:09:59 PM">2024-12-03</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">a few seconds read (About 52 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/16/%5BOBS%5DEmbededSystem-ECE3730J%20RC2_Output_Compare/">ECE3730J RC2_Output_Compare</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="Output-Compare-Module"><a href="#Output-Compare-Module" class="headerlink" title="Output Compare Module"></a>Output Compare Module</h2><p>OC is a peripheral that can generate precise output signal independent of the processor (Core).</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617160331.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617160331.png" alt="" title=""></a></div>
### Single Compare

<p>Drive high, drive low, toggle</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154200.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154200.png" alt="" title=""></a></div>

<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154213.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154213.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154922.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154922.png" alt="" title=""></a></div>



<h3 id="Dual-Compare"><a href="#Dual-Compare" class="headerlink" title="Dual Compare"></a>Dual Compare</h3><p>Single pulse, continuous.</p>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154942.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154942.png" alt="" title=""></a></div>
<div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154951.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617154951.png" alt="" title=""></a></div>

<h3 id="PWM"><a href="#PWM" class="headerlink" title="PWM"></a>PWM</h3><div class="post-content"><a href="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617155524.png" title="" title=" class="gallery-item"><img src="/2024/06/16/[OBS]EmbededSystem-ECE3730J RC2_Output_Compare/Pasted_image_20240617155524.png" alt="" title=""></a></div>

</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-21T11:51:48.000Z" title="5/21/2024, 7:51:48 PM">2024-05-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-03T12:09:59.023Z" title="12/3/2024, 8:09:59 PM">2024-12-03</time></span><span class="level-item"><a class="link-muted" href="/categories/Note/">Note</a></span><span class="level-item">6 minutes read (About 833 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/21/%5BOBS%5DEmbededSystem-STM32%20Development%20on%20Linux/">STM32 Development on Linux</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><p>System used: Archlinux</p>
<h2 id="Pre-requirements"><a href="#Pre-requirements" class="headerlink" title="Pre-requirements"></a>Pre-requirements</h2><ul>
<li>c language server (for completion, diagnostics), e.g. <code>clangd</code></li>
<li>A code editor that use language server, e.g. <code>vscode</code>, <code>vim/neovim</code></li>
</ul>
<h2 id="Install-Related-Softwares"><a href="#Install-Related-Softwares" class="headerlink" title="Install Related Softwares"></a>Install Related Softwares</h2><h3 id="STM32CubeMX"><a href="#STM32CubeMX" class="headerlink" title="STM32CubeMX"></a>STM32CubeMX</h3><p>STM32CubeMX is mainly responsible for generating the project with your configuration.</p>
<p>For Distro like Ubuntu&#x2F;Debain, you can go to the <a target="_blank" rel="noopener" href="https://www.st.com.cn/content/st_com/zh/stm32cubemx.html">ST official site</a><br>Or you can install the software through distro repository</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S stm32cubemx</span><br></pre></td></tr></table></figure>
<p>For Arch, you need to modify the AUR repository (I mean, maybe the maintainer doesn’t do a good job).<br>The URL for the repository:<a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/stm32cubemx">https://aur.archlinux.org/packages/stm32cubemx</a></p>
<p>First clone the repository</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://aur.archlinux.org/stm32cubemx.git</span><br></pre></td></tr></table></figure>
<p>Modify the required jdk version in file <code>stm32cubemx.sh</code><br>from <code>exec archlinux-java-run --min 17 -- -jar /opt/stm32cubemx/STM32CubeMX &quot;$@&quot;</code> to <code>exec archlinux-java-run --min 17 --max 20 -- -jar /opt/stm32cubemx/STM32CubeMX &quot;$@&quot;</code></p>
<p>Then build and install the STM32CubeMX</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">makepkg --noconfirm --skipinteg -si</span><br></pre></td></tr></table></figure>
<p>Since STM32CubeMX is not compatible with jdk22 (which is the default jdk that arch is currently using), you need to install jdk17 through <code>yay -S jdk17-openjdk</code></p>
<p>Then you can start STM32CubeMX by running <code>stm32cubemx</code>, and hopefully, everything is fine.</p>
<h3 id="Compiler"><a href="#Compiler" class="headerlink" title="Compiler"></a>Compiler</h3><p>Use <code>arm-none-eabi-gcc</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yay -S arm-none-eabi-gcc</span><br><span class="line">yay -S arm-none-eabi-newlib</span><br></pre></td></tr></table></figure>

<h3 id="Debugger"><a href="#Debugger" class="headerlink" title="Debugger"></a>Debugger</h3><p>Use <code>OpenOCD</code> to burn and debug STM32 through STLink v2 (the blue USB device provided by us).</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S openocd</span><br></pre></td></tr></table></figure>

<h2 id="Setup-Your-STM32-Project"><a href="#Setup-Your-STM32-Project" class="headerlink" title="Setup Your STM32 Project"></a>Setup Your STM32 Project</h2><p>Open your STM32CubeMX, follow the instruction of <code>Lab1.pdf</code> to configure your project.</p>
<p><strong>NOTE</strong>: In <code>Project Manage -&gt; Project -&gt; Project Settings -&gt; Toolchain / IDE</code>, use <code>Makefile/CMake</code>.</p>
<p>Generate the code and go to the project directory (with <code>Makefile</code>&#x2F;<code>CMakeLists.txt</code> in the directory).</p>
<p>Then you need to generate the <code>compile_commands.json</code> for <code>clangd</code> to recognize the project.</p>
<h3 id="Makefile"><a href="#Makefile" class="headerlink" title="Makefile"></a>Makefile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bear -- make</span><br></pre></td></tr></table></figure>

<h3 id="CMake"><a href="#CMake" class="headerlink" title="CMake"></a>CMake</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -S ./ -B ./build</span><br></pre></td></tr></table></figure>

<h2 id="Build-Project"><a href="#Build-Project" class="headerlink" title="Build Project"></a>Build Project</h2><h3 id="Makefile-1"><a href="#Makefile-1" class="headerlink" title="Makefile"></a>Makefile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>
<p>Then target binary file is <code>./build/&lt;Project Name&gt;.bin</code></p>
<h3 id="CMake-1"><a href="#CMake-1" class="headerlink" title="CMake"></a>CMake</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake --build ./build</span><br></pre></td></tr></table></figure>
<p>Then target binary file is <code>./build/&lt;Project Name&gt;.elf</code></p>
<h2 id="Load-to-STM32F103C8T6"><a href="#Load-to-STM32F103C8T6" class="headerlink" title="Load to STM32F103C8T6"></a>Load to STM32F103C8T6</h2><p>Use <code>OpenOCD</code> to load the binary file to the board.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> openocd -f /usr/share/openocd/scripts/interface/stlink.cfg -f /usr/share/openocd/scripts/target/stm32f1x.cfg -c <span class="string">&quot;program ./build/&lt;Project Name&gt;.bin reset exit 0x8000000&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Open On-Chip Debugger 0.12.0</span><br><span class="line">Licensed under GNU GPL v2</span><br><span class="line">For bug reports, <span class="built_in">read</span></span><br><span class="line">	http://openocd.org/doc/doxygen/bugs.html</span><br><span class="line">Info : auto-selecting first available session transport <span class="string">&quot;hla_swd&quot;</span>. To override use <span class="string">&#x27;transport select &lt;transport&gt;&#x27;</span>.</span><br><span class="line">Info : The selected transport took over low-level target control. The results might differ compared to plain JTAG/SWD</span><br><span class="line">Info : clock speed 1000 kHz</span><br><span class="line">Info : STLINK V2J37S7 (API v2) VID:PID 0483:3748</span><br><span class="line">Info : Target voltage: 3.222587</span><br><span class="line">Info : [stm32f1x.cpu] Cortex-M3 r1p1 processor detected</span><br><span class="line">Info : [stm32f1x.cpu] target has 6 breakpoints, 4 watchpoints</span><br><span class="line">Info : starting gdb server <span class="keyword">for</span> stm32f1x.cpu on 3333</span><br><span class="line">Info : Listening on port 3333 <span class="keyword">for</span> gdb connections</span><br><span class="line">[stm32f1x.cpu] halted due to debug-request, current mode: Thread</span><br><span class="line">xPSR: 0x01000000 pc: 0x08000dc8 msp: 0x20005000</span><br><span class="line">** Programming Started **</span><br><span class="line">Info : device <span class="built_in">id</span> = 0x20036410</span><br><span class="line">Info : flash size = 64 KiB</span><br><span class="line">** Programming Finished **</span><br><span class="line">** Resetting Target **</span><br><span class="line">shutdown <span class="built_in">command</span> invoked</span><br></pre></td></tr></table></figure>

<p><strong>NOTE</strong>: In different Distro, the <code>cfg</code> file for <code>OpenOCD</code> may locate in different directories. You need to find it by yourselves.</p>
<h3 id="By-the-way-if-you-use-CMake"><a href="#By-the-way-if-you-use-CMake" class="headerlink" title="By the way, if you use CMake"></a>By the way, if you use CMake</h3><p><strong>Note:</strong> When uploading binary file to STM32, it’s recommended to use <code>.bin</code> file instead of <code>.elf</code> file.<br>Please use the following script to convert the <code>.elf</code> to <code>.bin</code> and upload.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=ON .</span><br><span class="line">cmake --build  ./build </span><br><span class="line">arm-none-eabi-objcopy  -O binary -S ./build/*.elf ./build/target.bin</span><br><span class="line"><span class="built_in">sudo</span> openocd -f /usr/share/openocd/scripts/interface/stlink.cfg -f /usr/share/openocd/scripts/target/stm32f1x.cfg -c <span class="string">&quot;program ./build/target.bin reset exit 0x8000000&quot;</span></span><br></pre></td></tr></table></figure>


<h2 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h2><p>You have three possible choices. I recommend using Ozone.</p>
<h3 id="openocd-gdb-gdbfrontend-not-recommended"><a href="#openocd-gdb-gdbfrontend-not-recommended" class="headerlink" title="openocd+gdb+gdbfrontend(not recommended)"></a>openocd+gdb+gdbfrontend(not recommended)</h3><p>reference:<br><a target="_blank" rel="noopener" href="https://rohanrhu.github.io/gdb-frontend/tutorials/embedded-debugging/">https://rohanrhu.github.io/gdb-frontend/tutorials/embedded-debugging/</a></p>
<h3 id="openocd-vscode-PlatformIO-not-recommended"><a href="#openocd-vscode-PlatformIO-not-recommended" class="headerlink" title="openocd+vscode+PlatformIO (not recommended)"></a>openocd+vscode+PlatformIO (not recommended)</h3><p>reference:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41757528/article/details/127741620">https://blog.csdn.net/qq_41757528/article/details/127741620</a></p>
<h3 id="Segger-Ozone"><a href="#Segger-Ozone" class="headerlink" title="Segger Ozone!!!"></a>Segger Ozone!!!</h3><p>reference:<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41572450/article/details/124710818">https://blog.csdn.net/weixin_41572450/article/details/124710818</a></p>
<p>Maybe the best debug tool for stm32</p>
<p>To use segger ozone, you need a different linker called jlink (originally we use st-link v2). You need to buy this linker first (maybe on Taobao or Amazon).</p>
<p>Install Ozone through:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S ozone</span><br></pre></td></tr></table></figure>

<h4 id="Setup-of-ozone-project"><a href="#Setup-of-ozone-project" class="headerlink" title="Setup of ozone project:"></a>Setup of ozone project:</h4><ul>
<li>Start Ozone</li>
<li>Choose Device<ul>
<li>Device: STM32F103C8</li>
<li>Register Set: Cortex-M3</li>
<li>Peripherials (optional): &#x2F;opt&#x2F;SEGGER&#x2F;Ozone&#x2F;Config&#x2F;Peripherals&#x2F;STM32F103xx.svd</li>
</ul>
</li>
<li>Connection Settings<ul>
<li>Target Interface: SWD</li>
<li>Target Interface Speed: 4MHz</li>
<li>Host Interface: USB</li>
</ul>
</li>
<li>Program File: select the binary file you have built (<code>.elf</code> is recommended).</li>
</ul>
<h4 id="Debug-1"><a href="#Debug-1" class="headerlink" title="Debug:"></a>Debug:</h4><p>set some breakpoints and watch some variables of your interest.<br>Press the green “power” icon on the upper left corner to start (upload the program and start the debugging process)<br>Press the blue “play” icon besides “power” to continue.</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-05-09T21:58:07.000Z" title="5/10/2023, 5:58:07 AM">2023-05-10</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-12-03T12:09:59.073Z" title="12/3/2024, 8:09:59 PM">2024-12-03</time></span><span class="level-item">a few seconds read (About 31 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/10/%5BOBS%5DEmbededSystem-basic/">basic</a></p><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="Embeded-System"><a href="#Embeded-System" class="headerlink" title="Embeded System"></a>Embeded System</h1><h2 id="Microprocessor"><a href="#Microprocessor" class="headerlink" title="Microprocessor"></a>Microprocessor</h2><p>peripheral chips are needed to construct a product</p>
<h2 id="Microcontroller"><a href="#Microcontroller" class="headerlink" title="Microcontroller"></a>Microcontroller</h2><p>processor an peripheral functions implemented on a VLSI chip</p>
<p>Processing speed much slower and energy consuming is much lower</p>
</div><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-fullscreen.js@1.2.0/dist/lg-fullscreen.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-autoplay.js@1.2.0/dist/lg-autoplay.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-video.js@1.3.0/dist/lg-video.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-hash.js@1.0.0/dist/lg-hash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-pager.js@1.0.0/dist/lg-pager.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script></div></article></div></div><style>.column.column-left,.column.column-right{display:none}</style><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="Chen Yulin"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Chen Yulin</p><p class="is-size-6 is-block">SJTU student</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Manchester by the Sea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives/"><p class="title">159</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories/"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags/"><p class="title">161</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Chen-Yulin" target="_blank" rel="me noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/Chen-Yulin"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/12/"><span class="level-start"><span class="level-item">December 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/11/"><span class="level-start"><span class="level-item">November 2024</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/10/"><span class="level-start"><span class="level-item">October 2024</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">September 2024</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">August 2024</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">July 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">June 2024</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">May 2024</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">April 2024</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">March 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">January 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/05/"><span class="level-start"><span class="level-item">May 2023</span></span><span class="level-end"><span class="level-item tag">47</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/2024/12/03/%5BOBS%5DFL-FLamby/"><img src="/thumb/python.png" alt="FLamby"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-12-02T18:14:21.000Z">2024-12-03</time></p><p class="title"><a href="/2024/12/03/%5BOBS%5DFL-FLamby/">FLamby</a></p><p class="categories"><a href="/categories/Note/">Note</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2024/12/03/%5BOBS%5D%E6%98%9F%E7%A9%BA%E8%AF%BB%E4%B9%A6%E4%BC%9A-%E3%80%8A%E7%AC%AC%E4%B8%83%E5%A4%A9%E3%80%8B%E8%AF%BB%E4%B9%A6%E4%BC%9Ap13/"><img src="/thumb/Reading.png" alt="《第七天》读书会p13"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-12-02T16:01:03.000Z">2024-12-03</time></p><p class="title"><a href="/2024/12/03/%5BOBS%5D%E6%98%9F%E7%A9%BA%E8%AF%BB%E4%B9%A6%E4%BC%9A-%E3%80%8A%E7%AC%AC%E4%B8%83%E5%A4%A9%E3%80%8B%E8%AF%BB%E4%B9%A6%E4%BC%9Ap13/">《第七天》读书会p13</a></p><p class="categories"><a href="/categories/%E8%AF%BB%E8%AF%BB%E5%99%9C/">读读噜</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-11-20T16:10:18.000Z">2024-11-21</time></p><p class="title"><a href="/2024/11/21/%5BOBS%5DReconstruct%20Anything/">Reconstruct Anything</a></p><p class="categories"><a href="/categories/Note/">Note</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-11-20T14:19:13.000Z">2024-11-20</time></p><p class="title"><a href="/2024/11/20/%5BOBS%5DDeep%20Learning-CV-ACDC-%20Automated%20Creation%20of%20Digital%20Cousins%20for%20Robust%20Policy%20Learning/">ACDC- Automated Creation of Digital Cousins for Robust Policy Learning</a></p><p class="categories"><a href="/categories/Note/">Note</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2024/11/17/%5BOBS%5DPoseEstimation-Cosypose%20(multi-view)%20Adaption/"><img src="/thumb/python.png" alt="Cosypose modification"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-11-16T16:35:56.000Z">2024-11-17</time></p><p class="title"><a href="/2024/11/17/%5BOBS%5DPoseEstimation-Cosypose%20(multi-view)%20Adaption/">Cosypose modification</a></p><p class="categories"><a href="/categories/Note/">Note</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/6-D/"><span class="tag">6-D</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AIGC/"><span class="tag">AIGC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AR/"><span class="tag">AR</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Behaviorism/"><span class="tag">Behaviorism</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CADC/"><span class="tag">CADC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CD/"><span class="tag">CD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CNN/"><span class="tag">CNN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CSharp/"><span class="tag">CSharp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CV/"><span class="tag">CV</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Capstone/"><span class="tag">Capstone</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Control/"><span class="tag">Control</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DD/"><span class="tag">DD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Discrete-Mathematics/"><span class="tag">Discrete-Mathematics</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ESP32/"><span class="tag">ESP32</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Education/"><span class="tag">Education</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Embeded-System/"><span class="tag">Embeded-System</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FL/"><span class="tag">FL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Federated-Learning/"><span class="tag">Federated-Learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Foundation/"><span class="tag">Foundation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Functional-programming/"><span class="tag">Functional programming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GPT/"><span class="tag">GPT</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Game/"><span class="tag">Game</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gated-NN/"><span class="tag">Gated-NN</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Github/"><span class="tag">Github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HRI/"><span class="tag">HRI</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Haskell/"><span class="tag">Haskell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Humanism/"><span class="tag">Humanism</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IK/"><span class="tag">IK</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ImitationLearning/"><span class="tag">ImitationLearning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Javascript/"><span class="tag">Javascript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LSP/"><span class="tag">LSP</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Latex/"><span class="tag">Latex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LinearAlgebra/"><span class="tag">LinearAlgebra</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MBTI/"><span class="tag">MBTI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ML/"><span class="tag">ML</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MR-AR/"><span class="tag">MR/AR</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Method/"><span class="tag">Method</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mod/"><span class="tag">Mod</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Music/"><span class="tag">Music</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NLP/"><span class="tag">NLP</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NN/"><span class="tag">NN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Network/"><span class="tag">Network</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenCV/"><span class="tag">OpenCV</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHD/"><span class="tag">PHD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PSY/"><span class="tag">PSY</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Planning/"><span class="tag">Planning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Plugin/"><span class="tag">Plugin</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PoseEstimation/"><span class="tag">PoseEstimation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Postgraduate/"><span class="tag">Postgraduate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prefab/"><span class="tag">Prefab</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Probability/"><span class="tag">Probability</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pytorch/"><span class="tag">Pytorch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/QML/"><span class="tag">QML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RNN/"><span class="tag">RNN</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ROS/"><span class="tag">ROS</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reading/"><span class="tag">Reading</span><span class="tag">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Robot/"><span class="tag">Robot</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Robotics/"><span class="tag">Robotics</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SJTU-Lecture/"><span class="tag">SJTU-Lecture</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Script/"><span class="tag">Script</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shader/"><span class="tag">Shader</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Signals-and-Systems/"><span class="tag">Signals and Systems</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Snippets/"><span class="tag">Snippets</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Star-rail/"><span class="tag">Star-rail</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TC/"><span class="tag">TC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TOEFL/"><span class="tag">TOEFL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tech-Communication/"><span class="tag">Tech Communication</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Transoformer/"><span class="tag">Transoformer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unity/"><span class="tag">Unity</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VideoEditing/"><span class="tag">VideoEditing</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vim/"><span class="tag">Vim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WSL/"><span class="tag">WSL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web/"><span class="tag">Web</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/academic-ability/"><span class="tag">academic-ability</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aliyun/"><span class="tag">aliyun</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/app/"><span class="tag">app</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/atlas/"><span class="tag">atlas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/autonomousDriving/"><span class="tag">autonomousDriving</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/beautify/"><span class="tag">beautify</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bs4/"><span class="tag">bs4</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/c/"><span class="tag">c</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/comment-doc/"><span class="tag">comment&amp;doc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/course/"><span class="tag">course</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csharp/"><span class="tag">csharp</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/css/"><span class="tag">css</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dataframe/"><span class="tag">dataframe</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debate/"><span class="tag">debate</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debugger/"><span class="tag">debugger</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docs/"><span class="tag">docs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/dynamic-programmming/"><span class="tag">dynamic-programmming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emoation/"><span class="tag">emoation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/emotion/"><span class="tag">emotion</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ethic/"><span class="tag">ethic</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/family/"><span class="tag">family</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/godot/"><span class="tag">godot</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/health/"><span class="tag">health</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/html/"><span class="tag">html</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hyprland/"><span class="tag">hyprland</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/idea/"><span class="tag">idea</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jolt/"><span class="tag">jolt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/live2d/"><span class="tag">live2d</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/llm/"><span class="tag">llm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/love/"><span class="tag">love</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lua/"><span class="tag">lua</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mason/"><span class="tag">mason</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/math/"><span class="tag">math</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/meeting/"><span class="tag">meeting</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/meme/"><span class="tag">meme</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/motivation/"><span class="tag">motivation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/movie/"><span class="tag">movie</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/multi-view/"><span class="tag">multi-view</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/music/"><span class="tag">music</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/numpy/"><span class="tag">numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nvim/"><span class="tag">nvim</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/operational-ability/"><span class="tag">operational-ability</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/oral/"><span class="tag">oral</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pandas/"><span class="tag">pandas</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/path/"><span class="tag">path</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/philosophy/"><span class="tag">philosophy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/physX/"><span class="tag">physX</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/physics-engine/"><span class="tag">physics-engine</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pio/"><span class="tag">pio</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/plugin/"><span class="tag">plugin</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/quantum/"><span class="tag">quantum</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/recursive/"><span class="tag">recursive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regex/"><span class="tag">regex</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/reinforcement-learning/"><span class="tag">reinforcement-learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/repository/"><span class="tag">repository</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/scrap/"><span class="tag">scrap</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/shell/"><span class="tag">shell</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sklearn/"><span class="tag">sklearn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/society/"><span class="tag">society</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssh/"><span class="tag">ssh</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/start-business/"><span class="tag">start-business</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/submodule/"><span class="tag">submodule</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/supervised-learning/"><span class="tag">supervised-learning</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tasks/"><span class="tag">tasks</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/thought/"><span class="tag">thought</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/travel/"><span class="tag">travel</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unsupervised-learning/"><span class="tag">unsupervised-learning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/version-management/"><span class="tag">version-management</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/waybar/"><span class="tag">waybar</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wayland/"><span class="tag">wayland</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/website/"><span class="tag">website</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/well-being/"><span class="tag">well-being</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/window-manager/"><span class="tag">window-manager</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ykll/"><span class="tag">ykll</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/zen/"><span class="tag">zen</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%F0%9F%90%B1/"><span class="tag">🐱</span><span class="tag">1</span></a></div></div></div></div></div></div><style>.column.column-left,.column.column-right{display:block}</style></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/img/cyllogo.png" alt="Chen Yulin&#039;s Blog" height="28"><img class="logo-img-dark" src="/img/cyllogonight.png" alt="Chen Yulin&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 Chen Yulin</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Chen-Yulin"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked="checked"><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer></script><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script><!-- hexo injector body_end start -->
<link rel="stylesheet" crossorigin href="https://g.alicdn.com/aliyun-documentation/web-chatbot-ui/0.0.11/index.css" />
<script type="module" crossorigin src="https://g.alicdn.com/aliyun-documentation/web-chatbot-ui/0.0.11/index.js"></script>
<script>
  window.CHATBOT_CONFIG = {
    endpoint: "https://webchat-bot-iqu-knzhgrvznd.cn-hangzhou.fcapp.run/chat", // 可以替换为 https://{your-fc-http-trigger-domain}/chat
    displayByDefault: false, // 默认不展示 AI 助手聊天框
    aiChatOptions: { // aiChatOptions 中 options 会传递 aiChat 组件，自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat
      conversationOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#conversation-options
        conversationStarters: [
          {prompt: '你是谁？'},
          {prompt: '博主又是谁？'},
          {prompt: '怎么使用这个网站？'},
          {prompt: '博主喜欢的人是？'},
          {prompt: '想要博主联系方式！'},
        ]
      },
      displayOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#display-options
        height: 600,
        width: 350,
      },
      personaOptions: { // 自定义取值参考：https://docs.nlkit.com/nlux/reference/ui/ai-chat#chat-personas
        assistant: {          name: '博主的AI助手，十四行诗参上！',
          // AI 助手的图标
          avatar: 'https://chen-yulin.github.io/thumb/14.png',
          tagline: '要不要试试问下面的问题呢？',
        }
      }
    }
  };
</script>
<style>
  :root {
    /* webchat 工具栏的颜色 */
    --webchat-toolbar-background-color: #1464E4;
    /* webchat 工具栏文字和按钮的颜色 */
    --webchat-toolbar-text-color: #FFF;
  }
  /* webchat 对话框如果被遮挡，可以尝试通过 z-index、bottom、left 等设置来调整位置 */
  .webchat-container {
    z-index: 100;
    bottom: 10px;
    right: 10px;
  }
  /* webchat 的唤起按钮如果被遮挡，可以尝试通过 z-index、bottom、left 等设置来调整位置 */
  .webchat-bubble-tip {
    z-index: 99;
    bottom: 60px;
    right: 20px;
  }
  .webchat-bubble-tip {
    overflow: visible !important;
  }
  @keyframes float {
    0% {
      transform: translateY(0px) translateX(-50%);
    }
    50% {
      transform: translateY(-10px) translateX(-50%);
    }
    100% {
      transform: translateY(0px) translateX(-50%);
    }
  }

  .webchat-bubble-tip::before {
    content: '';
    position: absolute;
    top: -25px;
    left: 70%;
    width: 40px;
    height: 40px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.5));
    animation: float 3s ease-in-out infinite;
  }
</style><script data-pjax src="https://registry.npmmirror.com/oh-my-live2d/latest/files"></script><script>const oml2d = OML2D.loadOml2d({libraryUrls:{"complete":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/complete.js","cubism2":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/cubism2.js","cubism5":"https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/cubism5.js"},dockedPosition:"left",mobileDisplay:true,models:[{"path":"https://model.oml2d.com/mai/model.json","mobilePosition":[25,0],"mobileScale":0.1,"mobileStageStyle":{"width":125,"height":175},"motionPreloadStrategy":"ALL","position":[50,0],"scale":0.2,"stageStyle":{"width":250,"height":350}}],parentElement:document.body,primaryColor:"var(--btn-bg)",sayHello:false,tips:{style: {"width":230,"height":120,"left":"calc(50% - 20px)","top":"-100px"},mobileStyle: {"width":180,"height":80,"left":"calc(50% - 30px)","top":"-100px"},idleTips:{interval:15000,message:function(){
  return axios.get('https://v1.hitokoto.cn?c=i')
    .then(function (response) {
      return response.data.hitokoto ;
    })
    .catch(function (error) {
      console.error(error);
    });
}
}}});</script><!-- hexo injector body_end end --></body></html>